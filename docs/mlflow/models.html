

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to log, load and register MLflow models for model deployment. This article also includes guidance on how to log model dependencies so they are reproduced in your deployment environment." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Log, load, register, and deploy MLflow models">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Log, load, register, and deploy MLflow models &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/mlflow/models.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/mlflow/models.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/mlflow/models.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="top" title="Databricks on AWS" href="../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../en/mlflow/models.html" class="notranslate">English</option>
    <option value="../../ja/mlflow/models.html" class="notranslate">日本語</option>
    <option value="../../pt/mlflow/models.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Log, load, register, and deploy MLflow models</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="log-load-register-and-deploy-mlflow-models">
<h1>Log, load, register, and deploy MLflow models<a class="headerlink" href="#log-load-register-and-deploy-mlflow-models" title="Permalink to this headline"> </a></h1>
<p>An MLflow <a class="reference external" href="https://mlflow.org/docs/latest/models.html">Model</a> is a standard format for packaging machine learning models that can be used in a variety of downstream tools—for example, batch inference on Apache Spark or real-time serving through a REST API. The format defines a convention that lets you save a model in different <a class="reference external" href="https://www.mlflow.org/docs/latest/models.html#built-in-model-flavors">flavors</a> (python-function, pytorch, sklearn, and so on), that can be understood by different model <a class="reference external" href="https://www.mlflow.org/docs/latest/models.html#built-in-deployment-tools">serving and inference platforms</a>.</p>
<div class="section" id="log-and-load-models">
<span id="log-and-load"></span><h2>Log and load models<a class="headerlink" href="#log-and-load-models" title="Permalink to this headline"> </a></h2>
<p>When you log a model, MLflow automatically logs <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">conda.yaml</span></code> files. You can use these files to recreate the model development environment and reinstall dependencies using <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> (recommended) or <code class="docutils literal notranslate"><span class="pre">conda</span></code>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Anaconda Inc. updated their <a class="reference external" href="https://www.anaconda.com/terms-of-service">terms of service</a> for anaconda.org channels. Based on the new terms of service you may require a commercial license if you rely on Anaconda’s packaging and distribution. See <a class="reference external" href="https://www.anaconda.com/blog/anaconda-commercial-edition-faq">Anaconda Commercial Edition FAQ</a> for more information. Your use of any Anaconda channels is governed by their terms of service.</p>
<p>MLflow models logged before <a class="reference external" href="https://mlflow.org/news/2021/06/18/1.18.0-release/index.html">v1.18</a> (Databricks Runtime 8.3 ML or earlier) were by default logged with the conda <code class="docutils literal notranslate"><span class="pre">defaults</span></code> channel (<a class="reference external" href="https://repo.anaconda.com/pkgs/">https://repo.anaconda.com/pkgs/</a>) as a dependency. Because of this license change, Databricks has stopped the use of the <code class="docutils literal notranslate"><span class="pre">defaults</span></code> channel for models logged using MLflow v1.18 and above. The default channel logged is now <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code>, which points at the community managed <a class="reference external" href="https://conda-forge.org/">https://conda-forge.org/</a>.</p>
<p>If you logged a model before MLflow v1.18 without excluding the <code class="docutils literal notranslate"><span class="pre">defaults</span></code> channel from the conda environment for the model, that model may have a dependency on the <code class="docutils literal notranslate"><span class="pre">defaults</span></code> channel that you may not have intended.
To manually confirm whether a model has this dependency, you can examine <code class="docutils literal notranslate"><span class="pre">channel</span></code> value in the <code class="docutils literal notranslate"><span class="pre">conda.yaml</span></code> file that is packaged with the logged model. For example, a model’s <code class="docutils literal notranslate"><span class="pre">conda.yaml</span></code> with a <code class="docutils literal notranslate"><span class="pre">defaults</span></code> channel dependency may look like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">channels</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">defaults</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python=3.8.8</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pip</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlflow</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">scikit-learn==0.23.2</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cloudpickle==1.6.0</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlflow-env</span>
</pre></div>
</div>
<p>Because Databricks can not determine whether your use of the Anaconda repository to interact with your models is permitted under your relationship with Anaconda, Databricks is not forcing its customers to make any changes. If your use of the Anaconda.com repo through the use of Databricks is permitted under Anaconda’s terms, you do not need to take any action.</p>
<p>If you would like to change the channel used in a model’s environment, you can re-register the model to the model registry with a new <code class="docutils literal notranslate"><span class="pre">conda.yaml</span></code>. You can do this by specifying the channel in the <code class="docutils literal notranslate"><span class="pre">conda_env</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">log_model()</span></code>.</p>
<p>For more information on the <code class="docutils literal notranslate"><span class="pre">log_model()</span></code> API, see the MLflow documentation for the model flavor you are working with, for example, <a class="reference external" href="https://www.mlflow.org/docs/latest/python_api/mlflow.sklearn.html#mlflow.sklearn.log_model">log_model for scikit-learn</a>.</p>
<p>For more information on <code class="docutils literal notranslate"><span class="pre">conda.yaml</span></code> files, see the <a class="reference external" href="https://www.mlflow.org/docs/latest/models.html#additional-logged-files">MLflow documentation</a>.</p>
</div>
<div class="section" id="api-commands">
<h3>API commands<a class="headerlink" href="#api-commands" title="Permalink to this headline"> </a></h3>
<p>To log a model to the MLflow <a class="reference internal" href="tracking.html"><span class="doc">tracking server</span></a>, use <code class="docutils literal notranslate"><span class="pre">mlflow.&lt;model-type&gt;.log_model(model,</span> <span class="pre">...)</span></code>.</p>
<p>To load a previously logged model for inference or further development, use <code class="docutils literal notranslate"><span class="pre">mlflow.&lt;model-type&gt;.load_model(modelpath)</span></code>, where <code class="docutils literal notranslate"><span class="pre">modelpath</span></code> is one of the following:</p>
<ul class="simple">
<li><p>a run-relative path (such as <code class="docutils literal notranslate"><span class="pre">runs:/{run_id}/{model-path}</span></code>)</p></li>
<li><p>a DBFS path</p></li>
<li><p>a <a class="reference internal" href="model-registry.html"><span class="doc">registered model</span></a> path (such as <code class="docutils literal notranslate"><span class="pre">models:/{model_name}/{model_stage}</span></code>).</p></li>
</ul>
<p>For a complete list of options for loading MLflow models, see <a class="reference external" href="https://www.mlflow.org/docs/latest/concepts.html#artifact-locations">Referencing Artifacts in the MLflow documentation</a>.</p>
<p>For Python MLflow models, an additional option is to use <code class="docutils literal notranslate"><span class="pre">mlflow.pyfunc.load_model()</span></code> to load the model as a generic Python function.
You can use the following code snippet to load the model and score data points.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">pyfunc</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">model_input</span><span class="p">)</span>
</pre></div>
</div>
<p>As an alternative, you can export the model as an Apache Spark UDF to use for scoring on a Spark cluster,
either as a batch job or as a real-time <a class="reference internal" href="../structured-streaming/index.html"><span class="doc">Spark Streaming</span></a> job.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># load input data table as a Spark DataFrame</span>
<span class="n">input_data</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">input_table_name</span><span class="p">)</span>
<span class="n">model_udf</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">pyfunc</span><span class="o">.</span><span class="n">spark_udf</span><span class="p">(</span><span class="n">spark</span><span class="p">,</span> <span class="n">model_path</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">input_data</span><span class="o">.</span><span class="n">withColumn</span><span class="p">(</span><span class="s2">&quot;prediction&quot;</span><span class="p">,</span> <span class="n">model_udf</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="log-model-dependencies">
<h3>Log model dependencies<a class="headerlink" href="#log-model-dependencies" title="Permalink to this headline"> </a></h3>
<p>To accurately load a model, you should make sure the model dependencies are loaded with the correct versions into the notebook environment. In Databricks Runtime 10.5 ML and above, MLflow warns you if a mismatch is detected between the current environment and the model’s dependencies.</p>
<p>Additional functionality to simplify restoring model dependencies is included in Databricks Runtime 11.0 ML and above. In Databricks Runtime 11.0 ML and above, for <code class="docutils literal notranslate"><span class="pre">pyfunc</span></code> flavor models, you can call <code class="docutils literal notranslate"><span class="pre">mlflow.pyfunc.get_model_dependencies</span></code> to retrieve and download the model dependencies. This function returns a path to the dependencies file which you can then install by using <code class="docutils literal notranslate"><span class="pre">%pip</span> <span class="pre">install</span> <span class="pre">&lt;file-path&gt;</span></code>. When you load a model as a PySpark UDF, specify <code class="docutils literal notranslate"><span class="pre">env_manager=&quot;virtualenv&quot;</span></code> in the <code class="docutils literal notranslate"><span class="pre">mlflow.pyfunc.spark_udf</span></code> call. This restores model dependencies in the context of the PySpark UDF and does not affect the outside environment.</p>
<p>You can also use this functionality in Databricks Runtime 10.5 or below by manually installing <a class="reference external" href="https://www.mlflow.org/docs/latest/index.html">MLflow version 1.25.0 or above</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">pip</span> <span class="n">install</span> <span class="s2">&quot;mlflow&gt;=1.25.0&quot;</span>
</pre></div>
</div>
<p>For additional information on how to log model dependencies (Python and non-Python) and artifacts, see <a class="reference internal" href="log-model-dependencies.html"><span class="doc">Log model dependencies</span></a>.</p>
<p>Learn how to log model dependencies and custom artifacts for model serving:</p>
<ul class="simple">
<li><p><a class="reference internal" href="log-model-dependencies.html#deploy-dependencies"><span class="std std-ref">Deploy models with dependencies</span></a></p></li>
<li><p><a class="reference internal" href="../machine-learning/model-serving/private-libraries-model-serving.html"><span class="doc">Use custom Python libraries with Model Serving</span></a></p></li>
<li><p><a class="reference internal" href="../machine-learning/model-serving/model-serving-custom-artifacts.html"><span class="doc">Package custom artifacts for Model Serving</span></a></p></li>
</ul>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="log-model-dependencies.html">Log model dependencies</a></li>
</ul>
</div>
</div>
<div class="section" id="automatically-generated-code-snippets-in-the-mlflow-ui">
<h3>Automatically generated code snippets in the MLflow UI<a class="headerlink" href="#automatically-generated-code-snippets-in-the-mlflow-ui" title="Permalink to this headline"> </a></h3>
<p>When you log a model in a Databricks notebook, Databricks automatically generates code snippets that you can copy and use to load and run the model. To view these code snippets:</p>
<ol class="arabic simple">
<li><p>Navigate to the Runs screen for the run that generated the model. (See <a class="reference internal" href="experiments.html#view-notebook-experiment"><span class="std std-ref">View notebook experiment</span></a> for how to display the Runs screen.)</p></li>
<li><p>Scroll to the <strong>Artifacts</strong> section.</p></li>
<li><p>Click the name of the logged model. A panel opens to the right showing code you can use to load the logged model and make predictions on Spark or pandas DataFrames.</p></li>
</ol>
<div class="figure align-default">
<img alt="Artifact panel code snippets" src="../_images/code-snippets.png" />
</div>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline"> </a></h3>
<p>For examples of logging models, see the examples in <a class="reference internal" href="tracking.html#tracking-examples"><span class="std std-ref">Track machine learning training runs examples</span></a>. For an example of loading a logged model for inference, see the following example.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="model-example.html">Model inference example</a></li>
</ul>
</div>
</div>
</div>
<div class="section" id="register-models-in-the-model-registry">
<h2>Register models in the Model Registry<a class="headerlink" href="#register-models-in-the-model-registry" title="Permalink to this headline"> </a></h2>
<p>You can register models in the <a class="reference internal" href="model-registry.html"><span class="doc">MLflow Model Registry</span></a>, a centralized model store that provides a UI and set of APIs to manage the full lifecycle of MLflow Models. For instructions on how to use the Model Registry to manage models in Databricks Unity Catalog, see <a class="reference internal" href="../machine-learning/manage-model-lifecycle/index.html"><span class="doc">Manage model lifecycle in Unity Catalog</span></a>. To use the Workspace Model Registry, see <a class="reference internal" href="model-registry.html"><span class="doc">Workspace Model Registry on Databricks</span></a>.</p>
<p>To register a model using the API, use <code class="docutils literal notranslate"><span class="pre">mlflow.register_model(&quot;runs:/{run_id}/{model-path}&quot;,</span> <span class="pre">&quot;{registered-model-name}&quot;)</span></code>.</p>
</div>
<div class="section" id="save-models-to-dbfs">
<h2>Save models to DBFS<a class="headerlink" href="#save-models-to-dbfs" title="Permalink to this headline"> </a></h2>
<p>To save a model locally, use <code class="docutils literal notranslate"><span class="pre">mlflow.&lt;model-type&gt;.save_model(model,</span> <span class="pre">modelpath)</span></code>. <code class="docutils literal notranslate"><span class="pre">modelpath</span></code> must be a <a class="reference internal" href="../dbfs/index.html"><span class="doc">DBFS</span></a> path. For example, if you use a DBFS location <code class="docutils literal notranslate"><span class="pre">dbfs:/my_project_models</span></code> to store your project work, you must use the model path <code class="docutils literal notranslate"><span class="pre">/dbfs/my_project_models</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>  <span class="n">modelpath</span> <span class="o">=</span> <span class="s2">&quot;/dbfs/my_project_models/model-</span><span class="si">%f</span><span class="s2">-</span><span class="si">%f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">l1_ratio</span><span class="p">)</span>
  <span class="n">mlflow</span><span class="o">.</span><span class="n">sklearn</span><span class="o">.</span><span class="n">save_model</span><span class="p">(</span><span class="n">lr</span><span class="p">,</span> <span class="n">modelpath</span><span class="p">)</span>
</pre></div>
</div>
<p>For MLlib models, use <a class="reference external" href="https://spark.apache.org/docs/latest/ml-pipeline.html#ml-persistence-saving-and-loading-pipelines">ML Pipelines</a>.</p>
</div>
<div class="section" id="download-model-artifacts">
<h2>Download model artifacts<a class="headerlink" href="#download-model-artifacts" title="Permalink to this headline"> </a></h2>
<p>You can download the logged model artifacts (such as model files, plots, and metrics) for a registered model with various APIs.</p>
<p><a class="reference external" href="https://www.mlflow.org/docs/latest/python_api/mlflow.tracking.html#mlflow.tracking.MlflowClient.get_model_version_download_uri">Python API</a> example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mlflow.store.artifact.models_artifact_repo</span> <span class="kn">import</span> <span class="n">ModelsArtifactRepository</span>

<span class="n">model_uri</span> <span class="o">=</span> <span class="n">MlflowClient</span><span class="o">.</span><span class="n">get_model_version_download_uri</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="n">model_version</span><span class="p">)</span>
<span class="n">ModelsArtifactRepository</span><span class="p">(</span><span class="n">model_uri</span><span class="p">)</span><span class="o">.</span><span class="n">download_artifacts</span><span class="p">(</span><span class="n">artifact_path</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference external" href="https://mlflow.org/docs/latest/java_api/org/mlflow/tracking/MlflowClient.html#downloadModelVersion-java.lang.String-java.lang.String-">Java API</a> example:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">MlflowClient</span><span class="w"> </span><span class="n">mlflowClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MlflowClient</span><span class="p">();</span>
<span class="c1">// Get the model URI for a registered model version.</span>
<span class="n">String</span><span class="w"> </span><span class="n">modelURI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mlflowClient</span><span class="p">.</span><span class="na">getModelVersionDownloadUri</span><span class="p">(</span><span class="n">modelName</span><span class="p">,</span><span class="w"> </span><span class="n">modelVersion</span><span class="p">);</span>

<span class="c1">// Or download the model artifacts directly.</span>
<span class="n">File</span><span class="w"> </span><span class="n">modelFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mlflowClient</span><span class="p">.</span><span class="na">downloadModelVersion</span><span class="p">(</span><span class="n">modelName</span><span class="p">,</span><span class="w"> </span><span class="n">modelVersion</span><span class="p">);</span>
</pre></div>
</div>
<p><a class="reference external" href="https://www.mlflow.org/docs/latest/cli.html#mlflow-artifacts-download">CLI command</a> example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mlflow</span> <span class="n">artifacts</span> <span class="n">download</span> <span class="o">--</span><span class="n">artifact</span><span class="o">-</span><span class="n">uri</span> <span class="n">models</span><span class="p">:</span><span class="o">/&lt;</span><span class="n">name</span><span class="o">&gt;/&lt;</span><span class="n">version</span><span class="o">|</span><span class="n">stage</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="deploy-models-for-online-serving">
<h2>Deploy models for online serving<a class="headerlink" href="#deploy-models-for-online-serving" title="Permalink to this headline"> </a></h2>
<p>You can use <a class="reference internal" href="../machine-learning/model-serving/index.html"><span class="doc">Model Serving</span></a> to host machine learning models from the Model Registry as REST endpoints. These endpoints are updated automatically based on the availability of model versions and their stages.</p>
<p>You can also deploy a model to third-party serving frameworks using <a class="reference external" href="https://mlflow.org/docs/latest/models.html#built-in-deployment-tools">MLflow’s built-in deployment tools</a>.</p>
<p>See the following examples:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="scikit-learn-model-deployment-on-sagemaker.html">scikit-learn model deployment on SageMaker</a></li>
<li class="toctree-l1"><a class="reference internal" href="mleap-model-deployment-on-sagemaker.html">MLeap model deployment on SageMaker</a></li>
</ul>
</div>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../_static/js/localized.js"></script>
  <script type="text/javascript" src="../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>