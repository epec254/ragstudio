

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Understand and learn how to use Databricks Utilities to work with object storage, to chain and parameterize notebooks, and to work with secrets." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="(Legacy) Library utility (dbutils.library)">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>(Legacy) Library utility (dbutils.library) &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/archive/dev-tools/dbutils-library.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/archive/dev-tools/dbutils-library.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/archive/dev-tools/dbutils-library.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="top" title="Databricks on AWS" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../../en/archive/dev-tools/dbutils-library.html" class="notranslate">English</option>
    <option value="../../../ja/archive/dev-tools/dbutils-library.html" class="notranslate">日本語</option>
    <option value="../../../pt/archive/dev-tools/dbutils-library.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>(Legacy) Library utility (dbutils.library)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="legacy-library-utility-dbutilslibrary">
<h1>(Legacy) Library utility (dbutils.library)<a class="headerlink" href="#legacy-library-utility-dbutilslibrary" title="Permalink to this headline"> </a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">dbutils.library.install</span></code> and <code class="docutils literal notranslate"><span class="pre">dbutils.library.installPyPI</span></code> APIs are removed in Databricks Runtime 11.0 and above. Most library utility commands are deprecated. Most library utilities are not available on Databricks Runtime ML. For information on <code class="docutils literal notranslate"><span class="pre">dbutils.library.restartPython</span></code>, see <a class="reference internal" href="../../libraries/restart-python-process.html"><span class="doc">Restart the Python process on Databricks</span></a>.</p>
<p>This documentation has been retired and might not be updated. The products, services, or technologies mentioned in this content are no longer supported.</p>
<p>Databricks strongly recommends using <code class="docutils literal notranslate"><span class="pre">%pip</span></code> magic commands to install notebook-scoped libraries. See <a class="reference internal" href="../../libraries/notebooks-python-libraries.html"><span class="doc">Notebook-scoped Python libraries</span></a>.</p>
</div>
<p>For full documentation for Databricks utilities functionality, see <a class="reference internal" href="../../dev-tools/databricks-utils.html"><span class="doc">Databricks Utilities (dbutils) reference</span></a>.</p>
<p><strong>Commands</strong>: <a class="reference internal" href="#dbutils-library-install"><span class="std std-ref">install</span></a>, <a class="reference internal" href="#dbutils-library-installpypi"><span class="std std-ref">installPyPI</span></a>, <a class="reference internal" href="#dbutils-library-list"><span class="std std-ref">list</span></a>, <a class="reference internal" href="../../libraries/restart-python-process.html"><span class="doc">restartPython</span></a>), <a class="reference internal" href="#dbutils-library-updatecondaenv"><span class="std std-ref">updateCondaEnv</span></a></p>
<p>The library utility allows you to install Python libraries and create an environment scoped to a notebook session. The libraries are available both on the driver and on the executors, so you can reference them in user defined functions. This enables:</p>
<ul class="simple">
<li><p>Library dependencies of a notebook to be organized within the notebook itself.</p></li>
<li><p>Notebook users with different library dependencies to share a cluster without interference.</p></li>
</ul>
<p>Detaching a notebook destroys this environment. However, you can recreate it by re-running the library <code class="docutils literal notranslate"><span class="pre">install</span></code> API commands in the notebook. See the <code class="docutils literal notranslate"><span class="pre">restartPython</span></code> API for how you can reset your notebook state without losing your environment.</p>
<p>Library utilities are enabled by default. Therefore, by default the Python environment for each notebook is isolated by using a separate Python executable that is created when the notebook is attached to and inherits the default Python environment on the cluster. Libraries installed through an <a class="reference internal" href="../../init-scripts/index.html"><span class="doc">init script</span></a> into the Databricks Python environment are still available. You can disable this feature by setting <code class="docutils literal notranslate"><span class="pre">spark.databricks.libraryIsolation.enabled</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>This API is compatible with the existing cluster-wide library installation through the <a class="reference internal" href="../../libraries/index.html"><span class="doc">UI</span></a> and <a class="reference external" href="https://docs.databricks.com/api/workspace/libraries">Libraries API</a>. Libraries installed through this API have <em>higher</em> priority than cluster-wide libraries.</p>
<p>To list the available commands, run <code class="docutils literal notranslate"><span class="pre">dbutils.library.help()</span></code>.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>install(path: String): boolean -&gt; Install the library within the current notebook session
installPyPI(pypiPackage: String, version: String = &quot;&quot;, repo: String = &quot;&quot;, extras: String = &quot;&quot;): boolean -&gt; Install the PyPI library within the current notebook session
list: List -&gt; List the isolated libraries added for the current notebook session via dbutils
restartPython: void -&gt; Restart python process for the current notebook session
updateCondaEnv(envYmlContent: String): boolean -&gt; Update the current notebook&#39;s Conda environment based on the specification (content of environment
</pre></div>
</div>
<div class="section" id="install-command-dbutilslibraryinstall">
<span id="dbutils-library-install"></span><h2>install command (dbutils.library.install)<a class="headerlink" href="#install-command-dbutilslibraryinstall" title="Permalink to this headline"> </a></h2>
<p>Given a path to a library, installs that library within the current notebook session. Libraries installed by calling this command are available only to the current notebook.</p>
<p>To display help for this command, run <code class="docutils literal notranslate"><span class="pre">dbutils.library.help(&quot;install&quot;)</span></code>.</p>
<p>This example installs a <code class="docutils literal notranslate"><span class="pre">.egg</span></code> or <code class="docutils literal notranslate"><span class="pre">.whl</span></code> library within a notebook.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><code class="docutils literal notranslate"><span class="pre">dbutils.library.install</span></code> is removed in Databricks Runtime 11.0 and above.</p>
<p>Databricks recommends that you put all your library install commands in the first cell of your notebook and call <code class="docutils literal notranslate"><span class="pre">restartPython</span></code> at the end of that cell. The Python notebook state is reset after running <code class="docutils literal notranslate"><span class="pre">restartPython</span></code>; the notebook loses all state including but not limited to local variables, imported libraries, and other ephemeral states. Therefore, we recommend that you install libraries and reset the notebook state in the <em>first</em> notebook cell.</p>
</div>
<p>The accepted library sources are <code class="docutils literal notranslate"><span class="pre">dbfs</span></code> and <code class="docutils literal notranslate"><span class="pre">s3</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;dbfs:/path/to/your/library.egg&quot;</span><span class="p">)</span>
<span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">restartPython</span><span class="p">()</span> <span class="c1"># Removes Python state, but some libraries might not work without calling this  command.</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s2">&quot;dbfs:/path/to/your/library.whl&quot;</span><span class="p">)</span>
<span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">restartPython</span><span class="p">()</span> <span class="c1"># Removes Python state, but some libraries might not work without calling this command.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can directly install custom wheel files using <code class="docutils literal notranslate"><span class="pre">%pip</span></code>. In the following example we are assuming you have uploaded your library wheel file to DBFS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">pip</span> <span class="n">install</span> <span class="o">/</span><span class="n">dbfs</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">your</span><span class="o">/</span><span class="n">library</span><span class="o">.</span><span class="n">whl</span>
</pre></div>
</div>
<p>Egg files are not supported by pip, and wheel is considered the standard for build and binary packaging for Python. See <a class="reference external" href="https://packaging.python.org/discussions/wheel-vs-egg/">Wheel vs Egg</a> for more details. However, if you want to use an egg file in a way that’s compatible with <code class="docutils literal notranslate"><span class="pre">%pip</span></code>, you can use the following workaround:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># This step is only needed if no %pip commands have been run yet.</span>
<span class="c1"># It will trigger setting up the isolated notebook environment</span>
<span class="o">%</span><span class="n">pip</span> <span class="n">install</span> <span class="o">&lt;</span><span class="nb">any</span><span class="o">-</span><span class="n">lib</span><span class="o">&gt;</span>  <span class="c1"># This doesn&#39;t need to be a real library; for example &quot;%pip install any-lib&quot; would work</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="c1"># Assuming the preceding step was completed, the following command</span>
<span class="c1"># adds the egg file to the current notebook environment</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;/local/path/to/library.egg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="installpypi-command-dbutilslibraryinstallpypi">
<span id="dbutils-library-installpypi"></span><h2>installPyPI command (dbutils.library.installPyPI)<a class="headerlink" href="#installpypi-command-dbutilslibraryinstallpypi" title="Permalink to this headline"> </a></h2>
<p>Given a Python Package Index (PyPI) package, install that package within the current notebook session. Libraries installed by calling this command are isolated among notebooks.</p>
<p>To display help for this command, run <code class="docutils literal notranslate"><span class="pre">dbutils.library.help(&quot;installPyPI&quot;)</span></code>.</p>
<p>This example installs a PyPI package in a notebook. <code class="docutils literal notranslate"><span class="pre">version</span></code>, <code class="docutils literal notranslate"><span class="pre">repo</span></code>, and <code class="docutils literal notranslate"><span class="pre">extras</span></code> are optional. Use the <code class="docutils literal notranslate"><span class="pre">extras</span></code> argument to specify the <a class="reference external" href="https://setuptools.readthedocs.io/en/latest/setuptools.html#declaring-extras-optional-features-with-their-own-dependencies">Extras feature</a> (extra requirements).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">installPyPI</span><span class="p">(</span><span class="s2">&quot;pypipackage&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="n">repo</span><span class="o">=</span><span class="s2">&quot;repo&quot;</span><span class="p">,</span> <span class="n">extras</span><span class="o">=</span><span class="s2">&quot;extras&quot;</span><span class="p">)</span>
<span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">restartPython</span><span class="p">()</span>  <span class="c1"># Removes Python state, but some libraries might not work without calling this command.</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><code class="docutils literal notranslate"><span class="pre">dbutils.library.installPyPI</span></code> is removed in Databricks Runtime 11.0 and above.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">version</span></code> and <code class="docutils literal notranslate"><span class="pre">extras</span></code> keys cannot be part of the PyPI package string. For example: <code class="docutils literal notranslate"><span class="pre">dbutils.library.installPyPI(&quot;azureml-sdk[databricks]==1.19.0&quot;)</span></code> is not valid. Use the <code class="docutils literal notranslate"><span class="pre">version</span></code> and <code class="docutils literal notranslate"><span class="pre">extras</span></code> arguments to specify the version and extras information as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">installPyPI</span><span class="p">(</span><span class="s2">&quot;azureml-sdk&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;1.19.0&quot;</span><span class="p">,</span> <span class="n">extras</span><span class="o">=</span><span class="s2">&quot;databricks&quot;</span><span class="p">)</span>
<span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">restartPython</span><span class="p">()</span>  <span class="c1"># Removes Python state, but some libraries might not work without calling this command.</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When replacing <code class="docutils literal notranslate"><span class="pre">dbutils.library.installPyPI</span></code> commands with <code class="docutils literal notranslate"><span class="pre">%pip</span></code> commands, the Python interpreter is automatically restarted. You can run the install command as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">pip</span> <span class="n">install</span> <span class="n">azureml</span><span class="o">-</span><span class="n">sdk</span><span class="p">[</span><span class="n">databricks</span><span class="p">]</span><span class="o">==</span><span class="mf">1.19.0</span>
</pre></div>
</div>
</div>
<p>This example specifies library requirements in one notebook and installs them by using <code class="docutils literal notranslate"><span class="pre">%run</span></code> in the other. To do this, first define the libraries to install in a notebook. This example uses a notebook named <code class="docutils literal notranslate"><span class="pre">InstallDependencies</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">installPyPI</span><span class="p">(</span><span class="s2">&quot;torch&quot;</span><span class="p">)</span>
<span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">installPyPI</span><span class="p">(</span><span class="s2">&quot;scikit-learn&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;1.19.1&quot;</span><span class="p">)</span>
<span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">installPyPI</span><span class="p">(</span><span class="s2">&quot;azureml-sdk&quot;</span><span class="p">,</span> <span class="n">extras</span><span class="o">=</span><span class="s2">&quot;databricks&quot;</span><span class="p">)</span>
<span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">restartPython</span><span class="p">()</span> <span class="c1"># Removes Python state, but some libraries might not work without calling this command.</span>
</pre></div>
</div>
<p>Then install them in the notebook that needs those dependencies.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>%run<span class="w"> </span>/path/to/InstallDependencies<span class="w"> </span><span class="c1"># Install the dependencies in the first cell.</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">torch</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span>
<span class="kn">import</span> <span class="nn">azureml</span>
<span class="o">...</span>
</pre></div>
</div>
<p>This example resets the Python notebook state while maintaining the environment. This technique is available only in Python notebooks. For example, you can use this technique to reload libraries Databricks preinstalled with a different version:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">installPyPI</span><span class="p">(</span><span class="s2">&quot;numpy&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;1.15.4&quot;</span><span class="p">)</span>
<span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">restartPython</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make sure you start using the library in another cell.</span>
<span class="kn">import</span> <span class="nn">numpy</span>
</pre></div>
</div>
<p>You can also use this technique to install libraries such as tensorflow that need to be loaded on process start up:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">installPyPI</span><span class="p">(</span><span class="s2">&quot;tensorflow&quot;</span><span class="p">)</span>
<span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">restartPython</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use the library in another cell.</span>
<span class="kn">import</span> <span class="nn">tensorflow</span>
</pre></div>
</div>
</div>
<div class="section" id="list-command-dbutilslibrarylist">
<span id="dbutils-library-list"></span><h2>list command (dbutils.library.list)<a class="headerlink" href="#list-command-dbutilslibrarylist" title="Permalink to this headline"> </a></h2>
<p>Lists the isolated libraries added for the current notebook session through the library utility. This does not include libraries that are attached to the cluster.</p>
<p>To display help for this command, run <code class="docutils literal notranslate"><span class="pre">dbutils.library.help(&quot;list&quot;)</span></code>.</p>
<p>This example lists the libraries installed in a notebook.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The equivalent of this command using <code class="docutils literal notranslate"><span class="pre">%pip</span></code> is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">pip</span> <span class="n">freeze</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="updatecondaenv-command-dbutilslibraryupdatecondaenv">
<span id="dbutils-library-updatecondaenv"></span><h2>updateCondaEnv command (dbutils.library.updateCondaEnv)<a class="headerlink" href="#updatecondaenv-command-dbutilslibraryupdatecondaenv" title="Permalink to this headline"> </a></h2>
<p>Updates the current notebook’s Conda environment based on the contents of <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code>. This method is supported only for Databricks Runtime on Conda.</p>
<p>To display help for this command, run <code class="docutils literal notranslate"><span class="pre">dbutils.library.help(&quot;updateCondaEnv&quot;)</span></code>.</p>
<p>This example updates the current notebook’s Conda environment based on the contents of the provided specification.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dbutils</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">updateCondaEnv</span><span class="p">(</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">channels:</span>
<span class="sd">  - anaconda</span>
<span class="sd">dependencies:</span>
<span class="sd">  - gensim=3.4</span>
<span class="sd">  - nltk=3.4</span>
<span class="sd">&quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../../_static/js/localized.js"></script>
  <script type="text/javascript" src="../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>