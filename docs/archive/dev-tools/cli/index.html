

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to install and configure your environment to run the Databricks command-line interface (Databricks CLI)." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Databricks CLI (legacy)">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Databricks CLI (legacy) &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/archive/dev-tools/cli/index.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/archive/dev-tools/cli/index.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/archive/dev-tools/cli/index.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../../../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../../../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../../../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../../../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../../../genindex.html" />
  <link rel="search" title="Search" href="../../../search.html" />
  <link rel="top" title="Databricks on AWS" href="../../../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../../../en/archive/dev-tools/cli/index.html" class="notranslate">English</option>
    <option value="../../../../ja/archive/dev-tools/cli/index.html" class="notranslate">日本語</option>
    <option value="../../../../pt/archive/dev-tools/cli/index.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Databricks CLI (legacy)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="databricks-cli-legacy">
<h1>Databricks CLI (legacy)<a class="headerlink" href="#databricks-cli-legacy" title="Permalink to this headline"> </a></h1>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This documentation has been retired and might not be updated.</p>
<p>Databricks recommends that you use Databricks CLI version 0.205 or above instead of the legacy Databricks CLI version 0.18 or below. Databricks CLI version 0.18 or below is not supported by Databricks. For information about Databricks CLI versions 0.205 and above, see <a class="reference internal" href="../../../dev-tools/cli/index.html"><span class="doc">What is the Databricks CLI?</span></a>.</p>
<p>To migrate from Databricks CLI version 0.18 or below to Databricks CLI version 0.205 or above, see <a class="reference internal" href="../../../dev-tools/cli/migrate.html"><span class="doc">Databricks CLI migration</span></a>.</p>
<p>The legacy Databricks CLI is in an <a class="reference internal" href="../../../release-notes/release-types.html"><span class="doc">Experimental</span></a> state. Databricks plans no new feature work for the legacy Databricks CLI at this time.</p>
<p>The legacy Databricks CLI is not supported through Databricks Support channels. To provide feedback, ask questions, and report issues, use the <a class="reference external" href="https://github.com/databricks/databricks-cli/issues">Issues</a> tab in the Command Line Interface for Databricks repository in GitHub.</p>
</div>
<p>The legacy Databricks command-line interface (also known as the legacy Databricks CLI) is a utility that provides an easy-to-use interface to automate the Databricks platform from your terminal, command prompt, or automation scripts.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li><p>Python 3 - 3.6 and above</p></li>
<li><p>Python 2 - 2.7.9 and above</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>On macOS, the default Python 2 installation does not implement the TLSv1_2 protocol, and running the legacy Databricks CLI with this Python installation results in the error: <code class="docutils literal notranslate"><span class="pre">AttributeError:</span> <span class="pre">'module'</span> <span class="pre">object</span> <span class="pre">has</span> <span class="pre">no</span> <span class="pre">attribute</span> <span class="pre">'PROTOCOL_TLSv1_2'</span></code>. Use <a class="reference external" href="https://brew.sh">Homebrew</a> to install a version of Python that has <code class="docutils literal notranslate"><span class="pre">ssl.PROTOCOL_TLSv1_2</span></code>.</p>
</div>
</div>
<div class="section" id="set-up-the-cli">
<span id="set-up"></span><h2>Set up the CLI<a class="headerlink" href="#set-up-the-cli" title="Permalink to this headline"> </a></h2>
<p>This section describes how to set up the legacy Databricks CLI.</p>
<div class="section" id="install-or-update-the-cli">
<h3>Install or update the CLI<a class="headerlink" href="#install-or-update-the-cli" title="Permalink to this headline"> </a></h3>
<p>This section describes how to install or update your development machine to run the legacy Databricks CLI.</p>
<div class="section" id="install-the-cli">
<h4>Install the CLI<a class="headerlink" href="#install-the-cli" title="Permalink to this headline"> </a></h4>
<p>Run <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">databricks-cli</span></code> by using the appropriate version of <code class="docutils literal notranslate"><span class="pre">pip</span></code> for your Python installation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>databricks-cli
</pre></div>
</div>
</div>
<div class="section" id="update-the-cli">
<h4>Update the CLI<a class="headerlink" href="#update-the-cli" title="Permalink to this headline"> </a></h4>
<p>Run <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">databricks-cli</span> <span class="pre">--upgrade</span></code> by using the appropriate version of <code class="docutils literal notranslate"><span class="pre">pip</span></code> for your Python installation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>databricks-cli<span class="w"> </span>--upgrade
</pre></div>
</div>
<p>To list the version of the legacy Databricks CLI that is currently installed, run <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">--version</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>databricks<span class="w"> </span>--version
</pre></div>
</div>
</div>
</div>
<div class="section" id="set-up-authentication">
<span id="cli-auth"></span><h3>Set up authentication<a class="headerlink" href="#set-up-authentication" title="Permalink to this headline"> </a></h3>
<p>Before you can run legacy Databricks CLI commands, you must set up authentication between the legacy Databricks CLI and Databricks. This section describes how to set up authentication for the legacy Databricks CLI.</p>
<p id="cli-auth-databricks">To authenticate with the legacy Databricks CLI, you can use a <a class="reference internal" href="../../../dev-tools/auth/pat.html"><span class="doc">Databricks personal access token</span></a>. A Databricks username and password are also supported but not recommended.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a security best practice when you authenticate with automated tools, systems, scripts, and apps, Databricks recommends that you use OAuth tokens.</p>
<p>If you use personal access token authentication, Databricks recommends using personal access tokens belonging to <a class="reference internal" href="../../../administration-guide/users-groups/service-principals.html"><span class="doc">service principals</span></a> instead of workspace users. To create tokens for service principals, see <a class="reference internal" href="../../../administration-guide/users-groups/service-principals.html#personal-access-tokens"><span class="std std-ref">Manage tokens for a service principal</span></a>.</p>
</div>
<div class="section" id="set-up-authentication-using-a-databricks-personal-access-token">
<h4>Set up authentication using a Databricks personal access token<a class="headerlink" href="#set-up-authentication-using-a-databricks-personal-access-token" title="Permalink to this headline"> </a></h4>
<p>To configure the legacy Databricks CLI to use a personal access token, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>databricks<span class="w"> </span>configure<span class="w"> </span>--token
</pre></div>
</div>
<p>The command begins by issuing the prompt:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Databricks Host (should begin with https://):</span>
</pre></div>
</div>
<p>Enter your workspace URL, with the format <code class="docutils literal notranslate"><span class="pre">https://&lt;instance-name&gt;.cloud.databricks.com</span></code>. To get your workspace URL, see <a class="reference internal" href="../../../workspace/workspace-details.html#workspace-url"><span class="std std-ref">Workspace instance names, URLs, and IDs</span></a>.</p>
<p>The command continues by issuing the prompt to enter your personal access token:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Token:</span>
</pre></div>
</div>
<p>After you complete the prompts, your access credentials are stored in the file <code class="docutils literal notranslate"><span class="pre">~/.databrickscfg</span></code> on Linux or macOS, or <code class="docutils literal notranslate"><span class="pre">%USERPROFILE%\.databrickscfg</span></code> on Windows. The file contains a default profile entry:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[DEFAULT]</span>
<span class="go">host = &lt;workspace-URL&gt;</span>
<span class="go">token = &lt;personal-access-token&gt;</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file already exists, that file’s <code class="docutils literal notranslate"><span class="pre">DEFAULT</span></code> configuration profile is overwritten with the new data. To create a configuration profile with a different name instead, see <a class="reference internal" href="#cli-profile"><span class="std std-ref">Connection profiles</span></a>.</p>
<p>For CLI 0.8.1 and above, you can change the path of this file by setting the environment variable <code class="docutils literal notranslate"><span class="pre">DATABRICKS_CONFIG_FILE</span></code>.</p>
<div class="js-code-language-tabs compound">
<div class="compound-first compound" lang="Linux&amp;nbsp;or&amp;nbsp;macOS">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">DATABRICKS_CONFIG_FILE</span><span class="o">=</span>&lt;path-to-file&gt;
</pre></div>
</div>
</div>
<div class="compound-last compound" lang="Windows">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>setx<span class="w"> </span>DATABRICKS_CONFIG_FILE<span class="w"> </span><span class="s2">&quot;&lt;path-to-file&gt;&quot;</span><span class="w"> </span>/M
</pre></div>
</div>
</div>
</div>
<p>Although not recommended, it is possible to use your Databricks username and password instead of a Databricks personal access token to authenticate. Run <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">configure</span></code> and follow the prompts. The <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file contains a default profile entry:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[DEFAULT]</span>
<span class="go">host = &lt;workspace-URL&gt;</span>
<span class="go">username = &lt;username&gt;</span>
<span class="go">password = &lt;password&gt;</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Beginning with CLI 0.17.2, the CLI does not work with a <a class="reference external" href="https://everything.curl.dev/usingcurl/netrc">.netrc file</a>. You can have a <code class="docutils literal notranslate"><span class="pre">.netrc</span></code> file in your environment for other purposes, but the CLI will not use that <code class="docutils literal notranslate"><span class="pre">.netrc</span></code> file.</p>
</div>
<p>CLI 0.8.0 and above supports the following Databricks environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_HOST</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_USERNAME</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_PASSWORD</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_TOKEN</span></code></p></li>
</ul>
<p>An environment variable setting takes precedence over the setting in the configuration file.</p>
</div>
</div>
<div class="section" id="test-your-authentication-setup">
<h3>Test your authentication setup<a class="headerlink" href="#test-your-authentication-setup" title="Permalink to this headline"> </a></h3>
<p>To check whether you set up authentication correctly, you can run a command such as the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>databricks<span class="w"> </span>fs<span class="w"> </span>ls<span class="w"> </span>dbfs:/
</pre></div>
</div>
<p>If successful, this command <a class="reference internal" href="dbfs-cli.html#list-information-about-files-and-directories"><span class="std std-ref">lists the files and directories in the DBFS root of the workspace</span></a> that is associated with your <code class="docutils literal notranslate"><span class="pre">DEFAULT</span></code> profile.</p>
</div>
</div>
<div class="section" id="connection-profiles">
<span id="cli-profile"></span><h2>Connection profiles<a class="headerlink" href="#connection-profiles" title="Permalink to this headline"> </a></h2>
<p>The legacy Databricks CLI configuration supports multiple connection profiles. The same installation of
legacy Databricks CLI can be used to make API calls on multiple Databricks workspaces.</p>
<p>To add a connection profile, specify a unique name for the profile:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>databricks<span class="w"> </span>configure<span class="w"> </span>--token<span class="w"> </span>--profile<span class="w"> </span>&lt;profile-name&gt;
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file contains a corresponding profile entry:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[&lt;profile-name&gt;]</span>
<span class="go">host = &lt;workspace-URL&gt;</span>
<span class="go">token = &lt;token&gt;</span>
</pre></div>
</div>
<p>To use the connection profile:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>databricks<span class="w"> </span>&lt;group&gt;<span class="w"> </span>&lt;command&gt;<span class="w"> </span>--profile<span class="w"> </span>&lt;profile-name&gt;
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">--profile</span> <span class="pre">&lt;profile-name&gt;</span></code> is not specified, the default profile is used. If a default profile is not found, you are prompted to configure the CLI with a default profile.</p>
<div class="section" id="test-your-connection-profiles">
<h3>Test your connection profiles<a class="headerlink" href="#test-your-connection-profiles" title="Permalink to this headline"> </a></h3>
<p>To check whether you set up any connection profiles correctly, you can run a command such as the following with one of your connection profile names:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>databricks<span class="w"> </span>fs<span class="w"> </span>ls<span class="w"> </span>dbfs:/<span class="w"> </span>--profile<span class="w"> </span>&lt;profile-name&gt;
</pre></div>
</div>
<p>If successful, this command <a class="reference internal" href="dbfs-cli.html#list-information-about-files-and-directories"><span class="std std-ref">lists the files and directories in the DBFS root of the workspace</span></a> for the specified connection profile. Run this command for each connection profile that you want to test.</p>
<p>To view your available profiles, see your <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file.</p>
</div>
</div>
<div class="section" id="use-the-cli">
<h2>Use the CLI<a class="headerlink" href="#use-the-cli" title="Permalink to this headline"> </a></h2>
<p>This section shows you how to get legacy Databricks CLI help, parse legacy Databricks CLI output, and invoke commands in each command group.</p>
<div class="section" id="display-cli-command-group-help">
<h3>Display CLI command group help<a class="headerlink" href="#display-cli-command-group-help" title="Permalink to this headline"> </a></h3>
<p>You list the subcommands for any command group by using the <code class="docutils literal notranslate"><span class="pre">--help</span></code> or <code class="docutils literal notranslate"><span class="pre">-h</span></code> option. For example, to list the DBFS CLI subcommands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>databricks<span class="w"> </span>fs<span class="w"> </span>-h
</pre></div>
</div>
</div>
<div class="section" id="display-cli-subcommand-help">
<h3>Display CLI subcommand help<a class="headerlink" href="#display-cli-subcommand-help" title="Permalink to this headline"> </a></h3>
<p>You list the help for a subcommand by using the <code class="docutils literal notranslate"><span class="pre">--help</span></code> or <code class="docutils literal notranslate"><span class="pre">-h</span></code> option. For example, to list the help for the DBFS copy files subcommand:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>databricks<span class="w"> </span>fs<span class="w"> </span>cp<span class="w"> </span>-h
</pre></div>
</div>
</div>
<div class="section" id="alias-command-groups">
<span id="alias_databricks_cli"></span><h3>Alias command groups<a class="headerlink" href="#alias-command-groups" title="Permalink to this headline"> </a></h3>
<p>Sometimes it can be inconvenient to prefix each legacy Databricks CLI invocation with the name of a command group, for example
<code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">workspace</span> <span class="pre">ls</span></code> in the legacy Databricks CLI. To make the legacy Databricks CLI easier to use, you can alias command groups to shorter commands.
For example, to shorten <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">workspace</span> <span class="pre">ls</span></code> to <code class="docutils literal notranslate"><span class="pre">dw</span> <span class="pre">ls</span></code> in the
Bourne again shell, you can add <code class="docutils literal notranslate"><span class="pre">alias</span> <span class="pre">dw=&quot;databricks</span> <span class="pre">workspace&quot;</span></code> to the appropriate bash profile. Typically,
this file is located at <code class="docutils literal notranslate"><span class="pre">~/.bash_profile</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The legacy Databricks CLI already aliases <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">fs</span></code> to <code class="docutils literal notranslate"><span class="pre">dbfs</span></code>; <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">fs</span> <span class="pre">ls</span></code> and <code class="docutils literal notranslate"><span class="pre">dbfs</span> <span class="pre">ls</span></code> are equivalent.</p>
</div>
</div>
<div class="section" id="use-jq-to-parse-cli-output">
<span id="jq"></span><h3>Use <code class="docutils literal notranslate"><span class="pre">jq</span></code> to parse CLI output<a class="headerlink" href="#use-jq-to-parse-cli-output" title="Permalink to this headline"> </a></h3>
<p>Some legacy Databricks CLI commands output the JSON response from the API endpoint. Sometimes it can be
useful to parse out parts of the JSON to pipe into other commands. For example, to copy a job
definition, you must take the <code class="docutils literal notranslate"><span class="pre">settings</span></code> field of a get job command and use that as an argument
to the create job command. In these cases, we recommend you to use the utility <code class="docutils literal notranslate"><span class="pre">jq</span></code>.</p>
<p>For example, the following command prints the settings of the job with the ID of 233.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>databricks<span class="w"> </span><span class="nb">jobs</span><span class="w"> </span>list<span class="w"> </span>--output<span class="w"> </span>JSON<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;.jobs[] | select(.job_id == 233) | .settings&#39;</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">{</span>
<span class="go">  &quot;name&quot;: &quot;Quickstart&quot;,</span>
<span class="go">  &quot;new_cluster&quot;: {</span>
<span class="go">    &quot;spark_version&quot;: &quot;7.5.x-scala2.12&quot;,</span>
<span class="go">    &quot;spark_env_vars&quot;: {</span>
<span class="go">      &quot;PYSPARK_PYTHON&quot;: &quot;/databricks/python3/bin/python3&quot;</span>
<span class="go">    },</span>
<span class="go">    &quot;num_workers&quot;: 8,</span>
<span class="go">    ...</span>
<span class="go">  },</span>
<span class="go">  &quot;email_notifications&quot;: {},</span>
<span class="go">  &quot;timeout_seconds&quot;: 0,</span>
<span class="go">  &quot;notebook_task&quot;: {</span>
<span class="go">    &quot;notebook_path&quot;: &quot;/Quickstart&quot;</span>
<span class="go">  },</span>
<span class="go">  &quot;max_concurrent_runs&quot;: 1</span>
<span class="go">}</span>
</pre></div>
</div>
<p>As another example, the following command prints only the names and IDs of all available clusters in the workspace:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>databricks<span class="w"> </span>clusters<span class="w"> </span>list<span class="w"> </span>--output<span class="w"> </span>JSON<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;[ .clusters[] | { name: .cluster_name, id: .cluster_id } ]&#39;</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[</span>
<span class="go">  {</span>
<span class="go">    &quot;name&quot;: &quot;My Cluster 1&quot;,</span>
<span class="go">    &quot;id&quot;: &quot;1234-567890-grip123&quot;</span>
<span class="go">  },</span>
<span class="go">  {</span>
<span class="go">    &quot;name&quot;: &quot;My Cluster 2&quot;,</span>
<span class="go">    &quot;id&quot;: &quot;2345-678901-patch234&quot;</span>
<span class="go">  }</span>
<span class="go">]</span>
</pre></div>
</div>
<p>You can install <code class="docutils literal notranslate"><span class="pre">jq</span></code> for example on macOS by using Homebrew with <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">jq</span></code> or on Windows by using Chocolatey with <code class="docutils literal notranslate"><span class="pre">choco</span> <span class="pre">install</span> <span class="pre">jq</span></code>. For more information on <code class="docutils literal notranslate"><span class="pre">jq</span></code>, see the <a class="reference external" href="https://stedolan.github.io/jq/manual/">jq Manual</a>.</p>
</div>
<div class="section" id="json-string-parameters">
<h3>JSON string parameters<a class="headerlink" href="#json-string-parameters" title="Permalink to this headline"> </a></h3>
<p>String parameters are handled differently depending on your operating system:</p>
<div class="js-code-language-tabs compound">
<div class="compound-first compound" lang="Linux&amp;nbsp;or&amp;nbsp;macOS">
<p class="compound-first">You must enclose JSON string parameters in single quotes. For example:</p>
<div class="compound-last highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;[&quot;20180505&quot;, &quot;alantest&quot;]&#39;</span>
</pre></div>
</div>
</div>
<div class="compound-last compound" lang="Windows">
<p class="compound-first">You must enclose JSON string parameters in double quotes, and the quote characters inside the string must be preceded by <code class="docutils literal notranslate"><span class="pre">\</span></code>. For example:</p>
<div class="compound-last highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;[\&quot;20180505\&quot;, \&quot;alantest\&quot;]&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline"> </a></h2>
<p>The following sections provide tips for troubleshooting common issues with the legacy Databricks CLI.</p>
<div class="section" id="using-eof-with-databricks-configure-does-not-work">
<h3>Using EOF with <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">configure</span></code> does not work<a class="headerlink" href="#using-eof-with-databricks-configure-does-not-work" title="Permalink to this headline"> </a></h3>
<p>For Databricks CLI 0.12.0 and above, using the end of file (<code class="docutils literal notranslate"><span class="pre">EOF</span></code>) sequence in a script to pass parameters to the <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">configure</span></code> command does not work. For example, the following script causes Databricks CLI to ignore the parameters, and no error message is thrown:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Do not do this.</span>
<span class="nv">databricksUrl</span><span class="o">=</span>&lt;workspace-url&gt;
<span class="nv">databricksToken</span><span class="o">=</span>&lt;personal-access-token&gt;

databricks<span class="w"> </span>configure<span class="w"> </span>--token<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<span class="s">$databricksUrl</span>
<span class="s">$databricksToken</span>
<span class="s">EOF</span>
</pre></div>
</div>
<p>To fix this issue, do one of the following:</p>
<ul class="simple">
<li><p>Use one of the other programmatic configuration options as described in <a class="reference internal" href="#cli-auth"><span class="std std-ref">Set up authentication</span></a>.</p></li>
<li><p>Manually add the <code class="docutils literal notranslate"><span class="pre">host</span></code> and <code class="docutils literal notranslate"><span class="pre">token</span></code> values to the <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file as described in <a class="reference internal" href="#cli-auth"><span class="std std-ref">Set up authentication</span></a>.</p></li>
<li><p>Downgrade your installation of the Databricks CLI to 0.11.0 or below, and run your script again.</p></li>
</ul>
</div>
</div>
<div class="section" id="cli-commands">
<h2>CLI commands<a class="headerlink" href="#cli-commands" title="Permalink to this headline"> </a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="cluster-policies-cli.html">Cluster Policies CLI (legacy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="clusters-cli.html">Clusters CLI (legacy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="dbfs-cli.html">DBFS CLI (legacy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="dlt-cli.html">Delta Live Tables CLI (legacy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups-cli.html">Groups CLI (legacy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="instance-pools-cli.html">Instance Pools CLI  (legacy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="jobs-cli.html">Jobs CLI (legacy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="libraries-cli.html">Libraries CLI (legacy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="repos-cli.html">Repos CLI (legacy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="runs-cli.html">Runs CLI (legacy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="secrets-cli.html">Secrets CLI (legacy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="stack-cli.html">Stack CLI (legacy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tokens-cli.html">Tokens CLI (legacy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="unity-catalog-cli.html">Unity Catalog CLI (legacy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="workspace-cli.html">Workspace CLI (legacy)</a></li>
</ul>
</div>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../../../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../../../_static/js/localized.js"></script>
  <script type="text/javascript" src="../../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../../../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>