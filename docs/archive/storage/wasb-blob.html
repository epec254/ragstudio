

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to configure Databricks to use the legacy WASB driver to read and write data stored on Blob Storage." name="description" />
<meta content="noindex" name="robots" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Connect to Azure Blob Storage with WASB (legacy)">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Connect to Azure Blob Storage with WASB (legacy) &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/archive/storage/wasb-blob.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/archive/storage/wasb-blob.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/archive/storage/wasb-blob.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="top" title="Databricks on AWS" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../../en/archive/storage/wasb-blob.html" class="notranslate">English</option>
    <option value="../../../ja/archive/storage/wasb-blob.html" class="notranslate">日本語</option>
    <option value="../../../pt/archive/storage/wasb-blob.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Connect to Azure Blob Storage with WASB (legacy)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="connect-to-azure-blob-storage-with-wasb-legacy">
<h1>Connect to Azure Blob Storage with WASB (legacy)<a class="headerlink" href="#connect-to-azure-blob-storage-with-wasb-legacy" title="Permalink to this headline"> </a></h1>
<p>Microsoft has deprecated the Windows Azure Storage Blob driver (WASB) for <a class="reference external" href="https://azure.microsoft.com/services/storage/blobs/">Azure Blob Storage</a> in favor of the Azure Blob Filesystem driver (ABFS); see <a class="reference internal" href="../../connect/storage/azure-storage.html"><span class="doc">Connect to Azure Data Lake Storage Gen2 and Blob Storage</span></a>. ABFS has numerous benefits over WASB; see <a class="reference external" href="https://learn.microsoft.com/azure/storage/blobs/data-lake-storage-abfs-driver">Azure documentation on ABFS</a>.</p>
<p>This article provides documentation for maintaining code that uses the WASB driver. Databricks recommends using ABFS for all connections to Azure Blob Storage.</p>
<div class="section" id="configure-wasb-credentials-in-databricks">
<h2>Configure WASB credentials in Databricks<a class="headerlink" href="#configure-wasb-credentials-in-databricks" title="Permalink to this headline"> </a></h2>
<p>The WASB driver allows you to use either a <a class="reference external" href="https://learn.microsoft.com/azure/storage/common/storage-account-keys-manage">storage account access key</a> or a <a class="reference external" href="https://learn.microsoft.com/azure/storage/common/storage-dotnet-shared-access-signature-part-1">Shared Access Signature (SAS)</a>. (If you are reading data from a public storage account, you do not need to configure credentials).</p>
<p>Databricks recommends using <a class="reference internal" href="../../security/secrets/secrets.html"><span class="doc">secrets</span></a> whenever you need to pass credentials in Databricks. Secrets are available to all users with access to the containing <a class="reference internal" href="../../security/secrets/secret-scopes.html"><span class="doc">secret scope</span></a>.</p>
<p>You can pass credentials:</p>
<ul class="simple">
<li><p>Scoped to the cluster in the Spark configuration</p></li>
<li><p>Scoped to the notebook</p></li>
<li><p>Attached to a mounted directory</p></li>
</ul>
<p>Databricks recommends upgrading all your connections to <a class="reference internal" href="../../connect/storage/azure-storage.html"><span class="doc">use ABFS to access Azure Blob Storage</span></a>, which provides similar access patterns as WASB. Use ABFS for the best security and performance when interacting with Azure Blob Storage.</p>
<p>To configure cluster credentials, set <a class="reference internal" href="../../compute/configure.html#spark-configuration"><span class="std std-ref">Spark configuration</span></a> properties when you create the cluster. Credentials set at the cluster level are available to all users with access to that cluster.</p>
<p>To configure notebook-scoped credentials, use <code class="docutils literal notranslate"><span class="pre">spark.conf.set()</span></code>. Credentials passed at the notebook level are available to all users with access to that notebook.</p>
</div>
<div class="section" id="setting-azure-blob-storage-credentials-with-a-storage-account-access-key">
<h2>Setting Azure Blob Storage credentials with a storage account access key<a class="headerlink" href="#setting-azure-blob-storage-credentials-with-a-storage-account-access-key" title="Permalink to this headline"> </a></h2>
<p>A storage account access key grants full access to all containers within a storage account. While this pattern is useful for prototyping, avoid using it in production to reduce risks associated with granting unrestricted access to production data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">spark</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
  <span class="s2">&quot;fs.azure.account.key.&lt;storage-account-name&gt;.blob.core.windows.net&quot;</span><span class="p">,</span>
  <span class="s2">&quot;&lt;storage-account-access-key&gt;&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>You can upgrade account key URIs to use ABFS. For more information, see <a class="reference internal" href="../../connect/storage/azure-storage.html"><span class="doc">Connect to Azure Data Lake Storage Gen2 and Blob Storage</span></a>.</p>
</div>
<div class="section" id="setting-azure-blob-storage-credentials-with-a-shared-access-signature-sas">
<h2>Setting Azure Blob Storage credentials with a Shared Access Signature (SAS)<a class="headerlink" href="#setting-azure-blob-storage-credentials-with-a-shared-access-signature-sas" title="Permalink to this headline"> </a></h2>
<p>You can use SAS tokens to configure limited access to a single container in a storage account that expires at a specific time.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">spark</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
  <span class="s2">&quot;fs.azure.sas.&lt;container-name&gt;.&lt;storage-account-name&gt;.blob.core.windows.net&quot;</span><span class="p">,</span>
  <span class="s2">&quot;&lt;sas-token-for-container&gt;&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="access-azure-blob-storage-using-the-dataframe-api">
<h2>Access Azure Blob Storage using the DataFrame API<a class="headerlink" href="#access-azure-blob-storage-using-the-dataframe-api" title="Permalink to this headline"> </a></h2>
<p>The Apache Spark DataFrame API can use credentials configured at either the notebook or cluster level. All WASB driver URIs specify the container and storage account names. The directory name is optional, and can specify multiple nested directories relative to the container.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wasbs</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">container</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;@&lt;</span><span class="n">storage</span><span class="o">-</span><span class="n">account</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;.</span><span class="n">blob</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">windows</span><span class="o">.</span><span class="n">net</span><span class="o">/&lt;</span><span class="n">directory</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The following code examples show how you can use the DataFrames API and <a class="reference internal" href="../../dev-tools/databricks-utils.html"><span class="doc">Databricks Utilities (dbutils) reference</span></a> to interact with a named directory within a container.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;parquet&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;wasbs://&lt;container-name&gt;@&lt;storage-account-name&gt;.blob.core.windows.net/&lt;directory-name&gt;&quot;</span><span class="p">)</span>

<span class="n">dbutils</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="s2">&quot;wasbs://&lt;container-name&gt;@&lt;storage-account-name&gt;.blob.core.windows.net/&lt;directory-name&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To update ABFS instead of WASB, update your URIs. For more information, see <a class="reference internal" href="../../connect/storage/azure-storage.html#abfs-uri"><span class="std std-ref">Access Azure storage</span></a></p>
</div>
<div class="section" id="access-azure-blob-storage-with-sql">
<h2>Access Azure Blob Storage with SQL<a class="headerlink" href="#access-azure-blob-storage-with-sql" title="Permalink to this headline"> </a></h2>
<p>Credentials set in a notebook’s session configuration are not accessible to notebooks running Spark SQL.</p>
<p>After an account access key or a SAS is set up in your cluster configuration, you can use standard Spark SQL queries with Azure Blob Storage:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- SQL</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="o">&lt;</span><span class="n">db</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
<span class="k">LOCATION</span><span class="w"> </span><span class="ss">&quot;wasbs://&lt;container-name&gt;@&lt;storage-account-name&gt;.blob.core.windows.net/&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>To update ABFS instead of WASB, update your URIs; see <a class="reference internal" href="../../connect/storage/azure-storage.html#abfs-uri"><span class="std std-ref">Access Azure storage</span></a></p>
</div>
<div class="section" id="mount-azure-blob-storage-containers-to-dbfs">
<span id="access-azure-blob-storage-with-sql"></span><span id="mount-azure-blob-storage-dbfs"></span><h2>Mount Azure Blob Storage containers to DBFS<a class="headerlink" href="#mount-azure-blob-storage-containers-to-dbfs" title="Permalink to this headline"> </a></h2>
<p>You can mount an Azure Blob Storage container or a folder inside a container to DBFS. For Databricks recommendations, see <a class="reference internal" href="../../dbfs/mounts.html"><span class="doc">Mounting cloud object storage on Databricks</span></a>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>Azure Blob storage supports <a class="reference external" href="https://learn.microsoft.com/azure/storage/blobs/storage-blobs-introduction#blobs">three blob types</a>: block, append, and page. You can only mount <em>block</em> blobs to DBFS.</p></li>
<li><p>All users have read and write access to the objects in Blob storage containers mounted to DBFS.</p></li>
<li><p>After a mount point is created through a cluster, users of that cluster can immediately access the mount point. To use the mount point in another running cluster, you must run <code class="docutils literal notranslate"><span class="pre">dbutils.fs.refreshMounts()</span></code> on that running cluster to make the newly created mount point available.</p></li>
</ul>
</div>
<p>DBFS uses the credential that you provide when you create the mount point to access the mounted Blob storage container. If a Blob storage container is mounted using a storage account access key, DBFS uses temporary SAS tokens derived from the storage account key when it accesses this mount point.</p>
<div class="section" id="mount-an-azure-blob-storage-container">
<span id="mount-azure-blob"></span><h3>Mount an Azure Blob storage container<a class="headerlink" href="#mount-an-azure-blob-storage-container" title="Permalink to this headline"> </a></h3>
<p>Databricks recommends using ABFS instead of WASB. For more information about mounting with ABFS, see: <a class="reference internal" href="../../dbfs/mounts.html#mount-azure-storage"><span class="std std-ref">Mount ADLS Gen2 or Blob Storage with ABFS</span></a>.</p>
<ol class="arabic">
<li><p>To mount a Blob storage container or a folder inside a container, use the following command:</p>
<div class="js-code-language-tabs js-code-language-tabs--literal compound">
<div class="compound-first highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dbutils</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span>
  <span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;wasbs://&lt;container-name&gt;@&lt;storage-account-name&gt;.blob.core.windows.net&quot;</span><span class="p">,</span>
  <span class="n">mount_point</span> <span class="o">=</span> <span class="s2">&quot;/mnt/&lt;mount-name&gt;&quot;</span><span class="p">,</span>
  <span class="n">extra_configs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;&lt;conf-key&gt;&quot;</span><span class="p">:</span><span class="n">dbutils</span><span class="o">.</span><span class="n">secrets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">scope</span> <span class="o">=</span> <span class="s2">&quot;&lt;scope-name&gt;&quot;</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="s2">&quot;&lt;key-name&gt;&quot;</span><span class="p">)})</span>
</pre></div>
</div>
<div class="compound-last highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="n">dbutils</span><span class="p">.</span><span class="n">fs</span><span class="p">.</span><span class="n">mount</span><span class="p">(</span>
<span class="w">  </span><span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;wasbs://&lt;container-name&gt;@&lt;storage-account-name&gt;.blob.core.windows.net/&lt;directory-name&gt;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="n">mountPoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/mnt/&lt;mount-name&gt;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="n">extraConfigs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Map</span><span class="p">(</span><span class="s">&quot;&lt;conf-key&gt;&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">dbutils</span><span class="p">.</span><span class="n">secrets</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">scope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&lt;scope-name&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&lt;key-name&gt;&quot;</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<p>where</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;storage-account-name&gt;</span></code> is the name of your Azure Blob storage account.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;container-name&gt;</span></code> is the name of a container in your Azure Blob storage account.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;mount-name&gt;</span></code> is a DBFS path representing where the Blob storage container or a folder inside the container (specified in <code class="docutils literal notranslate"><span class="pre">source</span></code>) will be mounted in DBFS.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;conf-key&gt;</span></code> can be either <code class="docutils literal notranslate"><span class="pre">fs.azure.account.key.&lt;storage-account-name&gt;.blob.core.windows.net</span></code> or <code class="docutils literal notranslate"><span class="pre">fs.azure.sas.&lt;container-name&gt;.&lt;storage-account-name&gt;.blob.core.windows.net</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dbutils.secrets.get(scope</span> <span class="pre">=</span> <span class="pre">&quot;&lt;scope-name&gt;&quot;,</span> <span class="pre">key</span> <span class="pre">=</span> <span class="pre">&quot;&lt;key-name&gt;&quot;)</span></code> gets the key that has been stored as a <a class="reference internal" href="../../security/secrets/secrets.html"><span class="doc">secret</span></a> in a <a class="reference internal" href="../../security/secrets/secret-scopes.html"><span class="doc">secret scope</span></a>.</p></li>
</ul>
</li>
<li><p>Access files in your container as if they were local files, for example:</p>
<div class="js-code-language-tabs js-code-language-tabs--literal compound">
<div class="compound-first highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># python</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;/mnt/&lt;mount-name&gt;/...&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;dbfs:/&lt;mount-name&gt;/...&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="compound-middle highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="c1">// scala</span>
<span class="kd">val</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spark</span><span class="p">.</span><span class="n">read</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;text&quot;</span><span class="p">).</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;/mnt/&lt;mount-name&gt;/...&quot;</span><span class="p">)</span>
<span class="kd">val</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spark</span><span class="p">.</span><span class="n">read</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;text&quot;</span><span class="p">).</span><span class="n">load</span><span class="p">(</span><span class="s">&quot;dbfs:/&lt;mount-name&gt;/...&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="compound-last highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- SQL</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="o">&lt;</span><span class="n">db</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
<span class="k">LOCATION</span><span class="w"> </span><span class="ss">&quot;/mnt/&lt;mount-name&gt;&quot;</span>
</pre></div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../../_static/js/localized.js"></script>
  <script type="text/javascript" src="../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>