

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn about the Databricks Git Server Proxy for Repos and how to configure your on-premises Git repo to work with it." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Git Server Proxy for Databricks Repos">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Git Server Proxy for Databricks Repos &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/repos/git-proxy.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/repos/git-proxy.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/repos/git-proxy.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="top" title="Databricks on AWS" href="../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../en/repos/git-proxy.html" class="notranslate">English</option>
    <option value="../../ja/repos/git-proxy.html" class="notranslate">日本語</option>
    <option value="../../pt/repos/git-proxy.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Git Server Proxy for Databricks Repos</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="git-server-proxy-for-databricks-repos">
<h1>Git Server Proxy for Databricks Repos<a class="headerlink" href="#git-server-proxy-for-databricks-repos" title="Permalink to this headline"> </a></h1>
<p>Learn about and configure Git Server Proxy for Databricks Repos, which enables you to proxy Git commands from Databricks Repos to your on-premises repos served by GitHub Enterprise Server, Bitbucket Server, and GitLab self-managed.</p>
<div class="preview admonition">
<p class="admonition-title">Preview</p>
<p>This feature is in <a class="reference internal" href="../release-notes/release-types.html"><span class="doc">Public Preview</span></a>.</p>
</div>
<div class="section" id="what-is-git-server-proxy-for-databricks-repos">
<h2>What is Git Server Proxy for Databricks Repos?<a class="headerlink" href="#what-is-git-server-proxy-for-databricks-repos" title="Permalink to this headline"> </a></h2>
<p>Databricks Git Server Proxy for Databricks Repos is a feature that allows you to proxy Git commands from your Databricks workspace to an on-premises Git repo that you manage.</p>
<p><a class="reference internal" href="index.html"><span class="doc">Databricks Repos</span></a> represents your connected Git repos as folders. The contents of these folders are version-controlled by syncing them to the connected Git repository. By default, Databricks Repos can synchronize only with public Git providers (like public GitHub, GitLab, Azure DevOps, and others). However, if you host your own on-premises Git server (such as GitHub Enterprise Server, Bitbucket Server , or GitLab self-managed), you must use Git Server Proxy with Databricks Repos to provide Databricks access to your Git server. Your Git server must be accessible from your Databricks data plane (driver node).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, Databricks Repos can contain only Databricks notebooks and sub-folders, along with a specific set of other asset types. For a current list of supported asset types, see <a class="reference internal" href="limits.html"><span class="doc">Limits &amp; FAQ for Git integration with Databricks Repos</span></a>.</p>
</div>
</div>
<div class="section" id="how-does-git-server-proxy-for-databricks-repos-work">
<h2>How does Git Server Proxy for Databricks Repos work?<a class="headerlink" href="#how-does-git-server-proxy-for-databricks-repos-work" title="Permalink to this headline"> </a></h2>
<p>Git Server Proxy for Databricks Repos proxies Git commands from the Databricks control plane to a “proxy cluster” running in your Databricks workspace’s compute plane. In this context, the proxy cluster is a cluster configured to run a proxy service for Git commands from Databricks Repos to your self-hosted Git repo.  This proxy service receives Git commands from the Databricks control plane and forwards them to your Git server instance.</p>
<p>The diagram below illustrates the overall system architecture:</p>
<div class="figure align-default">
<img alt="Diagram that shows how Git Server Proxy for Databricks Repos is configured to run from a customer's compute plane" src="../_images/git-proxy-server1.png" />
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Databricks provides an enablement notebook <a class="reference internal" href="#enablement-notebook"><span class="std std-ref">you can run to configure your Git server instance to proxy commands for Databricks Repos</span></a>. <a class="reference external" href="https://github.com/databricks/databricks-repos-proxy/blob/main/enable_git_proxy_jupyter.ipynb">Get the enablement notebook on GitHub</a>.</p>
</div>
</div>
<div class="section" id="how-do-i-set-up-git-server-proxy-for-databricks-repos">
<h2>How do I set up Git Server Proxy for Databricks Repos?<a class="headerlink" href="#how-do-i-set-up-git-server-proxy-for-databricks-repos" title="Permalink to this headline"> </a></h2>
<p>This section describes how to prepare your Git server instance for Git Server Proxy for Databricks Repos, create the proxy, and validate your configuration.</p>
<div class="section" id="before-you-begin">
<h3>Before you begin<a class="headerlink" href="#before-you-begin" title="Permalink to this headline"> </a></h3>
<p>Before enabling the proxy, consider the following prerequisites and planning tasks:</p>
<ul class="simple">
<li><p>Your workspace has the Databricks Repos feature enabled.</p></li>
<li><p>Your Git server instance is accessible from your Databricks workspace’s compute plane VPC, and has both HTTPS and personal access tokens (PATs) enabled.</p></li>
</ul>
</div>
<div class="section" id="step-1-prepare-your-git-server-instance">
<h3>Step 1: Prepare your Git server instance<a class="headerlink" href="#step-1-prepare-your-git-server-instance" title="Permalink to this headline"> </a></h3>
<p>To configure your Git server instance:</p>
<ol class="arabic">
<li><p>Give the proxy cluster’s driver node access your Git server.</p>
<p>Your enterprise Git server can have an <code class="docutils literal notranslate"><span class="pre">allowlist</span></code> of IP addresses from which access is permitted.</p>
<ol class="loweralpha simple">
<li><p>Associate a static outbound IP address for traffic that originates from your proxy cluster. You can do this by proxying traffic through a NAT gateway.</p></li>
<li><p>Add the IP address from the previous step to your Git server’s allowlist.</p></li>
</ol>
</li>
</ol>
<ol class="arabic simple" start="2">
<li><p>Set your Git server instance to allow HTTPS transport.</p>
<ul class="simple">
<li><p>For GitHub Enterprise, see <a class="reference external" href="https://help.github.com/en/enterprise/2.20/user/github/using-git/which-remote-url-should-i-use">Which remote URL should I use</a> in the GitHub Enterprise help.</p></li>
<li><p>For Bitbucket, go to the Bitbucket server administration page and select server settings. In the HTTP(S) SCM hosting section, enable the <strong>HTTP(S) enabled</strong> checkbox.</p></li>
</ul>
</li>
</ol>
</div>
<div class="section" id="step-2-run-the-enablement-notebook">
<span id="enablement-notebook"></span><h3>Step 2: Run the enablement notebook<a class="headerlink" href="#step-2-run-the-enablement-notebook" title="Permalink to this headline"> </a></h3>
<p>To enable the proxy:</p>
<ol class="arabic">
<li><p>Log into your Databricks workspace as a workspace admin with access rights to create a cluster.</p></li>
<li><p>Import this notebook:</p>
<p><a class="reference external" href="https://github.com/databricks/databricks-repos-proxy/blob/main/enable_git_proxy_jupyter.ipynb">Enable Git Server Proxy for Databricks Repos for private Git server connectivity in Repos</a>.</p>
</li>
<li><p>Select “Run All” to perform the following tasks:</p>
<ul class="simple">
<li><p>Create <a class="reference internal" href="../compute/single-node.html"><span class="doc">a single node cluster</span></a> named “Repos Git Proxy”, which does not auto-terminate. This is the “proxy cluster” that will process and forward Git commands from your Databricks workspace to your on-premises Git server.</p></li>
<li><p>Enable a feature flag that controls whether Git requests in Databricks Repos are proxied via the cluster.</p></li>
</ul>
</li>
</ol>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>You must be an admin on the workspace with access rights to create a cluster.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should be aware of the following:</p>
<ul class="simple">
<li><p>By default, all users in the Databricks workspace are given attach permissions to the cluster that is created by the notebook. You can <a class="reference internal" href="../security/auth-authz/access-control/cluster-acl.html"><span class="doc">control access to the cluster</span></a> as you see fit. Users need attach permissions to use Databricks Repos in this setup.</p></li>
<li><p>Running an additional long-running cluster to host the proxy software incurs extra DBUs. To minimize costs, the notebook configures the proxy to use a single node cluster with an inexpensive node type. However, you might want to modify the cluster options to suit your needs.</p></li>
</ul>
</div>
</div>
<div class="section" id="step-3-validate-your-git-server-configuration">
<h3>Step 3: Validate your Git server configuration<a class="headerlink" href="#step-3-validate-your-git-server-configuration" title="Permalink to this headline"> </a></h3>
<p>To validate your Git server configuration, try to clone a repo hosted on your private Git server via the proxy cluster. A successful clone means that you have successfully enabled Git Server Proxy for your workspace.</p>
</div>
<div class="section" id="step-4-create-proxy-enabled-repos">
<h3>Step 4: Create proxy-enabled repos<a class="headerlink" href="#step-4-create-proxy-enabled-repos" title="Permalink to this headline"> </a></h3>
<p>After users configure their Git credentials, no further steps are required to create or synchronize your repos. To configure credentials and create a repo in Databricks Repos, see <a class="reference internal" href="get-access-tokens-from-git-provider.html"><span class="doc">Configure Git credentials &amp; connect a remote repo to Databricks</span></a>.</p>
</div>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline"> </a></h2>
<p>Did you encounter an error while configuring Git Server Proxy for Databricks Repos? Here are some common issues and ways to diagnose them more effectively.</p>
<div class="section" id="checklist-for-common-problems">
<h3>Checklist for common problems<a class="headerlink" href="#checklist-for-common-problems" title="Permalink to this headline"> </a></h3>
<p>Before you start diagnosing an error, confirm that you’ve completed the following steps:</p>
<ul class="simple">
<li><p>Confirm that your proxy cluster is running.</p></li>
<li><p>Confirm that your Databricks Repos users have “attach to” permissions on the proxy cluster.</p></li>
<li><p>Run the enablement notebook again and capture the results, if you haven’t already. If you are unable to debug the issue, Databricks Support can review the results. You can export and send the enablement notebook as a DBC archive.</p></li>
</ul>
</div>
<div class="section" id="inspect-logs-on-the-proxy-cluster">
<h3>Inspect logs on the proxy cluster<a class="headerlink" href="#inspect-logs-on-the-proxy-cluster" title="Permalink to this headline"> </a></h3>
<p>The file at <code class="docutils literal notranslate"><span class="pre">/databricks/git-proxy/git-proxy.log</span></code> on the proxy cluster contains logs that are useful for debugging purposes.</p>
<p>The log file should start with the line <code class="docutils literal notranslate"><span class="pre">Data-plane</span> <span class="pre">proxy</span> <span class="pre">server</span> <span class="pre">binding</span> <span class="pre">to</span> <span class="pre">('',</span> <span class="pre">8000)…</span></code> If it does not, this means that the proxy server did not start properly. Try restarting the cluster, or delete the cluster you created and run the enablement notebook again.</p>
<p>If the log file does start with this line, review the log statements that follow it for each Git request initiated by a Git operation in Databricks Repos.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  do_GET: https://server-address/path/to/repo/info/refs?service=git-upload-pack 10.139.0.25 - - [09/Jun/2021 06:53:02] /
  &quot;GET /server-address/path/to/repo/info/refs?service=git-upload-pack HTTP/1.1&quot; 200`
</pre></div>
</div>
<p>Error logs written to this file can be useful to help you or Databricks Support debug issues.</p>
</div>
<div class="section" id="common-error-messages-and-their-resolution">
<h3>Common error messages and their resolution<a class="headerlink" href="#common-error-messages-and-their-resolution" title="Permalink to this headline"> </a></h3>
<ul>
<li><p><strong>Secure connection could not be established because of SSL problems</strong></p>
<p>You might see the following error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">git</span><span class="o">.</span><span class="n">consult</span><span class="o">-</span><span class="n">prodigy</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">Prodigy</span><span class="o">/</span><span class="n">databricks_test</span><span class="p">:</span> <span class="n">Secure</span> <span class="n">connection</span> <span class="n">to</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">git</span><span class="o">.</span><span class="n">consult</span><span class="o">-</span><span class="n">prodigy</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">Prodigy</span><span class="o">/</span><span class="n">databricks_test</span> <span class="n">could</span> <span class="ow">not</span> <span class="n">be</span> <span class="n">established</span> <span class="n">because</span> <span class="n">of</span> <span class="n">SLL</span> <span class="n">problems</span>
</pre></div>
</div>
<p>Often this means that you are using a repository that requires special SSL certificates. Check the content of the <code class="docutils literal notranslate"><span class="pre">/databricks/git-proxy/git-proxy.log</span></code> file on the proxy cluster. If it says that certificate validation failed, then you must add the certificate of authority to the system certificate chain. First, extract the root certificate (using the <a class="reference external" href="https://daniel.haxx.se/blog/2018/11/07/get-the-ca-cert-for-curl/">browser</a> or other option) and upload it to DBFS. Then, edit the <strong>Repos Git Proxy</strong> cluster to use the <code class="docutils literal notranslate"><span class="pre">GIT_PROXY_CA_CERT_PATH</span></code> environment variable to point to the root certificate file. For more information about editing cluster environment variables, see <a class="reference internal" href="../compute/configure.html#env-var"><span class="std std-ref">Environment variables</span></a>.</p>
<p>After you have completed that step, restart the cluster.</p>
<div class="figure align-default">
<img alt="The Databricks modal dialog where you set environment variables for a Git proxy" src="../_images/git-proxy-set-env-vars.png" />
</div>
</li>
<li><p><strong>Failure to clone repository with error “Missing/Invalid Git credentials”</strong></p>
<p>First, check that you have <a class="reference internal" href="get-access-tokens-from-git-provider.html"><span class="doc">configured your Git credentials in User Settings</span></a>.</p>
<p>You might encounter this error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">Error</span><span class="p">:</span> <span class="n">Invalid</span> <span class="n">Git</span> <span class="n">credentials</span><span class="o">.</span> <span class="n">Go</span> <span class="n">to</span> <span class="n">User</span> <span class="n">Settings</span> <span class="o">-&gt;</span> <span class="n">Git</span> <span class="n">Integration</span> <span class="ow">and</span> <span class="n">check</span> <span class="n">that</span> <span class="n">your</span> <span class="n">personal</span> <span class="n">access</span> <span class="n">token</span> <span class="ow">or</span> <span class="n">app</span> <span class="n">password</span> <span class="n">has</span> <span class="n">the</span> <span class="n">correct</span> <span class="n">repo</span> <span class="n">access</span><span class="o">.</span>
</pre></div>
</div>
<p>If your organization is using SAML SSO, make sure the token has been authorized (this can be done from your Git server’s Personal Access Token (PAT) management page).</p>
<p>Additionally, check that all users have “can attach” permissions on the Git proxy cluster.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="frequently-asked-questions">
<h2>Frequently asked questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline"> </a></h2>
<div class="section" id="what-are-the-security-implications-of-the-git-server-proxy">
<h3>What are the security implications of the Git server proxy?<a class="headerlink" href="#what-are-the-security-implications-of-the-git-server-proxy" title="Permalink to this headline"> </a></h3>
<p>The most important things to know are:</p>
<ul class="simple">
<li><p>Proxying does not affect the security architecture of your Databricks control plane.</p></li>
<li><p>In the current release, the proxy can open new attack vectors for privileged users. To reduce complexity and the potential for attacks, you can only have one Git proxy server cluster per workspace at this time.</p></li>
</ul>
</div>
<div class="section" id="is-all-databricks-repos-related-git-traffic-routed-through-the-proxy-cluster-even-for-public-git-repos">
<h3>Is all Databricks Repos-related Git traffic routed through the proxy cluster, even for public Git repos?<a class="headerlink" href="#is-all-databricks-repos-related-git-traffic-routed-through-the-proxy-cluster-even-for-public-git-repos" title="Permalink to this headline"> </a></h3>
<p>Yes. In the current release, your Databricks workspace does not differentiate between proxied and non-proxied repos.</p>
</div>
<div class="section" id="does-the-git-proxy-feature-work-with-other-git-enterprise-server-providers">
<h3>Does the Git proxy feature work with other Git enterprise server providers?<a class="headerlink" href="#does-the-git-proxy-feature-work-with-other-git-enterprise-server-providers" title="Permalink to this headline"> </a></h3>
<p>Databricks Repos supports GitHub Enterprise, Bitbucket Server, Azure DevOps Server, and GitLab self-managed. Other enterprise Git server providers should work as well if they conform to common Git specifications.</p>
</div>
<div class="section" id="does-databricks-repos-support-gpg-signing-of-commits">
<h3>Does Databricks Repos support GPG signing of commits?<a class="headerlink" href="#does-databricks-repos-support-gpg-signing-of-commits" title="Permalink to this headline"> </a></h3>
<p>No.</p>
</div>
<div class="section" id="does-databricks-repos-support-ssh-transport-for-git-operations">
<h3>Does Databricks Repos support SSH transport for Git operations?<a class="headerlink" href="#does-databricks-repos-support-ssh-transport-for-git-operations" title="Permalink to this headline"> </a></h3>
<p>No. Only HTTPS is supported.</p>
</div>
<div class="section" id="is-the-use-of-a-non-default-https-port-on-the-git-server-supported">
<h3>Is the use of a non-default HTTPS port on the Git server supported?<a class="headerlink" href="#is-the-use-of-a-non-default-https-port-on-the-git-server-supported" title="Permalink to this headline"> </a></h3>
<p>Currently, the enablement notebook assumes that your Git server uses the default HTTPS port 443. You can set the environment variable <code class="docutils literal notranslate"><span class="pre">GIT_PROXY_CUSTOM_HTTP_PORT</span></code> to overwrite the port value with a preferred one.</p>
</div>
<div class="section" id="can-you-share-one-proxy-for-multiple-workspaces-or-do-you-need-one-proxy-cluster-per-workspace">
<h3>Can you share one proxy for multiple workspaces or do you need one proxy cluster per workspace?<a class="headerlink" href="#can-you-share-one-proxy-for-multiple-workspaces-or-do-you-need-one-proxy-cluster-per-workspace" title="Permalink to this headline"> </a></h3>
<p>You need one proxy cluster per Databricks workspace.</p>
</div>
<div class="section" id="does-the-proxy-work-with-legacy-single-notebook-versioning">
<h3>Does the proxy work with legacy single-notebook versioning?<a class="headerlink" href="#does-the-proxy-work-with-legacy-single-notebook-versioning" title="Permalink to this headline"> </a></h3>
<p>No, the proxy does not work with legacy single-notebook versioning. Users must migrate to Databricks Repos versioning.</p>
</div>
<div class="section" id="can-databricks-hide-git-server-urls-that-are-proxied-could-users-enter-the-original-git-server-urls-rather-than-proxied-urls">
<h3>Can Databricks hide Git server URLs that are proxied? Could users enter the original Git server URLs rather than proxied URLs?<a class="headerlink" href="#can-databricks-hide-git-server-urls-that-are-proxied-could-users-enter-the-original-git-server-urls-rather-than-proxied-urls" title="Permalink to this headline"> </a></h3>
<p>Yes to both questions. Users do not need to adjust their behavior for the proxy. With the current proxy implementation, all Git traffic for Databricks Repos is routed through the proxy. Users enter the normal Git repo URL such as <code class="docutils literal notranslate"><span class="pre">https://git.company.com/org/repo-name.git</span></code>.</p>
</div>
<div class="section" id="how-often-will-users-work-with-the-git-urls">
<h3>How often will users work with the Git URLs?<a class="headerlink" href="#how-often-will-users-work-with-the-git-urls" title="Permalink to this headline"> </a></h3>
<p>Typically a user would just add the Git URL when they create a new repo or check out an existing repo that they have not already checked out.</p>
</div>
<div class="section" id="does-the-feature-transparently-proxy-authentication-data-to-the-git-server">
<h3>Does the feature transparently proxy authentication data to the Git server?<a class="headerlink" href="#does-the-feature-transparently-proxy-authentication-data-to-the-git-server" title="Permalink to this headline"> </a></h3>
<p>Yes, the proxy uses the user account’s Git server token to authenticate to the Git server.</p>
</div>
<div class="section" id="is-there-databricks-access-to-git-server-code">
<h3>Is there Databricks access to Git server code?<a class="headerlink" href="#is-there-databricks-access-to-git-server-code" title="Permalink to this headline"> </a></h3>
<p>The Databricks proxy service accesses the Git repository on the Git server using the user-provided credential and synchronizes any code files in the repository with the repo. Access is restricted by the permissions specified in the user-provided personal access token (PAT).</p>
</div>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../_static/js/localized.js"></script>
  <script type="text/javascript" src="../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>