

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to use common Git operations with Databricks Repos, including clone, commit, push, and more." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Run Git operations on Databricks Repos">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Run Git operations on Databricks Repos &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/repos/git-operations-with-repos.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/repos/git-operations-with-repos.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/repos/git-operations-with-repos.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="top" title="Databricks on AWS" href="../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../en/repos/git-operations-with-repos.html" class="notranslate">English</option>
    <option value="../../ja/repos/git-operations-with-repos.html" class="notranslate">日本語</option>
    <option value="../../pt/repos/git-operations-with-repos.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Run Git operations on Databricks Repos</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="run-git-operations-on-databricks-repos">
<h1>Run Git operations on Databricks Repos<a class="headerlink" href="#run-git-operations-on-databricks-repos" title="Permalink to this headline"> </a></h1>
<p>The article describes how to clone a Git repo and perform other common Git operations with Databricks Repos. Databricks Repos is a visual Git client that integrates with the Databricks user interface and provides access to connected repos, which are represented as Git folders in your workspace.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If you clone a Git repo using the CLI through a cluster’s web terminal, the files won’t display in the Databricks UI.</p>
</div>
<p>If you are unable to clone the repo and you’re using Azure DevOps with Microsoft Entra ID (formerly Azure Active Directory) authentication, see <a class="reference internal" href="limits.html#cap-aad"><span class="std std-ref">Issue with control access policy (CAP)</span></a>.</p>
<div class="section" id="add-a-repo-and-connect-remotely-later">
<h2>Add a repo and connect remotely later<a class="headerlink" href="#add-a-repo-and-connect-remotely-later" title="Permalink to this headline"> </a></h2>
<p>You can also create a new Repo in Databricks and add the remote Git repository URL later.</p>
<ol class="arabic">
<li><p>To create a new Databricks Repo not linked to a remote Git repository, click the <strong>Add Repo</strong> button. Deselect <strong>Create repo by cloning a Git repository</strong>, enter a name for the Repo, and then click <strong>Create Repo</strong>.</p>
<div class="figure align-default">
<img alt="Add repo without connecting remotely." src="../_images/connect-repo-later.png" />
</div>
</li>
<li><p>When you are ready to add the Git repository URL, click the down arrow next to the Databricks Repo name in the workspace to open the Repo menu, and select <strong>Git…</strong> to open the Git dialog.</p>
<div class="figure align-default">
<img alt="Repos menu: Add a Git repo URL." src="../_images/repo-menu.png" />
</div>
</li>
<li><p>In the <strong>Git repo URL</strong> field, enter the URL for the remote repository and select your Git provider from the drop-down menu. Click <strong>Save</strong>.</p>
<div class="figure align-default">
<img alt="Git dialog settings tab." src="../_images/git-dialog-settings.png" />
</div>
</li>
</ol>
</div>
<div class="section" id="clone-a-repo-connected-to-a-remote-repo">
<span id="clone-repo"></span><h2>Clone a repo connected to a remote repo<a class="headerlink" href="#clone-a-repo-connected-to-a-remote-repo" title="Permalink to this headline"> </a></h2>
<ol class="arabic">
<li><p>In the sidebar, select <strong>Workspace</strong> &gt; <strong>Repos</strong>.</p></li>
<li><p>Click <strong>Add Repo</strong>.</p>
<div class="figure align-default">
<img alt="Add repo UI." src="../_images/add-repo.png" />
</div>
</li>
<li><p>In the <strong>Add Repo</strong> dialog, select <strong>Create repo by cloning a Git repository</strong> and enter the repository URL.</p></li>
<li><p>Select your Git provider from the drop-down menu, optionally change the name to use for the Databricks repo, and click <strong>Create Repo</strong>.
The contents of the remote repository are cloned to the Databricks repo.</p>
<div class="figure align-default">
<img alt="Clone from Repo UI." src="../_images/clone-from-repo.png" />
</div>
</li>
</ol>
<p>At this stage, you have the option to clone only a subset of your repository’s directories using <a class="reference internal" href="#sparse"><span class="std std-ref">sparse checkout</span></a>. This is useful if your repository is larger than Databricks supported <a class="reference internal" href="limits.html"><span class="doc">limits</span></a></p>
</div>
<div class="section" id="access-the-git-dialog">
<span id="open-the-git-dialog"></span><h2>Access the Git dialog<a class="headerlink" href="#access-the-git-dialog" title="Permalink to this headline"> </a></h2>
<p>You can access the Git dialog from a notebook or from the Databricks Repos browser.</p>
<ul>
<li><p>From a notebook, click the button next to the name of the notebook that identifies the current Git branch.</p>
<div class="figure align-default">
<img alt="Git dialog button on notebook." src="../_images/toolbar.png" />
</div>
</li>
<li><p>From the Databricks Repos browser, click the button to the right of the repo name. You can also right-click the repo name and select <strong>Git…</strong> from the menu.</p>
<div class="figure align-default">
<img alt="Git dialog button and Git menu in repo browser." src="../_images/git-button-repos.png" />
</div>
</li>
</ul>
</div>
<div class="section" id="pull-changes-from-the-remote-git-repository">
<span id="pull-changes"></span><h2>Pull changes from the remote Git repository<a class="headerlink" href="#pull-changes-from-the-remote-git-repository" title="Permalink to this headline"> </a></h2>
<p>To pull changes from the remote Git repository, click <img alt="Pull" src="../_images/pull-button.png" /> in the Git dialog. Notebooks and other files are updated automatically to the latest version in your remote Git repository. If the changes pulled from the remote repo conflict with your local changes in Databricks, you need to resolve the <a class="reference internal" href="#resolve-merge-conflicts"><span class="std std-ref">merge conflicts</span></a>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Git operations that pull in upstream changes clear the notebook state. For more information, see <a class="reference internal" href="limits.html#incoming-changes-clear-notebook-state"><span class="std std-ref">Incoming changes clear the notebook state</span></a>.</p>
</div>
</div>
<div class="section" id="merge-branches">
<h2>Merge branches<a class="headerlink" href="#merge-branches" title="Permalink to this headline"> </a></h2>
<p>The merge function in Databricks Repos merges one branch into another using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code>. A merge operation is a way to combine the commit history from one branch into another branch; the only difference is the strategy it uses to achieve this. For Git beginners, we recommend using merge (over rebase) because it does not require force pushing to a branch and therefore does not rewrite commit history.</p>
<p>To learn more about the differences between merging and rebasing commits, please see <a class="reference external" href="https://www.atlassian.com/git/tutorials/merging-vs-rebasing">Atlassian’s documentation on the subject</a>.</p>
<ul class="simple">
<li><p>If there’s a merge conflict, resolve it in the Repos UI.</p></li>
<li><p>If there’s no conflict, the merge is pushed to the remote Git repo using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code>.</p></li>
</ul>
</div>
<div class="section" id="rebase-a-branch-on-another-branch">
<span id="rebase"></span><h2><code class="docutils literal notranslate"><span class="pre">Rebase</span></code> a branch on another branch<a class="headerlink" href="#rebase-a-branch-on-another-branch" title="Permalink to this headline"> </a></h2>
<p>Rebasing alters the commit history of a branch. Like <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code>, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span></code> integrates changes from one branch into another. Rebase does the following:</p>
<ol class="arabic simple">
<li><p>Saves the commits on your current branch to a temporary area.</p></li>
<li><p>Resets the current branch to the chosen branch.</p></li>
<li><p>Reapplies each individual commit previously saved on the current branch, resulting in a linear history that combines changes from both branches.</p></li>
</ol>
<p>For an in-depth explanation of rebasing, see <a class="reference external" href="https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase">git rebase</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using rebase can cause versioning issues for collaborators working in the same repo.</p>
</div>
<p>A common workflow is to rebase a feature branch on the main branch.</p>
<p>To rebase a branch on another branch:</p>
<ol class="arabic">
<li><p>From the <strong>Branch</strong> menu in the Repos UI, select the branch you want to rebase.</p></li>
<li><p>Select <strong>Rebase</strong> from the kebab menu.</p>
<div class="figure align-default">
<img alt="Git rebase function on the kebab menu." src="../_images/rebase-option.png" />
</div>
</li>
<li><p>Select the branch you want to rebase on.</p>
<p>The rebase operation integrates changes from the branch you choose here into the current branch.</p>
</li>
</ol>
<p>Databricks Repos runs <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">--force</span></code> to update the remote Git repo.</p>
</div>
<div class="section" id="resolve-merge-conflicts">
<span id="merge-conflicts"></span><h2>Resolve merge conflicts<a class="headerlink" href="#resolve-merge-conflicts" title="Permalink to this headline"> </a></h2>
<p>Merge conflicts happen when 2 or more Git users attempt to merge changes to the same lines of a file into a common branch and Git cannot choose the “right” changes to apply. Merge conflicts can also occur when a user attempts to pull or merge changes from another branch into a branch with uncommitted changes.</p>
<div class="figure align-default">
<img alt="Animated GIF that shows a common merge conflict arising from uncommitted changes during a git pull" src="../_images/git-ops-2.gif" />
</div>
<p>If an operation such as pull, rebase, or merge causes a merge conflict, the Repos UI shows a list of files with conflicts and options for resolving the conflicts.</p>
<p>You have two primary options:</p>
<ul class="simple">
<li><p>Use the Repos UI to resolve the conflict.</p></li>
<li><p>Abort the Git operation, manually discard the changes in the conflicting file, and try the Git operation again.</p></li>
</ul>
<div class="figure align-default">
<img alt="Animated GIF showing a merge conflict in a Databricks Repos folder UI" src="../_images/git-ops-1.gif" />
</div>
<p>When resolving merge conflicts with the Repos UI, you must choose between manually resolving the conflicts in the editor or keeping all incoming or current changes.</p>
<p><strong>Keep All Current</strong> or <strong>Take Incoming Changes</strong></p>
<p>If you know you <strong>only</strong> want to keep all of the current or incoming changes, click the kebab to the right of the file name in your notebook pane and select either <strong>Keep all current changes</strong> or <strong>Take all incoming changes</strong>. Click the button with the same label to commit the changes and resolve the conflict.</p>
<div class="figure align-default">
<img alt="The pane for the Databricks notebook UI, showing the dropdown options for merge conflict resolution" src="../_images/git-ops-3-1.png" />
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Confused about which option to pick? The color of each option matches the respective code changes that it will keep in the file.</p>
</div>
<p><strong>Manually Resolving Conflicts</strong></p>
<p>Manual conflict resolution lets you determine which of the conflicting lines should be accepted in the merge. For merge conflicts, you resolve the conflict by directly editing the contents of the file with the conflicts.</p>
<div class="figure align-default">
<img alt="Animated GIF showing a manual resolution of a merge conflict" src="../_images/git-ops-3.gif" />
</div>
<p>To resolve the conflict, select the code lines you want to preserve and delete everything else, including the Git merge conflict markers. When you’re done, select <strong>Mark As Resolved</strong>.</p>
<p>If you decide you made the wrong choices when resolving merge conflicts, click the <strong>Abort</strong> button to abort the process and undo everything. Once all conflicts are resolved, click the <strong>Continue Merge</strong> or <strong>Continue Rebase</strong> option to resolve the conflict and complete the operation.</p>
</div>
<div class="section" id="commit-and-push-changes-to-the-remote-git-repository">
<span id="commit-push"></span><h2>Commit and push changes to the remote Git repository<a class="headerlink" href="#commit-and-push-changes-to-the-remote-git-repository" title="Permalink to this headline"> </a></h2>
<p>When you have added new notebooks or files, or made changes to existing notebooks or files, the Repos UI highlights the changes.</p>
<div class="figure align-default">
<img alt="Git dialog with changes highlighted." src="../_images/git-commit-push.png" />
</div>
<p>Add a required commit message for the changes, and click <strong>Commit &amp; Push</strong> to push these changes to the remote Git repository.</p>
<p>If you don’t have permission to commit to the default branch, such as <code class="docutils literal notranslate"><span class="pre">main</span></code>, create a new branch and use your Git provider interface to create a pull request (PR) to merge it into the default branch.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Notebook outputs are not included in commits by default when notebooks are saved in source file formats (<code class="docutils literal notranslate"><span class="pre">.py</span></code>, <code class="docutils literal notranslate"><span class="pre">.scala</span></code>, <code class="docutils literal notranslate"><span class="pre">.sql</span></code>, <code class="docutils literal notranslate"><span class="pre">.r</span></code>). For information on committing notebook outputs using the IPYNB format, see <a class="reference internal" href="#notebook-outputs-commit"><span class="std std-ref">Control .ipynb notebook output commits</span></a></p></li>
<li><p>See instructions for resolving merge conflicts earlier in this article.</p></li>
</ul>
</div>
</div>
<div class="section" id="switch-to-a-different-branch">
<h2>Switch to a different branch<a class="headerlink" href="#switch-to-a-different-branch" title="Permalink to this headline"> </a></h2>
<p>You can switch to (checkout) a different branch using the branch dropdown in the Git dialog:</p>
<div class="figure align-default">
<img alt="Git dialog switch to different branch" src="../_images/git-repos-switch-branch-dialog.png" />
</div>
</div>
<div class="section" id="create-a-new-branch">
<h2>Create a new branch<a class="headerlink" href="#create-a-new-branch" title="Permalink to this headline"> </a></h2>
<p>You can create a new branch based on an existing branch from the Git dialog:</p>
<div class="figure align-default">
<img alt="Git dialog new branch." src="../_images/git-dialog-new-branch.png" />
</div>
</div>
<div class="section" id="git-reset">
<span id="reset"></span><h2>Git <code class="docutils literal notranslate"><span class="pre">reset</span></code><a class="headerlink" href="#git-reset" title="Permalink to this headline"> </a></h2>
<p>In Databricks Repos, you can perform a Git <code class="docutils literal notranslate"><span class="pre">reset</span></code> within the Databricks UI. Git reset in Databricks Repos is equivalent to <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span> <span class="pre">--hard</span></code> combined with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">--force</span></code>.</p>
<p>Git reset replaces the branch contents and history with the most recent state of another branch. You can use this when edits are in conflict with the upstream branch, and you don’t mind losing those edits when you reset to the upstream branch. <a class="reference external" href="https://git-scm.com/docs/git-reset#Documentation/git-reset.txt---hard">Read more about git `reset –hard`</a>.</p>
<div class="section" id="reset-to-an-upstream-remote-branch">
<h3>Reset to an upstream (remote) branch<a class="headerlink" href="#reset-to-an-upstream-remote-branch" title="Permalink to this headline"> </a></h3>
<p>With <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span></code> in this scenario:</p>
<ul class="simple">
<li><p>You reset your selected branch (for example, <code class="docutils literal notranslate"><span class="pre">feature_a</span></code>) to a different branch (for example, <code class="docutils literal notranslate"><span class="pre">main</span></code>).</p></li>
<li><p>You also reset the upstream (remote) branch <code class="docutils literal notranslate"><span class="pre">feature_a</span></code> to main.</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>When you reset, you lose all uncommitted and committed changes in both the local and remote version of the branch.</p>
</div>
<p>To reset a branch to a remote branch:</p>
<ol class="arabic">
<li><p>In the Repos UI from the <strong>Branch</strong> menu, choose the branch you want to reset.</p>
<div class="figure align-default">
<img alt="Branch selector in the Repos UI." src="../_images/repos-branch-selector.png" />
</div>
</li>
<li><p>Select <strong>Reset</strong> from the kebab menu.</p>
<div class="figure align-default">
<img alt="Git reset operation on the kebab menu." src="../_images/reset-local-branch.png" />
</div>
</li>
<li><p>Select the branch to reset.</p>
<div class="figure align-default">
<img alt="Git reset --hard dialog." src="../_images/reset-to-branch.png" />
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="configure-sparse-checkout-mode">
<span id="sparse"></span><h2>Configure sparse checkout mode<a class="headerlink" href="#configure-sparse-checkout-mode" title="Permalink to this headline"> </a></h2>
<p>Sparse checkout is a client side setting which allows you to clone and work with only a subset of the remote repositories’s directories in Databricks. This is especially useful if your repository’s size is beyond the Databricks supported <a class="reference internal" href="limits.html"><span class="doc">limits</span></a>.</p>
<p>You can use the Sparse Checkout mode when adding (cloning) a new repo.</p>
<ol class="arabic">
<li><p>In the <strong>Add Repo</strong> dialog, open <strong>Advanced</strong>.</p></li>
<li><p>Select <strong>Sparse checkout mode</strong>.</p>
<div class="figure align-default">
<img alt="Sparse checkout option in the Add Repo dialog." src="../_images/sparse-checkout-option.png" />
</div>
</li>
<li><p>In the <strong>Cone patterns</strong> box, specify the cone checkout patterns you want. Separate multiple patterns by line breaks.</p></li>
</ol>
<p>At this time, you can’t disable sparse checkout for a repo in Databricks.</p>
<div class="section" id="how-cone-patterns-work">
<h3>How cone patterns work<a class="headerlink" href="#how-cone-patterns-work" title="Permalink to this headline"> </a></h3>
<p>To understand how cone pattern works in the sparse checkout mode, see the following diagram representing the remote repository structure.</p>
<div class="figure align-default">
<img alt="Remote repository structure without sparse checkout." src="../_images/repo-structure-without-sparse-checkout.png" />
</div>
<p>If you select <strong>Sparse checkout mode</strong>, but do not specify a cone pattern, the default cone pattern is applied. This includes only the files in root and no subdirectories, resulting in a repo structure as following:</p>
<div class="figure align-default">
<img alt="Sparse checkout: default cone pattern." src="../_images/sparse-checkout-default.png" />
</div>
<p>Setting the sparse checkout cone pattern as <code class="docutils literal notranslate"><span class="pre">parent/child/grandchild</span></code> results in all contents of the <code class="docutils literal notranslate"><span class="pre">grandchild</span></code> directory being recursively included. The files immediately in the <code class="docutils literal notranslate"><span class="pre">/parent</span></code>, <code class="docutils literal notranslate"><span class="pre">/parent/child</span></code> and root directory are also included. See the directory structure in the following diagram:</p>
<div class="figure align-default">
<img alt="Sparse checkout: Specify parent-grandchild-child folder cone pattern." src="../_images/set-sparse-parent-grand-child.png" />
</div>
<p>You can add multiple patterns separated by line breaks.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Exclusion behaviors (<code class="docutils literal notranslate"><span class="pre">!</span></code>) are not supported in Git cone pattern syntax.</p>
</div>
</div>
<div class="section" id="modify-sparse-checkout-settings">
<h3>Modify sparse checkout settings<a class="headerlink" href="#modify-sparse-checkout-settings" title="Permalink to this headline"> </a></h3>
<p>Once a repo is created, the sparse checkout cone pattern can be edited from <strong>Settings &gt; Advanced &gt; Cone patterns</strong>.</p>
<p>Note the following behavior:</p>
<ul>
<li><p>Removing a folder from the cone pattern removes it from Databricks if there are no uncommitted changes.</p></li>
<li><p>Adding a folder via editing the sparse checkout cone pattern adds it to Databricks without requiring an additional pull.</p></li>
<li><p>Sparse checkout patterns cannot be changed to remove a folder when there are uncommitted changes in that folder.</p>
<p>For example, a user edits a file in a folder and does not commit changes. She then tries to change the sparse checkout pattern to not include this folder. In this case, the pattern is accepted, but the actual folder is not deleted. She needs to revert the pattern to include that folder, commit changes, and then reapply the new pattern.</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can’t disable sparse checkout for a repo that was created with Sparse Checkout mode enabled.</p>
</div>
</div>
<div class="section" id="make-and-push-changes-with-sparse-checkout">
<h3>Make and push changes with sparse checkout<a class="headerlink" href="#make-and-push-changes-with-sparse-checkout" title="Permalink to this headline"> </a></h3>
<p>You can edit existing files and commit and push them from the Repos interface. When creating new folders of files, include them in the cone pattern you specified for that repo.</p>
<p>Including a new folder outside of the cone pattern results in an error during the commit and push operation. To fix it, edit the cone pattern to include the new folder you are trying to commit and push.</p>
</div>
</div>
<div class="section" id="control-ipynb-notebook-output-commits">
<span id="notebook-outputs-commit"></span><h2>Control <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> notebook output commits<a class="headerlink" href="#control-ipynb-notebook-output-commits" title="Permalink to this headline"> </a></h2>
<p>To use this feature, you need to enable commit <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> notebook outputs. See <a class="reference internal" href="repos-setup.html#ipynb-repos"><span class="std std-ref">Allow committing .ipynb notebook output</span></a>.</p>
<p>When you commit an <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> file, Databricks can create a config file to help you control how you commit outputs: <code class="docutils literal notranslate"><span class="pre">.databricks/commit_outputs</span></code>.</p>
<ol class="arabic">
<li><p>If you have a .ipynb notebook file but no config file in your repo, open the Git Status modal.</p></li>
<li><p>In the notification, click <strong>Create commit_outputs file.</strong></p>
<div class="figure align-default">
<img alt="Notebook commit UI: Create commit_outputs file button." src="../_images/commit-message-output-option.png" />
</div>
</li>
</ol>
<p>Alternatively, if not present, a config file can also be made from the file menu. The File menu has a status and control allowing you to automatically update the config file to specify including or excluding outputs for a specific notebook.</p>
<ol class="arabic">
<li><p>On the <strong>File</strong> menu, select <strong>Commit notebooks outputs.</strong></p>
<div class="figure align-default">
<img alt="Noteboook editor: Commit notebooks outputs status and control." src="../_images/commit-nb-outputs.png" />
</div>
</li>
<li><p>In the dialog box, confirm your choice to commit notebook outputs.</p>
<div class="figure align-default">
<img alt="Commit notebooks outputs dialog box." src="../_images/commit-nb-outputs-db.png" />
</div>
</li>
</ol>
<div class="section" id="patterns-for-a-repo-config-file">
<h3>Patterns for a repo config file<a class="headerlink" href="#patterns-for-a-repo-config-file" title="Permalink to this headline"> </a></h3>
<p>The commit outputs config file uses patterns similar to <a class="reference external" href="https://git-scm.com/docs/gitignore">gitignore patterns</a> and does the following:</p>
<ul class="simple">
<li><p>Positive patterns enable outputs inclusion for matching notebooks.</p></li>
<li><p>Negative patterns disable outputs inclusion for matching notebooks.</p></li>
<li><p>Patterns are evaluated in order for all notebooks.</p></li>
<li><p>Invalid paths or paths not resolving to <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> notebooks are ignored.</p></li>
</ul>
<p><strong>Positive pattern:</strong> To include outputs from a notebook path <code class="docutils literal notranslate"><span class="pre">folder/innerfolder/notebook.ipynb</span></code>, use following patterns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">**/*</span>
<span class="n">folder</span><span class="o">/**</span>
<span class="n">folder</span><span class="o">/</span><span class="n">innerfolder</span><span class="o">/</span><span class="n">note</span><span class="o">*</span>
</pre></div>
</div>
<p><strong>Negative pattern:</strong> To exclude outputs for a notebook, check that none of the positive patterns match or add a negative pattern in a correct spot of the configuration file. Negative (exclude) patterns start with <code class="docutils literal notranslate"><span class="pre">!</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>!folder/innerfolder/*.ipynb
!folder/**/*.ipynb
!**/notebook.ipynb
</pre></div>
</div>
</div>
</div>
<div class="section" id="use-the-repos-api">
<h2>Use the Repos API<a class="headerlink" href="#use-the-repos-api" title="Permalink to this headline"> </a></h2>
<p>Manage Git provider PATs with the <a class="reference external" href="https://docs.databricks.com/api/workspace/gitcredentials">Repos API</a>.</p>
</div>
<div class="section" id="databricks-repos-best-practices">
<span id="best-practices"></span><h2>Databricks Repos best practices<a class="headerlink" href="#databricks-repos-best-practices" title="Permalink to this headline"> </a></h2>
<p>Databricks Repos (Git folders) effectively behave as embedded Git clients in your workspace. Here are a few best practices you can observe to make team collaboration more effective.</p>
<ol class="arabic simple">
<li><p><strong>Create a Databricks Git folder for each user that integrates with the same Git repository.</strong> Although multiple users can contribute content to a Git folder, only <strong>one</strong> designated user should perform Git operations such as pull, push, commit, and branch switching. If multiple users perform Git operations on a Git folder, branch management can become difficult and error-prone, particularly in a situation where a user switching a branch switches it for all other users. If each user works in their own development branch, each user should set up and use their own Git folder.</p></li>
<li><p><strong>Be aware that a deleted remote branch remains present in the associated Git folder.</strong> After deleting a branch on your Git repository, the local version in your Databricks Repo (Git folder) remains for some time. Local branches in Databricks cannot be deleted, so if you must remove them, you must also delete and reclone the repository.</p></li>
</ol>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../_static/js/localized.js"></script>
  <script type="text/javascript" src="../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>