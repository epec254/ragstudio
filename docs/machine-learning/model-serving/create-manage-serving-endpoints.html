

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to create and configure model serving endpoints that serve custom models and foundation models." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Create and configure model serving endpoints">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Create and configure model serving endpoints &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/machine-learning/model-serving/create-manage-serving-endpoints.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/machine-learning/model-serving/create-manage-serving-endpoints.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/machine-learning/model-serving/create-manage-serving-endpoints.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="top" title="Databricks on AWS" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../../en/machine-learning/model-serving/create-manage-serving-endpoints.html" class="notranslate">English</option>
    <option value="../../../ja/machine-learning/model-serving/create-manage-serving-endpoints.html" class="notranslate">日本語</option>
    <option value="../../../pt/machine-learning/model-serving/create-manage-serving-endpoints.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Create and configure model serving endpoints</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="create-and-configure-model-serving-endpoints">
<h1>Create and configure model serving endpoints<a class="headerlink" href="#create-and-configure-model-serving-endpoints" title="Permalink to this headline"> </a></h1>
<p>This article describes how to create model serving endpoints using the REST API or the Databricks Machine Learning Serving UI</p>
<p>This article includes examples for creating endpoints that serve:</p>
<ul class="simple">
<li><p>Foundation models, which include:</p>
<ul>
<li><p>Third-party foundation models, referred to as <a class="reference internal" href="../../generative-ai/external-models/index.html"><span class="doc">external models</span></a>.</p></li>
<li><p>State-of-the-art open models made available by <a class="reference internal" href="../foundation-models/index.html"><span class="doc">Foundation Model APIs</span></a>.</p></li>
<li><p>Curated foundation models on <a class="reference external" href="https://marketplace.databricks.com/">Databricks Marketplace</a>, an open marketplace for sharing third-party data and AI assets.</p></li>
</ul>
</li>
<li><p>Custom models. MLflow models that are installed in Unity Catalog or registered in the workspace model registry.</p></li>
</ul>
<p>Databricks Model Serving provides the following options for serving endpoint creation:</p>
<ul class="simple">
<li><p>The <a class="reference internal" href="#model-serving-ui"><span class="std std-ref">Serving UI</span></a>.</p></li>
<li><p><a class="reference internal" href="#create-api"><span class="std std-ref">REST API</span></a>.</p></li>
<li><p><a class="reference internal" href="create-serving-endpoints-mlflow.html"><span class="doc">MLflow Deployments API</span></a>.</p></li>
</ul>
<div class="section" id="requirements">
<span id="requirement"></span><h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li><p>Your workspace must be in a <a class="reference internal" href="index.html#regions"><span class="std std-ref">supported region</span></a>.</p></li>
<li><p>If you use custom libraries or libraries from a private mirror server with your model, see <a class="reference internal" href="private-libraries-model-serving.html"><span class="doc">Use custom Python libraries with Model Serving</span></a> before you create the model endpoint.</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If you rely on Anaconda, review the <a class="reference internal" href="#anaconda-notice"><span class="std std-ref">terms of service</span></a> notice for additional information.</p>
</div>
</div>
<div class="section" id="access-control">
<h2>Access control<a class="headerlink" href="#access-control" title="Permalink to this headline"> </a></h2>
<p>To understand access control options for model serving endpoints and best practice guidance for endpoint management, see <a class="reference internal" href="../../security/auth-authz/access-control/serving-endpoint-acl.html"><span class="doc">Serving endpoints access control</span></a>.</p>
</div>
<div class="section" id="create-an-endpoint-using-the-ui">
<span id="model-serving-ui"></span><h2>Create an endpoint using the UI<a class="headerlink" href="#create-an-endpoint-using-the-ui" title="Permalink to this headline"> </a></h2>
<p>You can create an endpoint for model serving with the <strong>Serving</strong> UI.</p>
<ol class="arabic">
<li><p>Click <strong>Serving</strong> in the sidebar to display the Serving UI.</p></li>
<li><p>Click <strong>Create serving endpoint</strong>.</p>
<div class="figure align-default">
<img alt="Model serving pane in Databricks UI" src="../../_images/serving-pane.png" />
</div>
</li>
</ol>
<p>For models registered in the Workspace model registry or models in Unity Catalog:</p>
<ol class="arabic">
<li><p>In the <strong>Name</strong> field provide a name for your endpoint.</p></li>
<li><p>In the <strong>Served entities</strong> section</p>
<ol class="loweralpha simple">
<li><p>Click into the <strong>Entity</strong> field to open the <strong>Select served entity</strong> form.</p></li>
<li><p>Select the type of model you want to serve. The form dynamically updates based on your selection.</p></li>
<li><p>Select which model and model version you want to serve.</p></li>
<li><p>Select the percentage of traffic to route to your served model.</p></li>
<li><p>Select what size compute to use. You can use CPU or GPU computes for your workloads. Support for model serving on GPU is in <a class="reference external" href="/release-notes/release-types.html">Public Preview</a>. See <a class="reference internal" href="#gpu"><span class="std std-ref">GPU workload types</span></a> for more information on available GPU computes.</p></li>
<li><p>Under <strong>Compute Scale-out</strong>, select the size of the compute scale out that corresponds with the number of requests this served model can process at the same time. This number should be roughly equal to QPS x model run time.</p>
<ol class="arabic simple">
<li><p>Available sizes are <strong>Small</strong> for 0-4 requests, <strong>Medium</strong> 8-16 requests, and <strong>Large</strong> for 16-64 requests.</p></li>
</ol>
</li>
<li><p>Specify if the endpoint should scale to zero when not in use.</p></li>
</ol>
</li>
<li><p>Click <strong>Create</strong>. The <strong>Serving endpoints</strong> page appears with <strong>Serving endpoint state</strong> shown as Not Ready.</p>
<div class="figure align-default">
<img alt="Create a model serving endpoint" src="../../_images/create-endpoint1.png" />
</div>
</li>
</ol>
<p>For <a class="reference internal" href="../../generative-ai/external-models/index.html"><span class="doc">foundation models</span></a>:</p>
<ol class="arabic simple">
<li><p>In the <strong>Name</strong> field provide a name for your endpoint.</p></li>
<li><p>In the <strong>Served entities</strong> section</p>
<ol class="loweralpha simple">
<li><p>Click into the <strong>Entity</strong> field to open the <strong>Select served entity</strong> form.</p></li>
<li><p>Select  <strong>External model</strong>.</p></li>
<li><p>Select the model provider you want to use.</p></li>
<li><p>Click <strong>Confirm</strong></p></li>
<li><p>Provide the name of the external model you want to use. The form dynamically updates based on your selection.  See the <a class="reference internal" href="../../generative-ai/external-models/index.html#supported-models"><span class="std std-ref">available external models</span></a>.</p></li>
<li><p>Select the task type. Available tasks are chat, completions, and embeddings.</p></li>
<li><p>Provide the configuration details for accessing the selected model provider. This is typically the API key secret reference you want to use for the endpoint to access this model.</p></li>
</ol>
</li>
<li><p>Click <strong>Create</strong>. The <strong>Serving endpoints</strong> page appears with <strong>Serving endpoint state</strong> shown as Not Ready.</p></li>
</ol>
</div>
<div class="section" id="create-an-endpoint-using-the-api">
<span id="create-api"></span><h2>Create an endpoint using the API<a class="headerlink" href="#create-an-endpoint-using-the-api" title="Permalink to this headline"> </a></h2>
<p>You can create endpoints using the REST API. See <a class="reference external" href="https://docs.databricks.com/api/workspace/servingendpoints/create">POST /api/2.0/serving-endpoints</a> for endpoint configuration parameters.</p>
<p>You can also create endpoints using the MLflow Deployments <code class="docutils literal notranslate"><span class="pre">create_endpoint()</span></code> API. See <a class="reference internal" href="create-serving-endpoints-mlflow.html"><span class="doc">Create and manage serving endpoints using MLflow</span></a>.</p>
<div class="section" id="custom-model-serving-endpoint">
<h3>Custom model serving endpoint<a class="headerlink" href="#custom-model-serving-endpoint" title="Permalink to this headline"> </a></h3>
<p>The following example creates an endpoint that serves the first version of the <code class="docutils literal notranslate"><span class="pre">ads1</span></code> model that is registered in the model registry. To specify a model from Unity Catalog, provide the full model name including parent catalog and schema such as, <code class="docutils literal notranslate"><span class="pre">catalog.schema.example-model</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Databricks supports <a class="reference internal" href="#gpu"><span class="std std-ref">model serving for GPU workloads</span></a> as a Public Preview functionality.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>POST<span class="w"> </span>/api/2.0/serving-endpoints

<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;workspace-model-endpoint&quot;</span>,
<span class="w">  </span><span class="s2">&quot;config&quot;</span>:<span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;served_entities&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">      </span><span class="o">{</span>
<span class="w">        </span><span class="s2">&quot;entity_name&quot;</span>:<span class="w"> </span><span class="s2">&quot;my-ads-model&quot;</span>,
<span class="w">        </span><span class="s2">&quot;entity_version&quot;</span>:<span class="w"> </span><span class="s2">&quot;3&quot;</span>,
<span class="w">        </span><span class="s2">&quot;workload_size&quot;</span>:<span class="w"> </span><span class="s2">&quot;Small&quot;</span>,
<span class="w">        </span><span class="s2">&quot;scale_to_zero_enabled&quot;</span>:<span class="w"> </span><span class="nb">true</span>
<span class="w">      </span><span class="o">}</span>,
<span class="w">      </span><span class="o">{</span>
<span class="w">        </span><span class="s2">&quot;entity_name&quot;</span>:<span class="w"> </span><span class="s2">&quot;my-ads-model&quot;</span>,
<span class="w">        </span><span class="s2">&quot;entity_version&quot;</span>:<span class="w"> </span><span class="s2">&quot;4&quot;</span>,
<span class="w">        </span><span class="s2">&quot;workload_size&quot;</span>:<span class="w"> </span><span class="s2">&quot;Small&quot;</span>,
<span class="w">        </span><span class="s2">&quot;scale_to_zero_enabled&quot;</span>:<span class="w"> </span><span class="nb">true</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">    </span><span class="o">]</span>,
<span class="w">    </span><span class="s2">&quot;traffic_config&quot;</span>:<span class="o">{</span>
<span class="w">      </span><span class="s2">&quot;routes&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">        </span><span class="o">{</span>
<span class="w">          </span><span class="s2">&quot;served_model_name&quot;</span>:<span class="w"> </span><span class="s2">&quot;my-ads-model-3&quot;</span>,
<span class="w">          </span><span class="s2">&quot;traffic_percentage&quot;</span>:<span class="w"> </span><span class="m">100</span>
<span class="w">        </span><span class="o">}</span>,
<span class="w">        </span><span class="o">{</span>
<span class="w">          </span><span class="s2">&quot;served_model_name&quot;</span>:<span class="w"> </span><span class="s2">&quot;my-ads-model-4&quot;</span>,
<span class="w">          </span><span class="s2">&quot;traffic_percentage&quot;</span>:<span class="w"> </span><span class="m">20</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">      </span><span class="o">]</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">  </span><span class="o">}</span>,
<span class="w">  </span><span class="s2">&quot;tags&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">      </span><span class="s2">&quot;key&quot;</span>:<span class="w"> </span><span class="s2">&quot;team&quot;</span>,
<span class="w">      </span><span class="s2">&quot;value&quot;</span>:<span class="w"> </span><span class="s2">&quot;data science&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">  </span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The following is an example response. The endpoint’s <code class="docutils literal notranslate"><span class="pre">config_update</span></code> state is <code class="docutils literal notranslate"><span class="pre">NOT_UPDATING</span></code> and the served model is in a <code class="docutils literal notranslate"><span class="pre">READY</span></code> state.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;workspace-model-endpoint&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;creator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@email.com&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;creation_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1700089637000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;last_updated_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1700089760000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;ready&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;READY&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;config_update&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NOT_UPDATING&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;served_entities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my-ads-model-3&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;entity_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my-ads-model&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;entity_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;workload_size&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Small&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;scale_to_zero_enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;workload_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CPU&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;deployment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DEPLOYMENT_READY&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;deployment_state_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;creator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@email.com&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;creation_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1700089760000</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;traffic_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;routes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;served_model_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my-ads-model-3&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;traffic_percentage&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;config_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;team&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;data science&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e3bd3e471d6045d6b75f384279e4b6ab&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;permission_level&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CAN_MANAGE&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;route_optimized&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="gpu-workload-types">
<span id="gpu"></span><h3>GPU workload types<a class="headerlink" href="#gpu-workload-types" title="Permalink to this headline"> </a></h3>
<div class="preview admonition">
<p class="admonition-title">Preview</p>
<p>This feature is in <a class="reference internal" href="../../release-notes/release-types.html"><span class="doc">Public Preview</span></a>.</p>
</div>
<p>Model serving on Databricks supports GPU deployment of PyTorch and TensorFlow models, as well as models logged with <code class="docutils literal notranslate"><span class="pre">mlflow.pyfunc</span></code>, <code class="docutils literal notranslate"><span class="pre">mlflow.pytorch</span></code>, <code class="docutils literal notranslate"><span class="pre">mlflow.tensorflow</span></code>, and <code class="docutils literal notranslate"><span class="pre">mlflow.transformers</span></code> flavors.</p>
<p>GPU deployment also automatically supports optimized model serving for large language models. See <a class="reference internal" href="llm-optimized-model-serving.html"><span class="doc">Optimized large language model (LLM) serving</span></a>. </p>
<p>This preview capability is compatible with the following package versions:</p>
<ul class="simple">
<li><p>Pytorch 1.13.0 - 2.0.1</p></li>
<li><p>TensorFlow 2.5.0 - 2.13.0</p></li>
<li><p>MLflow 2.4.0 and above</p></li>
</ul>
<p>To deploy your models using GPUs include the <code class="docutils literal notranslate"><span class="pre">workload_type</span></code> field in your endpoint configuration during <a class="reference internal" href="#create-api"><span class="std std-ref">endpoint creation</span></a> or as an endpoint configuration update using the API. To configure your endpoint for GPU workloads with the <strong>Serving</strong> UI, select the desired GPU type from the <strong>Compute Type</strong> dropdown.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;served_entities&quot;</span>:<span class="w"> </span><span class="o">[{</span>
<span class="w">    </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;ads1&quot;</span>,
<span class="w">    </span><span class="s2">&quot;entity_version&quot;</span>:<span class="w"> </span><span class="s2">&quot;2&quot;</span>,
<span class="w">    </span><span class="s2">&quot;workload_type&quot;</span>:<span class="w"> </span><span class="s2">&quot;GPU_MEDIUM&quot;</span>,
<span class="w">    </span><span class="s2">&quot;workload_size&quot;</span>:<span class="w"> </span><span class="s2">&quot;Small&quot;</span>,
<span class="w">    </span><span class="s2">&quot;scale_to_zero_enabled&quot;</span>:<span class="w"> </span>false,
<span class="w">  </span><span class="o">}]</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The following table summarizes the available GPU workload types supported during the Public Preview.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 44%" />
<col style="width: 31%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>GPU workload type</p></th>
<th class="head"><p>GPU instance</p></th>
<th class="head"><p>GPU memory</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">GPU_SMALL</span></code></p></td>
<td><p> 1xT4</p></td>
<td><p> 16GB</p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">GPU_MEDIUM</span></code></p></td>
<td><p> 1xA10G</p></td>
<td><p> 24GB</p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">MULTIGPU_MEDIUM</span></code></p></td>
<td><p> 4xA10G</p></td>
<td><p> 96GB</p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">GPU_MEDIUM_8</span></code></p></td>
<td><p> 8xA10G</p></td>
<td><p> 192GB</p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">GPU_LARGE_8</span></code></p></td>
<td><p> 8xA100-80GB</p></td>
<td><p> 320GB</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="foundation-model-serving-endpoint">
<h3>Foundation model serving endpoint<a class="headerlink" href="#foundation-model-serving-endpoint" title="Permalink to this headline"> </a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The REST API for creating serving endpoints that serve foundation models is in <a class="reference internal" href="../../release-notes/release-types.html"><span class="doc">Public Preview</span></a>.</p>
</div>
<p>The following example creates an endpoint that serves the first version of the <code class="docutils literal notranslate"><span class="pre">text-embedding-ada-002</span></code> model provided by OpenAI.</p>
<p>See <a class="reference external" href="https://docs.databricks.com/api/workspace/servingendpoints/create">POST /api/2.0/serving-endpoints</a> for endpoint configuration parameters.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;openai_endpoint&quot;</span>,
<span class="w">  </span><span class="s2">&quot;config&quot;</span>:<span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;served_entities&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">      </span><span class="o">{</span>
<span class="w">        </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;openai_embeddings&quot;</span>,
<span class="w">        </span><span class="s2">&quot;external_model&quot;</span>:<span class="o">{</span>
<span class="w">          </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;text-embedding-ada-002&quot;</span>,
<span class="w">          </span><span class="s2">&quot;provider&quot;</span>:<span class="w"> </span><span class="s2">&quot;openai&quot;</span>,
<span class="w">          </span><span class="s2">&quot;task&quot;</span>:<span class="w"> </span><span class="s2">&quot;llm/v1/embeddings&quot;</span>,
<span class="w">          </span><span class="s2">&quot;openai_config&quot;</span>:<span class="o">{</span>
<span class="w">            </span><span class="s2">&quot;openai_api_key&quot;</span>:<span class="w"> </span><span class="s2">&quot;{{secrets/my_scope/my_openai_api_key}}&quot;</span>
<span class="w">          </span><span class="o">}</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">    </span><span class="o">]</span>
<span class="w">  </span><span class="o">}</span>,
<span class="w">  </span><span class="s2">&quot;rate_limits&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">      </span><span class="s2">&quot;calls&quot;</span>:<span class="w"> </span><span class="m">100</span>,
<span class="w">      </span><span class="s2">&quot;key&quot;</span>:<span class="w"> </span><span class="s2">&quot;user&quot;</span>,
<span class="w">      </span><span class="s2">&quot;renewal_period&quot;</span>:<span class="w"> </span><span class="s2">&quot;minute&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">  </span><span class="o">]</span>,
<span class="w">  </span><span class="s2">&quot;tags&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">      </span><span class="s2">&quot;key&quot;</span>:<span class="w"> </span><span class="s2">&quot;team&quot;</span>,
<span class="w">      </span><span class="s2">&quot;value&quot;</span>:<span class="w"> </span><span class="s2">&quot;gen-ai&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">  </span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The following is an example response.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;openai_endpoint&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;creator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@email.com&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;creation_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1699617587000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;last_updated_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1699617587000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;ready&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;READY&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;served_entities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;openai_embeddings&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;external_model&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;openai&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text-embedding-ada-002&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;task&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;llm/v1/embeddings&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;openai_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;openai_api_key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{secrets/my_scope/my_openai_api_key}}&quot;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;deployment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DEPLOYMENT_READY&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;deployment_state_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;creator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@email.com&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;creation_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1699617587000</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;traffic_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;routes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;served_model_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;openai_embeddings&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;traffic_percentage&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;config_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;team&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gen-ai&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;69962db6b9db47c4a8a222d2ac79d7f8&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;permission_level&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CAN_MANAGE&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;route_optimized&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="modify-a-custom-model-endpoint">
<span id="endpoint-config"></span><h2>Modify a custom model endpoint<a class="headerlink" href="#modify-a-custom-model-endpoint" title="Permalink to this headline"> </a></h2>
<p>After enabling a custom model endpoint, you can update the compute configuration as desired with the API or the UI. This configuration is particularly helpful if you need additional resources for your model. Workload size and compute configuration play a key role in what resources are allocated for serving your model. See <a class="reference external" href="https://docs.databricks.com/api/workspace/servingendpoints/updateconfig">PUT /api/2.0/serving-endpoints/{name}/config</a>.</p>
<p>Until the new configuration is ready, the old configuration keeps serving prediction traffic. While there is an update in progress, another update cannot be made.</p>
<p>You can also:</p>
<ul class="simple">
<li><p><a class="reference internal" href="serve-multiple-models-to-serving-endpoint.html"><span class="doc">Configure your endpoint to serve multiple models</span></a>.</p></li>
<li><p><a class="reference internal" href="store-env-variable-model-serving.html"><span class="doc">Configure your endpoint to access external resources using Databricks Secrets</span></a>.</p></li>
<li><p><a class="reference internal" href="enable-model-serving-inference-tables.html"><span class="doc">Enable inference tables</span></a> to automatically capture incoming requests and outgoing responses to your model serving endpoints.</p></li>
</ul>
<div class="section" id="ui-workflow">
<h3>UI workflow<a class="headerlink" href="#ui-workflow" title="Permalink to this headline"> </a></h3>
<p>After you enable a model endpoint, select <strong>Edit endpoint</strong> to modify the compute configuration of your endpoint.</p>
<p>For custom model endpoints, you can do the following:</p>
<ul class="simple">
<li><p>Choose from a few workload sizes, and autoscaling is automatically configured within the workload size.</p></li>
<li><p>Specify if your endpoint should scale down to zero when not in use.</p></li>
<li><p>Modify the percent of traffic to route to your served model.</p></li>
</ul>
</div>
<div class="section" id="api-workflow">
<h3>API workflow<a class="headerlink" href="#api-workflow" title="Permalink to this headline"> </a></h3>
<p>The following is an endpoint configuration update example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>PUT<span class="w"> </span>/api/2.0/serving-endpoints/<span class="o">{</span>name<span class="o">}</span>/config

<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;workspace-model-endpoint&quot;</span>,
<span class="w">  </span><span class="s2">&quot;config&quot;</span>:<span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;served_entities&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">      </span><span class="o">{</span>
<span class="w">        </span><span class="s2">&quot;entity_name&quot;</span>:<span class="w"> </span><span class="s2">&quot;my-ads-model&quot;</span>,
<span class="w">        </span><span class="s2">&quot;entity_version&quot;</span>:<span class="w"> </span><span class="s2">&quot;5&quot;</span>,
<span class="w">        </span><span class="s2">&quot;workload_size&quot;</span>:<span class="w"> </span><span class="s2">&quot;Small&quot;</span>,
<span class="w">        </span><span class="s2">&quot;scale_to_zero_enabled&quot;</span>:<span class="w"> </span><span class="nb">true</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">    </span><span class="o">]</span>,
<span class="w">    </span><span class="s2">&quot;traffic_config&quot;</span>:<span class="o">{</span>
<span class="w">      </span><span class="s2">&quot;routes&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">        </span><span class="o">{</span>
<span class="w">          </span><span class="s2">&quot;served_model_name&quot;</span>:<span class="w"> </span><span class="s2">&quot;my-ads-model-5&quot;</span>,
<span class="w">          </span><span class="s2">&quot;traffic_percentage&quot;</span>:<span class="w"> </span><span class="m">100</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">      </span><span class="o">]</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">  </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The following is a response example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;workspace-model-endpoint&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;creator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@email.com&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;creation_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1700089637000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;last_updated_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1700089760000</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;ready&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;NOT_READY&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;config_update&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;IN_PROGRESS&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;served_entities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my-ads-model-3&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;entity_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my-ads-model&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;entity_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;workload_size&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Small&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;scale_to_zero_enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;workload_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CPU&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;deployment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DEPLOYMENT_READY&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;deployment_state_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;creator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@email.com&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;creation_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1700089760000</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my-ads-model-4&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;entity_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my-ads-model&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;entity_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;workload_size&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Small&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;scale_to_zero_enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;workload_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CPU&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;deployment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DEPLOYMENT_READY&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;deployment_state_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;creator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@email.com&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;creation_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1700089760000</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;traffic_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;routes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;served_model_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my-ads-model-3&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;traffic_percentage&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;served_model_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my-ads-model-4&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;traffic_percentage&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;config_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;pending_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;start_time&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1700089637000</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;served_entities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my-ads-model-5&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;entity_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my-ads-model&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;entity_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;5&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;workload_size&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Small&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;scale_to_zero_enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;workload_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CPU&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;deployment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DEPLOYMENT_CREATING&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;deployment_state_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Creating resources for served entity.&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;creator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@email.com&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;creation_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1700089637000</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;config_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;traffic_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;routes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">       </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;traffic_percentage&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;served_model_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;my-ads-model-5&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">     </span><span class="p">]</span>
<span class="w">   </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;e3bd3e471d6045d6b75f384279e4b6ab&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;permission_level&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CAN_MANAGE&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;route_optimized&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="modify-a-foundation-model-endpoint">
<span id="external-endpoint-config"></span><h2>Modify a foundation model endpoint<a class="headerlink" href="#modify-a-foundation-model-endpoint" title="Permalink to this headline"> </a></h2>
<p>After enabling a model endpoint, you can set the compute configuration as desired. This configuration is particularly helpful if you need additional resources for your model. Workload size and compute configuration play a key role in what resources are allocated for serving your model.</p>
<p>Until the new configuration is ready, the old configuration keeps serving prediction traffic. While there is an update in progress, another update cannot be made.</p>
<p>When an <code class="docutils literal notranslate"><span class="pre">external_model</span></code> is present in an endpoint configuration, the served entities list can only have one <code class="docutils literal notranslate"><span class="pre">served_entity</span></code> object. Existing endpoints with an <code class="docutils literal notranslate"><span class="pre">external_model</span></code> can not be updated to no longer have an <code class="docutils literal notranslate"><span class="pre">external_model</span></code>. If the endpoint is created without an <code class="docutils literal notranslate"><span class="pre">external_model</span></code>, you cannot update it to add an <code class="docutils literal notranslate"><span class="pre">external_model</span></code>.</p>
<p>The following is an example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;openai_endpoint&quot;</span>,
<span class="w">  </span><span class="s2">&quot;served_entities&quot;</span>:<span class="o">[</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">      </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;openai_chat&quot;</span>,
<span class="w">      </span><span class="s2">&quot;external_model&quot;</span>:<span class="o">{</span>
<span class="w">        </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;gpt-4&quot;</span>,
<span class="w">        </span><span class="s2">&quot;provider&quot;</span>:<span class="w"> </span><span class="s2">&quot;openai&quot;</span>,
<span class="w">        </span><span class="s2">&quot;task&quot;</span>:<span class="w"> </span><span class="s2">&quot;llm/v1/chat&quot;</span>,
<span class="w">        </span><span class="s2">&quot;openai_config&quot;</span>:<span class="o">{</span>
<span class="w">          </span><span class="s2">&quot;openai_api_key&quot;</span>:<span class="w"> </span><span class="s2">&quot;{{secrets/my_scope/my_openai_api_key}}&quot;</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">  </span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The following is an example response:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;openai_endpoint&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;creator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@email.com&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;creation_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1699617587000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;last_updated_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1699617587000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;ready&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;READY&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;served_entities&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;openai_chat&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;external_model&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;openai&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gpt-4&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;task&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;llm/v1/chat&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;openai_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;openai_api_key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{secrets/my_scope/my_openai_api_key}}&quot;</span>
<span class="w">         </span><span class="p">}</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;deployment&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DEPLOYMENT_READY&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;deployment_state_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;creator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user@email.com&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;creation_timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1699617587000</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;traffic_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;routes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;served_model_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;openai_chat&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;traffic_percentage&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;config_version&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;69962db6b9db47c4a8a222d2ac79d7f8&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;permission_level&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CAN_MANAGE&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;route_optimized&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="scoring-a-model-endpoint">
<span id="score"></span><h2>Scoring a model endpoint<a class="headerlink" href="#scoring-a-model-endpoint" title="Permalink to this headline"> </a></h2>
<p>To score your model, you can send requests to the model serving endpoint. See <a class="reference internal" href="score-model-serving-endpoints.html"><span class="doc">Query serving endpoints using the REST API</span></a> to learn about recommendations and accepted formats.</p>
</div>
<div class="section" id="expectations-and-limitations">
<h2>Expectations and limitations<a class="headerlink" href="#expectations-and-limitations" title="Permalink to this headline"> </a></h2>
<p>The following sections describe known expectations and limitations for Model Serving workflows.</p>
<div class="section" id="endpoint-creation-and-update-expectations">
<h3>Endpoint creation and update expectations<a class="headerlink" href="#endpoint-creation-and-update-expectations" title="Permalink to this headline"> </a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The information in this section does not apply to endpoints that serve foundation models.</p>
</div>
<p>Deploying a newly registered model version involves packaging the model and its model environment and provisioning the model endpoint itself. This process can take approximately 10 minutes.</p>
<p>Databricks performs a zero-downtime update of endpoints by keeping the existing endpoint configuration up until the new one becomes ready. Doing so reduces risk of interruption for endpoints that are in use.</p>
<p>If model computation takes longer than 120 seconds, requests will time out. If you believe your model computation will take longer than 120 seconds, reach out to your Databricks support contact.</p>
</div>
<div class="section" id="endpoint-scale-up-and-scale-down-expectations">
<h3>Endpoint scale up and scale down expectations<a class="headerlink" href="#endpoint-scale-up-and-scale-down-expectations" title="Permalink to this headline"> </a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The information in this section does not apply to endpoints that serve foundation models.</p>
</div>
<p>Serving endpoints scale up and down based on the volume of traffic coming into the endpoint and the capacity of the currently provisioned concurrency units.</p>
<p>Provisioned concurrency is the maximum number of parallel requests that the system can handle. You can estimate the required provisioned concurrency using the formula: <strong>provisioned concurrency</strong> = queries per second (QPS) * model execution time (s).</p>
<p>When traffic increases, an endpoint attempts to scale up almost immediately, depending on the size of the traffic volume increase. When traffic decreases, Databricks makes an attempt every five minutes to scale down to a concurrency size that represents the current volume of traffic.</p>
<p>When an endpoint has scale to zero enabled, it scales down to zero after 30 minutes of observing no traffic to the endpoint. When an endpoint has scaled down to zero, the first request experiences what’s known as a “cold start”. This implies a higher latency than the median latency per request for this first request. If this feature is used with a latency-sensitive application, Databricks recommends either not scaling to zero or sending warmup requests to the endpoint before user-facing traffic arrives at your service.</p>
</div>
<div class="section" id="gpu-workload-limitations">
<h3>GPU workload limitations<a class="headerlink" href="#gpu-workload-limitations" title="Permalink to this headline"> </a></h3>
<p>The following are limitations for serving endpoints with GPU workloads during Public Preview:</p>
<ul class="simple">
<li><p>Container image creation for GPU serving takes longer than image creation for CPU serving due to model size and increased installation requirements for models served on GPU.</p></li>
<li><p>When deploying very large models, the deployment process might timeout if the container build and model deployment exceed a 60-minute duration. Should this occur, initiating a retry of the process should successfully deploy the model.</p></li>
<li><p>Autoscaling for GPU serving takes longer than for CPU serving.</p></li>
<li><p>Endpoints configured with GPU workloads do not support scale to zero.</p></li>
<li><p>This functionality is not available in <code class="docutils literal notranslate"><span class="pre">ap-southeast-1</span></code>.</p></li>
</ul>
</div>
</div>
<div class="section" id="additional-resources">
<h2>Additional resources<a class="headerlink" href="#additional-resources" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="manage-serving-endpoints.html"><span class="doc">Manage model serving endpoints</span></a></p></li>
<li><p><a class="reference internal" href="score-model-serving-endpoints.html"><span class="doc">Query serving endpoints using the REST API</span></a></p></li>
<li><p><a class="reference internal" href="../../generative-ai/external-models/index.html"><span class="doc">External models in Databricks Model Serving</span></a>.</p></li>
</ul>
</div>
<div class="section" id="notebook-examples">
<span id="example-notebooks"></span><h2>Notebook examples<a class="headerlink" href="#notebook-examples" title="Permalink to this headline"> </a></h2>
<p>The following notebooks include different Databricks registered models that you can use to get up and running with model serving endpoints.</p>
<p>The model examples can be imported into the workspace by following the directions in <a class="reference internal" href="../../notebooks/notebook-export-import.html#import-notebook"><span class="std std-ref">Import a notebook</span></a>. After you choose and create a model from one of the examples, <a class="reference internal" href="../manage-model-lifecycle/index.html"><span class="doc">register it in the MLflow Model Registry</span></a>, and then follow the <a class="reference internal" href="#model-serving-ui"><span class="std std-ref">UI workflow</span></a> steps for model serving.</p>
<div class="embedded-notebook-section section" id="train-and-register-a-scikit-learn-model-for-model-serving-notebook">
<span id="train-register-scikit-model-serving"></span><h3>Train and register a scikit-learn model for model serving notebook<a class="headerlink" href="#train-and-register-a-scikit-learn-model-for-model-serving-notebook" title="Permalink to this headline"> </a></h3>
<div class="embedded-notebook">
    <p class="notebook-import-help">
        <a href="/_extras/notebooks/source/machine-learning/train-register-scikit-model-serving.html"            target="_blank">Open notebook in new tab</a>
        <button class="embedded-notebook-copy-to-clipboard"                copy-path-to-clipboard-on-click="/_extras/notebooks/source/machine-learning/train-register-scikit-model-serving.html">            <img src="/_static/clippy.svg"                alt="Copy to clipboard">            Copy link for import        </button>    <div class="embedded-notebook-container">        <div class="loading-spinner"></div>        <iframe data-src="/_extras/notebooks/source/machine-learning/train-register-scikit-model-serving.html"            id="e198a21f40dd3e25d8bf5f67524af46d97123c7b010f901a89ad3b60b5f2984e" height="1000px" width="100%"            style="overflow-y:hidden;" scrolling="no"></iframe>    </div></div></div>
<div class="embedded-notebook-section section" id="train-and-register-a-huggingface-model-for-model-serving-notebook">
<span id="train-register-hugging-face-model-serving"></span><h3>Train and register a HuggingFace model for model serving notebook<a class="headerlink" href="#train-and-register-a-huggingface-model-for-model-serving-notebook" title="Permalink to this headline"> </a></h3>
<div class="embedded-notebook">
    <p class="notebook-import-help">
        <a href="/_extras/notebooks/source/machine-learning/train-register-hugging-face-model-serving.html"            target="_blank">Open notebook in new tab</a>
        <button class="embedded-notebook-copy-to-clipboard"                copy-path-to-clipboard-on-click="/_extras/notebooks/source/machine-learning/train-register-hugging-face-model-serving.html">            <img src="/_static/clippy.svg"                alt="Copy to clipboard">            Copy link for import        </button>    <div class="embedded-notebook-container">        <div class="loading-spinner"></div>        <iframe data-src="/_extras/notebooks/source/machine-learning/train-register-hugging-face-model-serving.html"            id="d02a972474941f1946bb807d086f22398b6aaf7a6a48bfbdeff98872830bebae" height="1000px" width="100%"            style="overflow-y:hidden;" scrolling="no"></iframe>    </div></div></div>
<p></p>
</div>
<div class="section" id="anaconda-licensing-update">
<span id="anaconda-notice"></span><h2>Anaconda licensing update<a class="headerlink" href="#anaconda-licensing-update" title="Permalink to this headline"> </a></h2>
<p>The following notice is for customers relying on Anaconda.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Anaconda Inc. updated their <a class="reference external" href="https://www.anaconda.com/terms-of-service">terms of service</a> for anaconda.org channels. Based on the new terms of service you may require a commercial license if you rely on Anaconda’s packaging and distribution. See <a class="reference external" href="https://www.anaconda.com/blog/anaconda-commercial-edition-faq">Anaconda Commercial Edition FAQ</a> for more information. Your use of any Anaconda channels is governed by their terms of service.</p>
<p>MLflow models logged before <a class="reference external" href="https://mlflow.org/news/2021/06/18/1.18.0-release/index.html">v1.18</a> (Databricks Runtime 8.3 ML or earlier) were by default logged with the conda <code class="docutils literal notranslate"><span class="pre">defaults</span></code> channel (<a class="reference external" href="https://repo.anaconda.com/pkgs/">https://repo.anaconda.com/pkgs/</a>) as a dependency. Because of this license change, Databricks has stopped the use of the <code class="docutils literal notranslate"><span class="pre">defaults</span></code> channel for models logged using MLflow v1.18 and above. The default channel logged is now <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code>, which points at the community managed <a class="reference external" href="https://conda-forge.org/">https://conda-forge.org/</a>.</p>
<p>If you logged a model before MLflow v1.18 without excluding the <code class="docutils literal notranslate"><span class="pre">defaults</span></code> channel from the conda environment for the model, that model may have a dependency on the <code class="docutils literal notranslate"><span class="pre">defaults</span></code> channel that you may not have intended.
To manually confirm whether a model has this dependency, you can examine <code class="docutils literal notranslate"><span class="pre">channel</span></code> value in the <code class="docutils literal notranslate"><span class="pre">conda.yaml</span></code> file that is packaged with the logged model. For example, a model’s <code class="docutils literal notranslate"><span class="pre">conda.yaml</span></code> with a <code class="docutils literal notranslate"><span class="pre">defaults</span></code> channel dependency may look like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">channels</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">defaults</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python=3.8.8</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pip</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlflow</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">scikit-learn==0.23.2</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cloudpickle==1.6.0</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mlflow-env</span>
</pre></div>
</div>
<p>Because Databricks can not determine whether your use of the Anaconda repository to interact with your models is permitted under your relationship with Anaconda, Databricks is not forcing its customers to make any changes. If your use of the Anaconda.com repo through the use of Databricks is permitted under Anaconda’s terms, you do not need to take any action.</p>
<p>If you would like to change the channel used in a model’s environment, you can re-register the model to the model registry with a new <code class="docutils literal notranslate"><span class="pre">conda.yaml</span></code>. You can do this by specifying the channel in the <code class="docutils literal notranslate"><span class="pre">conda_env</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">log_model()</span></code>.</p>
<p>For more information on the <code class="docutils literal notranslate"><span class="pre">log_model()</span></code> API, see the MLflow documentation for the model flavor you are working with, for example, <a class="reference external" href="https://www.mlflow.org/docs/latest/python_api/mlflow.sklearn.html#mlflow.sklearn.log_model">log_model for scikit-learn</a>.</p>
<p>For more information on <code class="docutils literal notranslate"><span class="pre">conda.yaml</span></code> files, see the <a class="reference external" href="https://www.mlflow.org/docs/latest/models.html#additional-logged-files">MLflow documentation</a>.</p>
</div>
<div class="toctree-wrapper compound">
</div>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../../_static/js/localized.js"></script>
  <script type="text/javascript" src="../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>