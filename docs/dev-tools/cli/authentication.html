

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to set up authentication between the Databricks CLI and your Databricks accounts and workspaces." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Authentication for the Databricks CLI">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Authentication for the Databricks CLI &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/dev-tools/cli/authentication.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/dev-tools/cli/authentication.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/dev-tools/cli/authentication.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="top" title="Databricks on AWS" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../../en/dev-tools/cli/authentication.html" class="notranslate">English</option>
    <option value="../../../ja/dev-tools/cli/authentication.html" class="notranslate">日本語</option>
    <option value="../../../pt/dev-tools/cli/authentication.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Authentication for the Databricks CLI</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="authentication-for-the-databricks-cli">
<h1>Authentication for the Databricks CLI<a class="headerlink" href="#authentication-for-the-databricks-cli" title="Permalink to this headline"> </a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This information applies to Databricks CLI versions 0.205 and above, which are in <a class="reference internal" href="../../release-notes/release-types.html"><span class="doc">Public Preview</span></a>. To find your version of the Databricks CLI, run <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">-v</span></code>.</p>
</div>
<p>This article describes how to set up authentication between the Databricks CLI and your Databricks accounts and workspaces. See <a class="reference internal" href="index.html"><span class="doc">What is the Databricks CLI?</span></a>.</p>
<p>This article assumes that you have already installed the Databricks CLI. See <a class="reference internal" href="install.html"><span class="doc">Install or update the Databricks CLI</span></a>.</p>
<p>Before you can run Databricks CLI commands, you must set up <a class="reference internal" href="../auth/index.html"><span class="doc">authentication</span></a> between the Databricks CLI and your Databricks accounts, workspaces, or a combination of these, depending on the types of CLI commands that you want to run.</p>
<p>You must authenticate the Databricks CLI to the relevant resources at run time in order to run Databricks automation commands within a Databricks account or workspace. Depending on whether you want to call Databricks workspace-level commands, Databricks account-level commands, or both, you must authenticate to the Databricks workspace, account, or both. For a list of Databricks workspace-level and account-level CLI command groups, run the command <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">-h</span></code>. For a list of Databricks workspace-level and account-level REST API operations that the Databricks CLI commands cover, see the <a class="reference external" href="/api">Databricks REST API</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Databricks CLI implements the <em>Databricks client unified authentication</em> standard, a consolidated and consistent architecural and programmatic approach to authentication. This approach helps make setting up and automating authentication with Databricks more centralized and predictable. It enables you to configure Databricks authentication once and then use that configuration across multiple Databricks tools and SDKs without further authentication configuration changes. For more information about this standard, see <a class="reference internal" href="../auth/index.html#unified-auth"><span class="std std-ref">Databricks client unified authentication</span></a>.</p>
</div>
<p>The following sections provide information about how to set up authentication between the Databricks CLI and Databricks:</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#databricks-personal-access-token-authentication" id="id1">Databricks personal access token authentication</a></p></li>
<li><p><a class="reference internal" href="#basic-authentication-legacy" id="id2">Basic authentication (legacy)</a></p></li>
<li><p><a class="reference internal" href="#oauth-machine-to-machine-m2m-authentication" id="id3">OAuth machine-to-machine (M2M) authentication</a></p></li>
<li><p><a class="reference internal" href="#oauth-user-to-machine-u2m-authentication" id="id4">OAuth user-to-machine (U2M) authentication</a></p></li>
<li><p><a class="reference internal" href="#authentication-order-of-evaluation" id="id5">Authentication order of evaluation</a></p></li>
</ul>
</div>
<div class="section" id="databricks-personal-access-token-authentication">
<span id="token-auth"></span><h2><a class="toc-backref" href="#id1">Databricks personal access token authentication</a><a class="headerlink" href="#databricks-personal-access-token-authentication" title="Permalink to this headline"> </a></h2>
<p><em>Databricks personal access token</em> authentication uses a Databricks personal access token to authenticate the target Databricks entity, such as a Databricks user account or a Databricks service principal. See also <a class="reference internal" href="../auth/pat.html"><span class="doc">Databricks personal access token authentication</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You cannot use Databricks personal access token authentication for authenticating with a Databricks account, as Databricks account-level commands do not use Databricks personal access tokens for authentication. To authenticate with a Databricks account, consider using one of the following authentication types instead:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#basic-auth"><span class="std std-ref">Basic authentication (legacy)</span></a></p></li>
<li><p><a class="reference internal" href="#m2m-auth"><span class="std std-ref">OAuth machine-to-machine (M2M) authentication</span></a></p></li>
<li><p><a class="reference internal" href="#u2m-auth"><span class="std std-ref">OAuth user-to-machine (U2M) authentication</span></a></p></li>
</ul>
</div>
<p>To create a personal access token, do the following:</p>
<ol class="arabic simple">
<li><p>In your Databricks workspace, click your Databricks username in the top bar, and then select <strong>User Settings</strong> from the drop down.</p></li>
<li><p>Click <strong>Developer</strong>.</p></li>
<li><p>Next to <strong>Access tokens</strong>, click <strong>Manage</strong>.</p></li>
<li><p>Click <strong>Generate new token</strong>.</p></li>
<li><p>(Optional) Enter a comment that helps you to identify this token in the future, and change the token’s default lifetime of 90 days. To create a token with no lifetime (not recommended), leave the <strong>Lifetime (days)</strong> box empty (blank).</p></li>
<li><p>Click <strong>Generate</strong>.</p></li>
<li><p>Copy the displayed token to a secure location, and then click <strong>Done</strong>.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be sure to save the copied token in a secure location. Do not share your copied token with others. If you lose the copied token, you cannot regenerate that exact same token. Instead, you must repeat this procedure to create a new token. If you lose the copied token, or you believe that the token has been compromised, Databricks strongly recommends that you immediately delete that token from your workspace by clicking the trash can (<strong>Revoke</strong>) icon next to the token on the <strong>Access tokens</strong> page.</p>
<p>If you are not able to create or use tokens in your workspace, this might be because your workspace administrator has disabled tokens or has not given you permission to create or use tokens. See your workspace administrator or the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../administration-guide/access-control/tokens.html#enable-tokens"><span class="std std-ref">Enable or disable personal access token authentication for the workspace</span></a></p></li>
<li><p><a class="reference internal" href="../../security/auth-authz/api-access-permissions.html#pat"><span class="std std-ref">Personal access token permissions</span></a></p></li>
</ul>
</div>
<p>To configure and use Databricks personal access token authentication, do the following:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following procedure creates a Databricks configuration profile with the name <code class="docutils literal notranslate"><span class="pre">DEFAULT</span></code>. If you already have a <code class="docutils literal notranslate"><span class="pre">DEFAULT</span></code> configuration profile that you want to use, then skip this procedure. Otherwise, this procedure overwrites your existing <code class="docutils literal notranslate"><span class="pre">DEFAULT</span></code> configuration profile. To view the names and hosts of any existing configuration profiles, run the command <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">auth</span> <span class="pre">profiles</span></code>.</p>
<p>To create a configuration profile with a name other than <code class="docutils literal notranslate"><span class="pre">DEFAULT</span></code>, add <code class="docutils literal notranslate"><span class="pre">--profile</span> <span class="pre">&lt;configuration-profile-name&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">&lt;configuration-profile-name&gt;</span></code> to the end of the following <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">configure</span></code> command, replacing <code class="docutils literal notranslate"><span class="pre">&lt;configuration-profile-name&gt;</span></code> with the new configuration profile’s name.</p>
</div>
<ol class="arabic">
<li><p>Use the Databricks CLI to run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>databricks<span class="w"> </span>configure
</pre></div>
</div>
</li>
<li><p>For the prompt <strong>Databricks Host</strong>, enter your Databricks <a class="reference internal" href="../../workspace/workspace-details.html#workspace-url"><span class="std std-ref">workspace instance URL</span></a>, for example <code class="docutils literal notranslate"><span class="pre">https://dbc-a1b2345c-d6e7.cloud.databricks.com</span></code>.</p></li>
<li><p>For the prompt <strong>Personal Access Token</strong>, enter the Databricks personal access token for your workspace.</p>
<p>After you enter your Databricks personal access token, a corresponding configuration profile is added to your <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file. If the Databricks CLI cannot find this file in its default location, it creates this file for you first and then adds this configuration profile to the new file. The default location for this file is in your <code class="docutils literal notranslate"><span class="pre">~</span></code> (your user home) folder on Unix, Linux, or macOS, or your <code class="docutils literal notranslate"><span class="pre">%USERPROFILE%</span></code> (your user home) folder on Windows.</p>
</li>
<li><p>You can now use the Databricks CLI’s <code class="docutils literal notranslate"><span class="pre">--profile</span></code> or <code class="docutils literal notranslate"><span class="pre">-p</span></code> option followed by the name of your configuration profile, as part of the Databricks CLI command call, for example <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">clusters</span> <span class="pre">list</span> <span class="pre">-p</span> <span class="pre">&lt;configuration-profile-name&gt;</span></code>.</p></li>
</ol>
</div>
<div class="section" id="basic-authentication-legacy">
<span id="basic-auth"></span><h2><a class="toc-backref" href="#id2">Basic authentication (legacy)</a><a class="headerlink" href="#basic-authentication-legacy" title="Permalink to this headline"> </a></h2>
<p><em>Basic</em> authentication uses a Databricks username and password to authenticate the target Databricks user account. Basic authentication is legacy and not recommended in production. See also <a class="reference internal" href="../auth/basic.html"><span class="doc">Basic authentication (legacy)</span></a>.</p>
<p>To configure and use basic authentication, do the following:</p>
<ol class="arabic">
<li><p>Create or identify a Databricks <a class="reference internal" href="../auth/index.html#config-profiles"><span class="std std-ref">configuration profile</span></a> with the following fields in your <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file. If you create the profile, replace the placeholders with the appropriate values.</p>
<p>For account-level commands, set the following values in your <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[&lt;some-unique-configuration-profile-name&gt;]
host       = &lt;account-console-url&gt;
account_id = &lt;account-id&gt;
username   = &lt;username&gt;
password   = &lt;password&gt;
</pre></div>
</div>
<p>For workspace-level commands, set the following values in your <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[&lt;some-unique-configuration-profile-name&gt;]
host       = &lt;workspace-url&gt;
username   = &lt;username&gt;
password   = &lt;password&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default location for the <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file is in the user’s home directory. This is <code class="docutils literal notranslate"><span class="pre">~</span></code> for Linux and macOS, and <code class="docutils literal notranslate"><span class="pre">%USERPROFILE%</span></code> for Windows.</p>
</div>
</li>
<li><p>Use the Databricks CLI’s <code class="docutils literal notranslate"><span class="pre">--profile</span></code> or <code class="docutils literal notranslate"><span class="pre">-p</span></code> option followed by the name of your configuration profile, as part of the Databricks CLI command call, for example <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">account</span> <span class="pre">groups</span> <span class="pre">list</span> <span class="pre">-p</span> <span class="pre">&lt;configuration-profile-name&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">clusters</span> <span class="pre">list</span> <span class="pre">-p</span> <span class="pre">&lt;configuration-profile-name&gt;</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can press <code class="docutils literal notranslate"><span class="pre">Tab</span></code> after <code class="docutils literal notranslate"><span class="pre">--profile</span></code> or <code class="docutils literal notranslate"><span class="pre">-p</span></code> to display a list of existing available configuration profiles to choose from, instead of entering the configuration profile name manually.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="oauth-machine-to-machine-m2m-authentication">
<span id="m2m-auth"></span><h2><a class="toc-backref" href="#id3">OAuth machine-to-machine (M2M) authentication</a><a class="headerlink" href="#oauth-machine-to-machine-m2m-authentication" title="Permalink to this headline"> </a></h2>
<p>Instead of authenticating with Databricks by using <a class="reference internal" href="#token-auth"><span class="std std-ref">Databricks personal access token authentication</span></a>, you can use OAuth authentication. OAuth provides tokens with faster expiration times than Databricks personal access tokens, and offers better server-side session invalidation and scoping. Because OAuth access tokens expire in less than an hour, this reduces the risk associated with accidentally checking tokens into source control. See also <a class="reference internal" href="../auth/oauth-m2m.html"><span class="doc">OAuth machine-to-machine (M2M) authentication</span></a>.</p>
<p>To configure and use OAuth M2M authentication, do the following:</p>
<ol class="arabic">
<li><p>Complete the OAuth M2M authentication setup instructions. See Steps 1–2 in <a class="reference internal" href="../authentication-oauth.html"><span class="doc">Authentication using OAuth for service principals</span></a>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>You only need to complete Steps 1–2 in the preceding article’s instructions.</p>
<p>Step 3 in that article covers manually creating OAuth access tokens; however, the Databricks CLI automatically creates and manages OAuth access tokens for your target Databricks service principal on your behalf. Step 4 in that article covers using <code class="docutils literal notranslate"><span class="pre">curl</span></code> to call the Databricks REST API, instead of using the Databricks CLI.</p>
</div>
</li>
<li><p>Create or identify a Databricks <a class="reference internal" href="../auth/index.html#config-profiles"><span class="std std-ref">configuration profile</span></a> with the following fields in your <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file. If you create the profile, replace the placeholders with the appropriate values.</p>
<p>For account-level commands, set the following values in your <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[&lt;some-unique-configuration-profile-name&gt;]
host          = &lt;account-console-url&gt;
account_id    = &lt;account-id&gt;
client_id     = &lt;service-principal-client-id&gt;
client_secret = &lt;service-principal-oauth-secret&gt;
</pre></div>
</div>
<p>For workspace-level commands, set the following values in your <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[&lt;some-unique-configuration-profile-name&gt;]
host          = &lt;workspace-url&gt;
client_id     = &lt;service-principal-client-id&gt;
client_secret = &lt;service-principal-oauth-secret&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default location for the <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file is in the user’s home directory. This is <code class="docutils literal notranslate"><span class="pre">~</span></code> for Linux and macOS, and <code class="docutils literal notranslate"><span class="pre">%USERPROFILE%</span></code> for Windows.</p>
</div>
</li>
<li><p>Use the Databricks CLI’s <code class="docutils literal notranslate"><span class="pre">--profile</span></code> or <code class="docutils literal notranslate"><span class="pre">-p</span></code> option followed by the name of your configuration profile, as part of the Databricks CLI command call, for example <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">account</span> <span class="pre">groups</span> <span class="pre">list</span> <span class="pre">-p</span> <span class="pre">&lt;configuration-profile-name&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">clusters</span> <span class="pre">list</span> <span class="pre">-p</span> <span class="pre">&lt;configuration-profile-name&gt;</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can press <code class="docutils literal notranslate"><span class="pre">Tab</span></code> after <code class="docutils literal notranslate"><span class="pre">--profile</span></code> or <code class="docutils literal notranslate"><span class="pre">-p</span></code> to display a list of existing available configuration profiles to choose from, instead of entering the configuration profile name manually.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="oauth-user-to-machine-u2m-authentication">
<span id="databricks-personal-access-token-authentication"></span><span id="u2m-auth"></span><h2><a class="toc-backref" href="#id4">OAuth user-to-machine (U2M) authentication</a><a class="headerlink" href="#oauth-user-to-machine-u2m-authentication" title="Permalink to this headline"> </a></h2>
<p>Instead of authenticating with Databricks by using <a class="reference internal" href="#token-auth"><span class="std std-ref">token authentication</span></a>, you can use OAuth authentication. OAuth provides tokens with faster expiration times than Databricks personal access tokens, and offers better server-side session invalidation and scoping. Because OAuth access tokens expire in less than an hour, this reduces the risk associated with accidentally checking tokens into source control. See also <a class="reference internal" href="../auth/oauth-u2m.html"><span class="doc">OAuth user-to-machine (U2M) authentication</span></a>.</p>
<p>To configure and use OAuth U2M authentication, do the following:</p>
<ol class="arabic">
<li><p>Before calling any Databricks account-level commands, you must initiate OAuth token management locally by running the following command. This command must be run separately for each account that you want to run commands against. If you do not want to call any account-level operations, skip ahead to step 5.</p>
<p>In the following command, replace the following placeholders:</p>
<ul class="simple">
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;account-console-url&gt;</span></code> with your Databricks <a class="reference external" href="https://accounts.cloud.databricks.com">https://accounts.cloud.databricks.com</a>.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;account-id&gt;</span></code> with your Databricks account ID. See <a class="reference internal" href="../../administration-guide/account-settings/index.html#account-id"><span class="std std-ref">Locate your account ID</span></a>.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>databricks<span class="w"> </span>auth<span class="w"> </span>login<span class="w"> </span>--host<span class="w"> </span>&lt;account-console-url&gt;<span class="w"> </span>--account-id<span class="w"> </span>&lt;account-id&gt;
</pre></div>
</div>
</li>
<li><p>The Databricks CLI prompts you to save the account console URL and account ID locally as a Databricks <a class="reference internal" href="../auth/index.html#config-profiles"><span class="std std-ref">configuration profile</span></a>. Press <code class="docutils literal notranslate"><span class="pre">Enter</span></code> to accept the suggested profile name, or enter the name of a new or existing profile. Any existing profile with the same name is overwritten with this account console URL and account ID.</p>
<p>To get a list of any existing profiles, in a separate terminal or command prompt, run the command <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">auth</span> <span class="pre">profiles</span></code>. To view a specific profile’s existing settings, run the command <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">auth</span> <span class="pre">env</span> <span class="pre">--profile</span> <span class="pre">&lt;profile-name&gt;</span></code>.</p>
</li>
<li><p>In your web browser, complete the on-screen instructions to log in to your Databricks account.</p></li>
<li><p>To view the current OAuth token value and upcoming expiration timestamp, run the command <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">auth</span> <span class="pre">token</span> <span class="pre">--host</span> <span class="pre">&lt;account-console-url&gt;</span> <span class="pre">--account-id</span> <span class="pre">&lt;account-id&gt;</span></code>.</p></li>
<li><p>Before calling any Databricks workspace-level commands, you must initiate OAuth token management locally by running the following command. This command must be run separately for each workspace that you want to run commands against.</p>
<p>In the following command, replace <code class="docutils literal notranslate"><span class="pre">&lt;workspace-url&gt;</span></code> with your Databricks <a class="reference internal" href="../../workspace/workspace-details.html#workspace-url"><span class="std std-ref">workspace instance URL</span></a>, for example <code class="docutils literal notranslate"><span class="pre">https://dbc-a1b2345c-d6e7.cloud.databricks.com</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>databricks<span class="w"> </span>auth<span class="w"> </span>login<span class="w"> </span>--host<span class="w"> </span>&lt;workspace-url&gt;
</pre></div>
</div>
</li>
<li><p>The Databricks CLI prompts you to save the workspace URL locally as a Databricks <a class="reference internal" href="../auth/index.html#config-profiles"><span class="std std-ref">configuration profile</span></a>. Press <code class="docutils literal notranslate"><span class="pre">Enter</span></code> to accept the suggested profile name, or enter the name of a new or existing profile. Any existing profile with the same name is overwritten with this workspace URL.</p>
<p>To get a list of any existing profiles, in a separate terminal or command prompt, run the command <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">auth</span> <span class="pre">profiles</span></code>. To view a specific profile’s existing settings, run the command <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">auth</span> <span class="pre">env</span> <span class="pre">--profile</span> <span class="pre">&lt;profile-name&gt;</span></code>.</p>
</li>
<li><p>In your web browser, complete the on-screen instructions to log in to your Databricks workspace.</p></li>
<li><p>To view the current OAuth token value and upcoming expiration timestamp, run the command <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">auth</span> <span class="pre">token</span> <span class="pre">--host</span> <span class="pre">&lt;workspace-url&gt;</span></code>.</p></li>
<li><p>Use the Databricks CLI’s <code class="docutils literal notranslate"><span class="pre">--profile</span></code> or <code class="docutils literal notranslate"><span class="pre">-p</span></code> option followed by the name of your configuration profile, as part of the Databricks CLI command call, for example <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">account</span> <span class="pre">groups</span> <span class="pre">list</span> <span class="pre">-p</span> <span class="pre">&lt;configuration-profile-name&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">clusters</span> <span class="pre">list</span> <span class="pre">-p</span> <span class="pre">&lt;configuration-profile-name&gt;</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can press <code class="docutils literal notranslate"><span class="pre">Tab</span></code> after <code class="docutils literal notranslate"><span class="pre">--profile</span></code> or <code class="docutils literal notranslate"><span class="pre">-p</span></code> to display a list of existing available configuration profiles to choose from, instead of entering the configuration profile name manually.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="authentication-order-of-evaluation">
<span id="auth-eval"></span><h2><a class="toc-backref" href="#id5">Authentication order of evaluation</a><a class="headerlink" href="#authentication-order-of-evaluation" title="Permalink to this headline"> </a></h2>
<p>Whenever the Databricks CLI needs to gather the settings that are required to attempt to authenticate with a Databricks workspace or account, it searches for these settings in the following locations, in the following order.</p>
<ol class="arabic simple">
<li><p>For <a class="reference internal" href="bundle-commands.html"><span class="doc">bundle</span></a> commands, the values of fields within a project’s bundle setting files. (Bundle setting files do not support the direct inclusion of access credential values.)</p></li>
<li><p>The values of environment variables, as listed within this article and in <a class="reference internal" href="../auth/index.html#unified-auth-vars-fields"><span class="std std-ref">Environment variables and fields for client unified authentication</span></a>.</p></li>
<li><p>Configuration profile field values within the <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file, as listed previously within this article.</p></li>
</ol>
<p>Whenever the Databricks CLI finds the required settings that it needs, it stops searching in other locations. For example:</p>
<ul class="simple">
<li><p>The Databricks CLI needs the value of a Databricks personal access token. A <code class="docutils literal notranslate"><span class="pre">DATABRICKS_TOKEN</span></code> environment variable is set, and the <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file also contains multiple personal access tokens. In this example, the Databricks CLI uses the value of the <code class="docutils literal notranslate"><span class="pre">DATABRICKS_TOKEN</span></code> environment variable and does not search the <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">bundle</span> <span class="pre">deploy</span> <span class="pre">-e</span> <span class="pre">development</span></code> command needs the value of a Databricks personal access token. A <code class="docutils literal notranslate"><span class="pre">DATABRICKS_TOKEN</span></code> environment variable is not set, and the <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file contains multiple personal access tokens. The project’s bundle settings file contains a <code class="docutils literal notranslate"><span class="pre">development</span></code> environment declaration that references through its <code class="docutils literal notranslate"><span class="pre">profile</span></code> field a configuration profile named <code class="docutils literal notranslate"><span class="pre">DEV</span></code>. In this example, the Databricks CLI searches the <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file for a profile named <code class="docutils literal notranslate"><span class="pre">DEV</span></code> and uses the value of that profile’s <code class="docutils literal notranslate"><span class="pre">token</span></code> field.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">bundle</span> <span class="pre">run</span> <span class="pre">-e</span> <span class="pre">development</span> <span class="pre">hello-job</span></code> command needs the value of a Databricks personal access token. A <code class="docutils literal notranslate"><span class="pre">DATABRICKS_TOKEN</span></code> environment variable is not set, and the <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file contains multiple personal access tokens. The project’s bundle settings file contains a <code class="docutils literal notranslate"><span class="pre">development</span></code> environment declaration that references through its <code class="docutils literal notranslate"><span class="pre">host</span></code> field a specific Databricks workspace URL. In this example, the Databricks CLI searches through the configuration profiles within the <code class="docutils literal notranslate"><span class="pre">.databrickscfg</span></code> file for a profile that contains a <code class="docutils literal notranslate"><span class="pre">host</span></code> field with a matching workspace URL. The Databricks CLI finds a matching <code class="docutils literal notranslate"><span class="pre">host</span></code> field and then uses that profile’s <code class="docutils literal notranslate"><span class="pre">token</span></code> field value.</p></li>
</ul>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../../_static/js/localized.js"></script>
  <script type="text/javascript" src="../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>