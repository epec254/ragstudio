

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Demonstrates how to use the Databricks SQL Driver for Node.js, a Node.js library that allows you to run SQL commands on Databricks compute resources." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Databricks SQL Driver for Node.js">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Databricks SQL Driver for Node.js &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/dev-tools/nodejs-sql-driver.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/dev-tools/nodejs-sql-driver.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/dev-tools/nodejs-sql-driver.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="top" title="Databricks on AWS" href="../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../en/dev-tools/nodejs-sql-driver.html" class="notranslate">English</option>
    <option value="../../ja/dev-tools/nodejs-sql-driver.html" class="notranslate">日本語</option>
    <option value="../../pt/dev-tools/nodejs-sql-driver.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Databricks SQL Driver for Node.js</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="databricks-sql-driver-for-nodejs">
<span id="dbsqldrivernodejs"></span><h1>Databricks SQL Driver for Node.js<a class="headerlink" href="#databricks-sql-driver-for-nodejs" title="Permalink to this headline"> </a></h1>
<p>The <a class="reference external" href="https://github.com/databricks/databricks-sql-nodejs">Databricks SQL Driver for Node.js</a> is a <a class="reference external" href="https://nodejs.org">Node.js</a> library that allows you to use JavaScript code to run SQL commands on Databricks compute resources.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"> </a></h2>
<ul>
<li><p>A development machine running Node.js, version 14 or higher. To print the installed version of Node.js, run the command <code class="docutils literal notranslate"><span class="pre">node</span> <span class="pre">-v</span></code>. To install and use different versions of Node.js, you can use tools such as <a class="reference external" href="https://github.com/nvm-sh/nvm">Node Version Manager (nvm)</a>.</p></li>
<li><p>Node Package Manager (<code class="docutils literal notranslate"><span class="pre">npm</span></code>). Later versions of Node.js already include <code class="docutils literal notranslate"><span class="pre">npm</span></code>. To check whether <code class="docutils literal notranslate"><span class="pre">npm</span></code> is installed, run the command <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">-v</span></code>. To install <code class="docutils literal notranslate"><span class="pre">npm</span></code> if needed, you can follow instructions such as the ones at <a class="reference external" href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm">Download and install npm</a>.</p></li>
<li><p>The <a class="reference external" href="https://www.npmjs.com/package/&#64;databricks/sql">&#64;databricks/sql</a> package from <a class="reference external" href="https://www.npmjs.com/">npm</a>. To install the <code class="docutils literal notranslate"><span class="pre">&#64;databricks/sql</span></code> package in your Node.js project as a dependency, use <code class="docutils literal notranslate"><span class="pre">npm</span></code> to run the following command from within the same directory as your project:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npm<span class="w"> </span>i<span class="w"> </span>@databricks/sql
</pre></div>
</div>
</li>
<li><p>If you want to install and use <a class="reference external" href="https://www.typescriptlang.org/">TypeScript</a> in your Node.js project as <code class="docutils literal notranslate"><span class="pre">devDependencies</span></code>, use <code class="docutils literal notranslate"><span class="pre">npm</span></code> to run the following commands from within the same directory as your project:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npm<span class="w"> </span>i<span class="w"> </span>-D<span class="w"> </span>typescript
npm<span class="w"> </span>i<span class="w"> </span>-D<span class="w"> </span>@types/node
</pre></div>
</div>
</li>
<li><p>An existing <a class="reference internal" href="../compute/configure.html"><span class="doc">cluster</span></a> or <a class="reference internal" href="../compute/sql-warehouse/create-sql-warehouse.html"><span class="doc">SQL warehouse</span></a>.</p></li>
<li><p>The <strong>Server Hostname</strong> and <strong>HTTP Path</strong> value for the existing cluster or SQL warehouse.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../integrations/jdbc-odbc-bi.html#connection-details-cluster"><span class="std std-ref">Get these values for a cluster</span></a>.</p></li>
<li><p><a class="reference internal" href="../integrations/jdbc-odbc-bi.html#sql"><span class="std std-ref">Get these values for a SQL warehouse</span></a>.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline"> </a></h2>
<p>The Databricks SQL Driver for Node.js supports the following Databricks authentication types:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#auth-pat"><span class="std std-ref">Databricks personal access token authentication</span></a></p></li>
<li><p><a class="reference internal" href="#auth-username-password"><span class="std std-ref">Username and password authentication</span></a></p></li>
<li><p><a class="reference internal" href="#auth-u2m"><span class="std std-ref">OAuth user-to-machine (U2M) authentication</span></a></p></li>
<li><p><a class="reference internal" href="#auth-m2m"><span class="std std-ref">OAuth machine-to-machine (M2M) authentication</span></a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a security best practice, you should not hard code connection variable values into your code. Instead, you should retrieve these connection variable values from a secure location. For example, the code snippets and examples in this article use environment variables.</p>
</div>
<div class="section" id="databricks-personal-access-token-authentication">
<span id="auth-pat"></span><h3>Databricks personal access token authentication<a class="headerlink" href="#databricks-personal-access-token-authentication" title="Permalink to this headline"> </a></h3>
</div>
<p>To use the Databricks SQL Driver for Node.js with Databricks <a class="reference internal" href="auth/pat.html"><span class="doc">personal access token authentication</span></a>, you must first create a Databricks personal access token, as follows:</p>
<ol class="arabic simple">
<li><p>In your Databricks workspace, click your Databricks username in the top bar, and then select <strong>User Settings</strong> from the drop down.</p></li>
<li><p>Click <strong>Developer</strong>.</p></li>
<li><p>Next to <strong>Access tokens</strong>, click <strong>Manage</strong>.</p></li>
<li><p>Click <strong>Generate new token</strong>.</p></li>
<li><p>(Optional) Enter a comment that helps you to identify this token in the future, and change the token’s default lifetime of 90 days. To create a token with no lifetime (not recommended), leave the <strong>Lifetime (days)</strong> box empty (blank).</p></li>
<li><p>Click <strong>Generate</strong>.</p></li>
<li><p>Copy the displayed token to a secure location, and then click <strong>Done</strong>.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be sure to save the copied token in a secure location. Do not share your copied token with others. If you lose the copied token, you cannot regenerate that exact same token. Instead, you must repeat this procedure to create a new token. If you lose the copied token, or you believe that the token has been compromised, Databricks strongly recommends that you immediately delete that token from your workspace by clicking the trash can (<strong>Revoke</strong>) icon next to the token on the <strong>Access tokens</strong> page.</p>
<p>If you are not able to create or use tokens in your workspace, this might be because your workspace administrator has disabled tokens or has not given you permission to create or use tokens. See your workspace administrator or the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../administration-guide/access-control/tokens.html#enable-tokens"><span class="std std-ref">Enable or disable personal access token authentication for the workspace</span></a></p></li>
<li><p><a class="reference internal" href="../security/auth-authz/api-access-permissions.html#pat"><span class="std std-ref">Personal access token permissions</span></a></p></li>
</ul>
</div>
<p>To authenticate the Databricks SQL Driver for Node.js, use the following code snippet. This snippet assumes that you have set the following environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_SERVER_HOSTNAME</span></code>set to the <strong>Server Hostname</strong> value for your cluster or SQL warehouse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_HTTP_PATH</span></code>, set to <strong>HTTP Path</strong> value for your cluster or SQL warehouse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_TOKEN</span></code>, set to the Databricks personal access token.</p></li>
</ul>
<p>To set environment variables, see your operating system’s documentation.</p>
<div class="js-code-language-tabs compound">
<div class="compound-first compound" lang="JavaScript">
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@databricks/sql&#39;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_SERVER_HOSTNAME</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">httpPath</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_HTTP_PATH</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_TOKEN</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">token</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">httpPath</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Cannot find Server Hostname, HTTP Path, or &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;personal access token. &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;Check the environment variables DATABRICKS_SERVER_HOSTNAME, &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;DATABRICKS_HTTP_PATH, and DATABRICKS_TOKEN.&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">connectOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="nx">token</span><span class="p">,</span>
<span class="w">    </span><span class="nx">host</span><span class="o">:</span><span class="w">  </span><span class="nx">serverHostname</span><span class="p">,</span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w">  </span><span class="nx">httpPath</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">connectOptions</span><span class="p">)</span>
<span class="w">  </span><span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="compound-last compound" lang="TypeScript">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@databricks/sql&quot;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">serverHostname</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_SERVER_HOSTNAME</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">httpPath</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_HTTP_PATH</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_TOKEN</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">token</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">httpPath</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Cannot find Server Hostname, HTTP Path, or personal access token. &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;Check the environment variables DATABRICKS_SERVER_HOSTNAME, &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;DATABRICKS_HTTP_PATH, and DATABRICKS_TOKEN.&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="o">:</span><span class="w"> </span><span class="kt">DBSQLClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">connectOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="kt">token</span><span class="p">,</span>
<span class="w">    </span><span class="nx">host</span><span class="o">:</span><span class="w">  </span><span class="kt">serverHostname</span><span class="p">,</span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w">  </span><span class="kt">httpPath</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">connectOptions</span><span class="p">)</span>
<span class="w">  </span><span class="c1">// ...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="username-and-password-authentication">
<span id="auth-username-password"></span><h3>Username and password authentication<a class="headerlink" href="#username-and-password-authentication" title="Permalink to this headline"> </a></h3>
<p>To authenticate the Databricks SQL Driver for Node.js with username and password authentication, also known as <a class="reference internal" href="auth/basic.html"><span class="doc">basic authentication</span></a>, use the following code snippet. This snippet assumes that you have set the following environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_SERVER_HOSTNAME</span></code>set to the <strong>Server Hostname</strong> value for your cluster or SQL warehouse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_HTTP_PATH</span></code>, set to <strong>HTTP Path</strong> value for your cluster or SQL warehouse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_USERNAME</span></code>, set to the Databricks user account’s username.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_PASSWORD</span></code>, set to the Databricks user account’s password.</p></li>
</ul>
<p>To set environment variables, see your operating system’s documentation.</p>
<p>Username and password authentication is possible only if <a class="reference internal" href="../administration-guide/users-groups/single-sign-on/index.html"><span class="doc">single sign-on</span></a> is disabled.</p>
<div class="js-code-language-tabs compound">
<div class="compound-first compound" lang="JavaScript">
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@databricks/sql&#39;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_SERVER_HOSTNAME</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">httpPath</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_HTTP_PATH</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">username</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_USERNAME</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">password</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_PASSWORD</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">token</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">httpPath</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Cannot find Server Hostname, HTTP Path, username, or &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;password. &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;Check the environment variables DATABRICKS_SERVER_HOSTNAME, &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;DATABRICKS_HTTP_PATH, DATABRICKS_USERNAME, and DATABRICKS_PASSWORD.&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">connectOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">host</span><span class="o">:</span><span class="w">     </span><span class="nx">serverHostname</span><span class="p">,</span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w">     </span><span class="nx">httpPath</span><span class="p">,</span>
<span class="w">    </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="nx">username</span><span class="p">,</span>
<span class="w">    </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="nx">password</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">connectOptions</span><span class="p">)</span>
<span class="w">  </span><span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="compound-last compound" lang="TypeScript">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@databricks/sql&quot;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">serverHostname</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_SERVER_HOSTNAME</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">httpPath</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_HTTP_PATH</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_USERNAME</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_PASSWORD</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">httpPath</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">username</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Cannot find Server Hostname, HTTP Path, username, or &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;password. &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;Check the environment variables DATABRICKS_SERVER_HOSTNAME, &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;DATABRICKS_HTTP_PATH, DATABRICKS_USERNAME, and DATABRICKS_PASSWORD.&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="o">:</span><span class="w"> </span><span class="kt">DBSQLClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">connectOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">host</span><span class="o">:</span><span class="w">     </span><span class="kt">serverHostname</span><span class="p">,</span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w">     </span><span class="kt">httpPath</span><span class="p">,</span>
<span class="w">    </span><span class="nx">username</span><span class="o">:</span><span class="w"> </span><span class="kt">username</span><span class="p">,</span>
<span class="w">    </span><span class="nx">password</span><span class="o">:</span><span class="w"> </span><span class="kt">password</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">connectOptions</span><span class="p">)</span>
<span class="w">  </span><span class="c1">// ...</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="oauth-user-to-machine-u2m-authentication">
<span id="auth-u2m"></span><h3>OAuth user-to-machine (U2M) authentication<a class="headerlink" href="#oauth-user-to-machine-u2m-authentication" title="Permalink to this headline"> </a></h3>
<p>Databricks SQL Driver for Node.js versions 1.3.0 and above support <a class="reference internal" href="auth/oauth-u2m.html"><span class="doc">OAuth user-to-machine (U2M) authentication</span></a>.</p>
<p>To authenticate the Databricks SQL Driver for Node.js with OAuth U2M authentication, use the following code snippet. This snippet assumes that you have set the following environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_SERVER_HOSTNAME</span></code>set to the <strong>Server Hostname</strong> value for your cluster or SQL warehouse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_HTTP_PATH</span></code>, set to <strong>HTTP Path</strong> value for your cluster or SQL warehouse.</p></li>
</ul>
<p>To set environment variables, see your operating system’s documentation.</p>
<div class="js-code-language-tabs compound">
<div class="compound-first compound" lang="JavaScript">
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@databricks/sql&#39;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_SERVER_HOSTNAME</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">httpPath</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_HTTP_PATH</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">httpPath</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Cannot find Server Hostname or HTTP Path. &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;Check the environment variables DATABRICKS_SERVER_HOSTNAME &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;and DATABRICKS_HTTP_PATH.&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">connectOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">authType</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;databricks-oauth&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">host</span><span class="o">:</span><span class="w">     </span><span class="nx">serverHostname</span><span class="p">,</span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w">     </span><span class="nx">httpPath</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">connectOptions</span><span class="p">)</span>
<span class="w">  </span><span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="compound-last compound" lang="TypeScript">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@databricks/sql&quot;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">serverHostname</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_SERVER_HOSTNAME</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">httpPath</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_HTTP_PATH</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">httpPath</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Cannot find Server Hostname or HTTP Path. &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;Check the environment variables DATABRICKS_SERVER_HOSTNAME &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;and DATABRICKS_HTTP_PATH.&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="o">:</span><span class="w"> </span><span class="kt">DBSQLClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">connectOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">authType</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;databricks-oauth&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">host</span><span class="o">:</span><span class="w">     </span><span class="kt">serverHostname</span><span class="p">,</span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w">     </span><span class="kt">httpPath</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">connectOptions</span><span class="p">)</span>
<span class="w">  </span><span class="c1">// ...</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="oauth-machine-to-machine-m2m-authentication">
<span id="auth-m2m"></span><h3>OAuth machine-to-machine (M2M) authentication<a class="headerlink" href="#oauth-machine-to-machine-m2m-authentication" title="Permalink to this headline"> </a></h3>
<p>Databricks SQL Driver for Node.js versions 1.5.0 and above support <a class="reference internal" href="auth/oauth-m2m.html"><span class="doc">OAuth machine-to-machine (M2M) authentication</span></a>.</p>
<p>To use the Databricks SQL Driver for Node.js with OAuth M2M authentication, you must do the following:</p>
<ol class="arabic">
<li><p>Create a Databricks service principal in your Databricks workspace, and create an OAuth secret for that service principal.</p>
<p>To create the service principal and its OAuth secret, follow Steps 1-2 in <a class="reference internal" href="authentication-oauth.html"><span class="doc">Authentication using OAuth for service principals</span></a>. Make a note of the service principal’s <strong>UUID</strong> or <strong>Application ID</strong> value, and the <strong>Secret</strong> value for the service principal’s OAuth secret.</p>
</li>
<li><p>Give the service principal access to your cluster or warehouse. See <a class="reference internal" href="../security/auth-authz/access-control/cluster-acl.html#cluster-level-permissions"><span class="std std-ref">Cluster permissions</span></a> or <a class="reference internal" href="../security/auth-authz/access-control/sql-endpoint-acl.html"><span class="doc">SQL warehouse access control</span></a>.</p></li>
</ol>
<p>To authenticate the Databricks SQL Driver for Node.js, use the following code snippet. This snippet assumes that you have set the following environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_SERVER_HOSTNAME</span></code>set to the <strong>Server Hostname</strong> value for your cluster or SQL warehouse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_HTTP_PATH</span></code>, set to <strong>HTTP Path</strong> value for your cluster or SQL warehouse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_CLIENT_ID</span></code>, set to the service principal’s <strong>UUID</strong> or <strong>Application ID</strong> value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_CLIENT_SECRET</span></code>, set to the <strong>Secret</strong> value for the service principal’s OAuth secret.</p></li>
</ul>
<p>To set environment variables, see your operating system’s documentation.</p>
<div class="js-code-language-tabs compound">
<div class="compound-first compound" lang="JavaScript">
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@databricks/sql&#39;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_SERVER_HOSTNAME</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">httpPath</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_HTTP_PATH</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">clientId</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_CLIENT_ID</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">clientSecret</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_CLIENT_SECRET</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">httpPath</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">clientId</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">clientSecret</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Cannot find Server Hostname, HTTP Path, or &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;service principal ID or secret. &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;Check the environment variables DATABRICKS_SERVER_HOSTNAME, &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;DATABRICKS_HTTP_PATH, DATABRICKS_CLIENT_ID, and &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;DATABRICKS_CLIENT_SECRET.&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">connectOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">authType</span><span class="o">:</span><span class="w">          </span><span class="s2">&quot;databricks-oauth&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">host</span><span class="o">:</span><span class="w">              </span><span class="nx">serverHostname</span><span class="p">,</span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w">              </span><span class="nx">httpPath</span><span class="p">,</span>
<span class="w">    </span><span class="nx">oauthClientId</span><span class="o">:</span><span class="w">     </span><span class="nx">clientId</span><span class="p">,</span>
<span class="w">    </span><span class="nx">oauthClientSecret</span><span class="o">:</span><span class="w"> </span><span class="nx">clientSecret</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">connectOptions</span><span class="p">)</span>
<span class="w">  </span><span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="compound-last compound" lang="TypeScript">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;@databricks/sql&quot;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">serverHostname</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_SERVER_HOSTNAME</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">httpPath</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_HTTP_PATH</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">clientId</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_CLIENT_ID</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">clientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_CLIENT_SECRET</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">httpPath</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">clientId</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">clientSecret</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Cannot find Server Hostname, HTTP Path, or &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;service principal ID or secret. &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;Check the environment variables DATABRICKS_SERVER_HOSTNAME, &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;DATABRICKS_HTTP_PATH, DATABRICKS_CLIENT_ID, and &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                    </span><span class="s2">&quot;DATABRICKS_CLIENT_SECRET.&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="o">:</span><span class="w"> </span><span class="kt">DBSQLClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="p">();</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">connectOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">authType</span><span class="o">:</span><span class="w">          </span><span class="s2">&quot;databricks-oauth&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">host</span><span class="o">:</span><span class="w">              </span><span class="kt">serverHostname</span><span class="p">,</span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w">              </span><span class="kt">httpPath</span><span class="p">,</span>
<span class="w">    </span><span class="nx">oauthClientId</span><span class="o">:</span><span class="w">     </span><span class="kt">clientId</span><span class="p">,</span>
<span class="w">    </span><span class="nx">oauthClientSecret</span><span class="o">:</span><span class="w"> </span><span class="kt">clientSecret</span>
<span class="w">  </span><span class="p">};</span>

<span class="w">  </span><span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">connectOptions</span><span class="p">)</span>
<span class="w">  </span><span class="c1">// ...</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="query-data">
<h2>Query data<a class="headerlink" href="#query-data" title="Permalink to this headline"> </a></h2>
<p>The following code example demonstrates how to call the Databricks SQL Driver for Node.js to run a basic SQL query on a Databricks compute resource. This command returns the first two rows from the <code class="docutils literal notranslate"><span class="pre">trips</span></code> table in the <code class="docutils literal notranslate"><span class="pre">samples</span></code> catalog’s <code class="docutils literal notranslate"><span class="pre">nyctaxi</span></code> schema.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following code example demonstrates how to use a Databricks personal access token for authentication. To use other available Databricks authentication types instead, see <a class="reference internal" href="#authentication"><span class="std std-ref">Authentication</span></a>.</p>
</div>
<p>This code example retrieves the <code class="docutils literal notranslate"><span class="pre">token</span></code>, <code class="docutils literal notranslate"><span class="pre">server_hostname</span></code> and <code class="docutils literal notranslate"><span class="pre">http_path</span></code> connection variable values from a set of Databricks environment variables. These environment variables have the following environment variable names:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_TOKEN</span></code>, which represents your Databricks personal access token from the requirements.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_SERVER_HOSTNAME</span></code>, which represents the <strong>Server Hostname</strong> value from the requirements.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_HTTP_PATH</span></code>, which represents the <strong>HTTP Path</strong> value from the requirements.</p></li>
</ul>
<p>You can use other approaches to retrieving these connection variable values. Using environment variables is just one approach among many.</p>
<p>The following code example demonstrates how to call the Databricks SQL Connector for Node.js to run a basic SQL command on a cluster or SQL warehouse. This command returns the first two rows from the <code class="docutils literal notranslate"><span class="pre">trips</span></code> table.</p>
<div class="js-code-language-tabs compound">
<div class="compound-first compound" lang="JavaScript">
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@databricks/sql&#39;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_TOKEN</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_SERVER_HOSTNAME</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">httpPath</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_HTTP_PATH</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">token</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="nx">httpPath</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Cannot find Server Hostname, HTTP Path, or personal access token. &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                  </span><span class="s2">&quot;Check the environment variables DATABRICKS_TOKEN, &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                  </span><span class="s2">&quot;DATABRICKS_SERVER_HOSTNAME, and DATABRICKS_HTTP_PATH.&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="p">();</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">connectOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="nx">token</span><span class="p">,</span>
<span class="w">  </span><span class="nx">host</span><span class="o">:</span><span class="w"> </span><span class="nx">serverHostname</span><span class="p">,</span>
<span class="w">  </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="nx">httpPath</span>
<span class="p">};</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">connectOptions</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">session</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">openSession</span><span class="p">();</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">queryOperation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">session</span><span class="p">.</span><span class="nx">executeStatement</span><span class="p">(</span>
<span class="w">      </span><span class="s1">&#39;SELECT * FROM samples.nyctaxi.trips LIMIT 2&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">runAsync</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nx">maxRows</span><span class="o">:</span><span class="w">  </span><span class="mf">10000</span><span class="w"> </span><span class="c1">// This option enables the direct results feature.</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">queryOperation</span><span class="p">.</span><span class="nx">fetchAll</span><span class="p">();</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">queryOperation</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>

<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">session</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="compound-last compound" lang="TypeScript">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@databricks/sql&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">IDBSQLSession</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@databricks/sql/dist/contracts/IDBSQLSession&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">IOperation</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@databricks/sql/dist/contracts/IOperation&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">serverHostname</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_SERVER_HOSTNAME</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">httpPath</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_HTTP_PATH</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DATABRICKS_TOKEN</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">serverHostname</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">httpPath</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">token</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s2">&quot;Cannot find Server Hostname, HTTP Path, or personal access token. &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                  </span><span class="s2">&quot;Check the environment variables DATABRICKS_SERVER_HOSTNAME, &quot;</span><span class="w"> </span><span class="o">+</span>
<span class="w">                  </span><span class="s2">&quot;DATABRICKS_HTTP_PATH, and DATABRICKS_TOKEN.&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="o">:</span><span class="w"> </span><span class="kt">DBSQLClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="p">();</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">connectOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">host</span><span class="o">:</span><span class="w"> </span><span class="kt">serverHostname</span><span class="p">,</span>
<span class="w">  </span><span class="nx">path</span><span class="o">:</span><span class="w"> </span><span class="kt">httpPath</span><span class="p">,</span>
<span class="w">  </span><span class="nx">token</span><span class="o">:</span><span class="w"> </span><span class="kt">token</span>
<span class="p">};</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">connectOptions</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">session</span><span class="o">:</span><span class="w"> </span><span class="kt">IDBSQLSession</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">openSession</span><span class="p">();</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">queryOperation</span><span class="o">:</span><span class="w"> </span><span class="kt">IOperation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">session</span><span class="p">.</span><span class="nx">executeStatement</span><span class="p">(</span>
<span class="w">      </span><span class="s1">&#39;SELECT * FROM samples.nyctaxi.trips LIMIT 2&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">runAsync</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<span class="w">        </span><span class="nx">maxRows</span><span class="o">:</span><span class="w"> </span><span class="kt">10000</span><span class="w"> </span><span class="c1">// This option enables the direct results feature.</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">queryOperation</span><span class="p">.</span><span class="nx">fetchAll</span><span class="p">();</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">queryOperation</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>

<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">table</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>

<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">session</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
<span class="w">    </span><span class="nx">client</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
<span class="w">  </span><span class="p">})</span>
<span class="w">  </span><span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<p>Output:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>┌─────────┬─────┬────────┬───────────┬───────┬─────────┬────────┬───────┬───────┬────────┬────────┬────────┐
│ (index) │ _c0 │ carat  │    cut    │ color │ clarity │ depth  │ table │ price │   x    │   y    │   z    │
├─────────┼─────┼────────┼───────────┼───────┼─────────┼────────┼───────┼───────┼────────┼────────┼────────┤
│    0    │ &#39;1&#39; │ &#39;0.23&#39; │  &#39;Ideal&#39;  │  &#39;E&#39;  │  &#39;SI2&#39;  │ &#39;61.5&#39; │ &#39;55&#39;  │ &#39;326&#39; │ &#39;3.95&#39; │ &#39;3.98&#39; │ &#39;2.43&#39; │
│    1    │ &#39;2&#39; │ &#39;0.21&#39; │ &#39;Premium&#39; │  &#39;E&#39;  │  &#39;SI1&#39;  │ &#39;59.8&#39; │ &#39;61&#39;  │ &#39;326&#39; │ &#39;3.89&#39; │ &#39;3.84&#39; │ &#39;2.31&#39; │
└─────────┴─────┴────────┴───────────┴───────┴─────────┴────────┴───────┴───────┴────────┴────────┴────────┘
</pre></div>
</div>
</div>
<div class="section" id="sessions">
<h2>Sessions<a class="headerlink" href="#sessions" title="Permalink to this headline"> </a></h2>
<p>All <code class="docutils literal notranslate"><span class="pre">IDBSQLSession</span></code> methods that return <code class="docutils literal notranslate"><span class="pre">IOperation</span></code> objects in the <a class="reference internal" href="#api-reference"><span class="std std-ref">API Reference</span></a> have the following common parameters that affect their behavior:</p>
<ul class="simple">
<li><p>Setting <code class="docutils literal notranslate"><span class="pre">runAsync</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> starts asynchronous mode. <code class="docutils literal notranslate"><span class="pre">IDBSQLSession</span></code> methods put operations into the queue and return as quickly as possible. The current state of the returned <code class="docutils literal notranslate"><span class="pre">IOperation</span></code> object might vary, and the client is responsible for checking its status before using the returned <code class="docutils literal notranslate"><span class="pre">IOperation</span></code>. See <a class="reference internal" href="#operations"><span class="std std-ref">Operations</span></a>. Setting <code class="docutils literal notranslate"><span class="pre">runAsync</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code> means that <code class="docutils literal notranslate"><span class="pre">IDBSQLSession</span></code> methods wait for operations to complete. Databricks recommends always setting <code class="docutils literal notranslate"><span class="pre">runAsync</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p>Setting <code class="docutils literal notranslate"><span class="pre">maxRows</span></code> to a non-null value enables direct results. With direct results, the server tries to wait for operations to complete and then fetches a portion of the data. Depending on how much work the server was able to complete within the defined time, <code class="docutils literal notranslate"><span class="pre">IOperation</span></code> objects return in some intermediate state instead of in some pending state. Very often all the metadata and query results are returned within a single request to the server. The server uses <code class="docutils literal notranslate"><span class="pre">maxRows</span></code> to determine how many records it can return immediately. However, the actual chunk may be of a different size; see <code class="docutils literal notranslate"><span class="pre">IDBSQLSession.fetchChunk</span></code>. Direct results are enabled by default. Databricks recommends against disabling direct results.</p></li>
</ul>
</div>
<div class="section" id="operations">
<h2>Operations<a class="headerlink" href="#operations" title="Permalink to this headline"> </a></h2>
<p>As described in <a class="reference internal" href="#sessions"><span class="std std-ref">Sessions</span></a>, <code class="docutils literal notranslate"><span class="pre">IOperation</span></code> objects that are returned by <code class="docutils literal notranslate"><span class="pre">IDBSQLSession</span></code> session methods in the <a class="reference internal" href="#api-reference"><span class="std std-ref">API Reference</span></a> are not fully populated. The related server operation might still be in progress, such as waiting for the Databricks SQL warehouse to start, running the query, or fetching the data. The <code class="docutils literal notranslate"><span class="pre">IOperation</span></code> class hides these details from users. For example, methods such <code class="docutils literal notranslate"><span class="pre">fetchAll</span></code>, <code class="docutils literal notranslate"><span class="pre">fetchChunk</span></code>, and <code class="docutils literal notranslate"><span class="pre">getSchema</span></code> wait internally for operations to complete and then return results. You can use the <code class="docutils literal notranslate"><span class="pre">IOperation.finished()</span></code> method to explicitly wait for operations to complete. These methods take a callback that is periodically called while waiting for operations to complete. Setting the <code class="docutils literal notranslate"><span class="pre">progress</span></code> option to <code class="docutils literal notranslate"><span class="pre">true</span></code> attempts to request extra progress data from the server and pass it to that callback.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">close</span></code> and <code class="docutils literal notranslate"><span class="pre">cancel</span></code> methods can be called at any time. When called, they immediately invalidate the <code class="docutils literal notranslate"><span class="pre">IOperation</span></code> object; all pending calls such as <code class="docutils literal notranslate"><span class="pre">fetchAll</span></code>, <code class="docutils literal notranslate"><span class="pre">fetchChunk</span></code>, and <code class="docutils literal notranslate"><span class="pre">getSchema</span></code> are immediately canceled and an error is returned. In some cases, the server operation might have already completed and the <code class="docutils literal notranslate"><span class="pre">cancel</span></code> method affects only the client.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">fetchAll</span></code> method calls <code class="docutils literal notranslate"><span class="pre">fetchChunk</span></code> internally and collects all of the data into an array. While this is convenient, it might cause out of memory errors when used on large datasets. <code class="docutils literal notranslate"><span class="pre">fetchAll</span></code> options are typically passed to <code class="docutils literal notranslate"><span class="pre">fetchChunk</span></code>.</p>
</div>
<div class="section" id="fetch-chunks-of-data">
<h2>Fetch chunks of data<a class="headerlink" href="#fetch-chunks-of-data" title="Permalink to this headline"> </a></h2>
<p>Fetching data chunks uses the following code pattern:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">do</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">chunk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">operation</span><span class="p">.</span><span class="nx">fetchChunk</span><span class="p">();</span>
<span class="w">  </span><span class="c1">// Process the data chunk.</span>
<span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="k">await</span><span class="w"> </span><span class="nx">operation</span><span class="p">.</span><span class="nx">hasMoreRows</span><span class="p">());</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">fetchChunk</span></code> method in the <a class="reference internal" href="#api-reference"><span class="std std-ref">API Reference</span></a> processes data in small portions to reduce memory consumption. <code class="docutils literal notranslate"><span class="pre">fetchChunk</span></code> first waits for operations to complete if they have not already completed, then calls a callback during the wait cycle, and then fetches the next data chunk.</p>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">maxRows</span></code> option to specify the desired chunk size. However, the returned chunk might have a different size, smaller or even sometimes larger. <code class="docutils literal notranslate"><span class="pre">fetchChunk</span></code> does not attempt to prefetch data internally, in order to slice it into the requested portions. It sends the <code class="docutils literal notranslate"><span class="pre">maxRows</span></code> option to then server and returns whatever the server returns. Do not confuse this <code class="docutils literal notranslate"><span class="pre">maxRows</span></code> option with the one in <code class="docutils literal notranslate"><span class="pre">IDBSQLSession</span></code>. <code class="docutils literal notranslate"><span class="pre">maxRows</span></code> passed to <code class="docutils literal notranslate"><span class="pre">fetchChunk</span></code> defines the size of each chunk and does not do anything else.</p>
</div>
<div class="section" id="configure-logging">
<h2>Configure logging<a class="headerlink" href="#configure-logging" title="Permalink to this headline"> </a></h2>
<p>The logger provides information for debugging problems with the connector. All <code class="docutils literal notranslate"><span class="pre">DBSQLClient</span></code> objects are instantiated with a logger that prints to the console, but by passing in a custom logger, you can send this information to a file. The following example shows how to configure a logger and change its level.</p>
<div class="js-code-language-tabs compound">
<div class="compound-first compound" lang="JavaScript">
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DBSQLLogger</span><span class="p">,</span><span class="w"> </span><span class="nx">LogLevel</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@databricks/sql&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">logger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">DBSQLLogger</span><span class="p">({</span>
<span class="w">  </span><span class="nx">filepath</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;log.txt&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">level</span><span class="o">:</span><span class="w"> </span><span class="nx">LogLevel</span><span class="p">.</span><span class="nx">info</span>
<span class="p">});</span>

<span class="c1">// Set logger to different level.</span>
<span class="nx">logger</span><span class="p">.</span><span class="nx">setLevel</span><span class="p">(</span><span class="nx">LogLevel</span><span class="p">.</span><span class="nx">debug</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="compound-last compound" lang="TypeScript">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">DBSQLLogger</span><span class="p">,</span><span class="w"> </span><span class="nx">LogLevel</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@databricks/sql&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">logger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">DBSQLLogger</span><span class="p">({</span>
<span class="w">  </span><span class="nx">filepath</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;log.txt&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">level</span><span class="o">:</span><span class="w"> </span><span class="kt">LogLevel.info</span><span class="p">,</span>
<span class="p">});</span>

<span class="c1">// Set logger to different level.</span>
<span class="nx">logger</span><span class="p">.</span><span class="nx">setLevel</span><span class="p">(</span><span class="nx">LogLevel</span><span class="p">.</span><span class="nx">debug</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<p>For additional examples, see the <a class="reference external" href="https://github.com/databricks/databricks-sql-nodejs/tree/master/examples">examples</a> folder in the databricks/databricks-sql-nodejs repository on GitHub.</p>
</div>
<div class="section" id="additional-resources">
<h2>Additional resources<a class="headerlink" href="#additional-resources" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li><p>The <a class="reference external" href="https://github.com/databricks/databricks-sql-nodejs">Databricks SQL Driver for Node.js</a> repository on GitHub</p></li>
<li><p><a class="reference external" href="https://github.com/databricks/databricks-sql-nodejs/blob/master/docs/readme.md">Getting started</a> with the Databricks SQL Driver for Node.js</p></li>
<li><p><a class="reference external" href="https://github.com/databricks/databricks-sql-nodejs/blob/master/docs/troubleshooting.md">Troubleshooting</a> the Databricks SQL Driver for Node.js</p></li>
</ul>
</div>
<div class="section" id="api-reference">
<h2>API reference<a class="headerlink" href="#api-reference" title="Permalink to this headline"> </a></h2>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#classes" id="id6">Classes</a></p>
<ul>
<li><p><a class="reference internal" href="#dbsqlclient-class" id="id7"><code class="docutils literal notranslate"><span class="pre">DBSQLClient</span></code> class</a></p>
<ul>
<li><p><a class="reference internal" href="#methods" id="id8">Methods</a></p>
<ul>
<li><p><a class="reference internal" href="#connect-method" id="id9"><code class="docutils literal notranslate"><span class="pre">connect</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#opensession-method" id="id10"><code class="docutils literal notranslate"><span class="pre">openSession</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#getclient-method" id="id11"><code class="docutils literal notranslate"><span class="pre">getClient</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#close-method" id="id12"><code class="docutils literal notranslate"><span class="pre">close</span></code> method</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#dbsqlsession-class" id="id13"><code class="docutils literal notranslate"><span class="pre">DBSQLSession</span></code> class</a></p>
<ul>
<li><p><a class="reference internal" href="#methods" id="id14">Methods</a></p>
<ul>
<li><p><a class="reference internal" href="#executestatement-method" id="id15"><code class="docutils literal notranslate"><span class="pre">executeStatement</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#close-method" id="id16"><code class="docutils literal notranslate"><span class="pre">close</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#getid-method" id="id17"><code class="docutils literal notranslate"><span class="pre">getId</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#gettypeinfo-method" id="id18"><code class="docutils literal notranslate"><span class="pre">getTypeInfo</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#getcatalogs-method" id="id19"><code class="docutils literal notranslate"><span class="pre">getCatalogs</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#getschemas-method" id="id20"><code class="docutils literal notranslate"><span class="pre">getSchemas</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#gettables-method" id="id21"><code class="docutils literal notranslate"><span class="pre">getTables</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#getfunctions-method" id="id22"><code class="docutils literal notranslate"><span class="pre">getFunctions</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#getprimarykeys-method" id="id23"><code class="docutils literal notranslate"><span class="pre">getPrimaryKeys</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#getcrossreference-method" id="id24"><code class="docutils literal notranslate"><span class="pre">getCrossReference</span></code> method</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#dbsqloperation-class" id="id25"><code class="docutils literal notranslate"><span class="pre">DBSQLOperation</span></code> class</a></p>
<ul>
<li><p><a class="reference internal" href="#methods" id="id26">Methods</a></p>
<ul>
<li><p><a class="reference internal" href="#getid-method" id="id27"><code class="docutils literal notranslate"><span class="pre">getId</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#fetchall-method" id="id28"><code class="docutils literal notranslate"><span class="pre">fetchAll</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#fetchchunk-method" id="id29"><code class="docutils literal notranslate"><span class="pre">fetchChunk</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#close-method" id="id30"><code class="docutils literal notranslate"><span class="pre">close</span></code> method</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="classes">
<h3><a class="toc-backref" href="#id6">Classes</a><a class="headerlink" href="#classes" title="Permalink to this headline"> </a></h3>
<div class="section" id="dbsqlclient-class">
<h4><a class="toc-backref" href="#id7"><code class="docutils literal notranslate"><span class="pre">DBSQLClient</span></code> class</a><a class="headerlink" href="#dbsqlclient-class" title="Permalink to this headline"> </a></h4>
<p>Main entry point for interacting with a database.</p>
<div class="section" id="methods">
<h5><a class="toc-backref" href="#id8">Methods</a><a class="headerlink" href="#methods" title="Permalink to this headline"> </a></h5>
<div class="section" id="connect-method">
<h6><a class="toc-backref" href="#id9"><code class="docutils literal notranslate"><span class="pre">connect</span></code> method</a><a class="headerlink" href="#connect-method" title="Permalink to this headline"> </a></h6>
<p>Opens a connection to the database.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>options</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">ConnectionOptions</span></code></p>
<p>The set of options used to connect to the database.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">host</span></code>, <code class="docutils literal notranslate"><span class="pre">path</span></code>, and other required fields must be populated.
See <a class="reference internal" href="#authentication"><span class="std std-ref">Authentication</span></a>.</p>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="o">:</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">DBSQLClient</span><span class="p">();</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nx">host</span><span class="o">:</span><span class="w">  </span><span class="nx">serverHostname</span><span class="p">,</span>
<span class="w">    </span><span class="nx">path</span><span class="o">:</span><span class="w">  </span><span class="nx">httpPath</span><span class="p">,</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Returns:
<code class="docutils literal notranslate"><span class="pre">Promise&lt;IDBSQLClient&gt;</span></code></p>
</div>
<div class="section" id="opensession-method">
<h6><a class="toc-backref" href="#id10"><code class="docutils literal notranslate"><span class="pre">openSession</span></code> method</a><a class="headerlink" href="#opensession-method" title="Permalink to this headline"> </a></h6>
<p>Opens session between DBSQLClient and database.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>request</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">OpenSessionRequest</span></code></p>
<p>A set of optional parameters for specifying initial schema and
initial catalog</p>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">session</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">openSession</span><span class="p">(</span>
<span class="w">  </span><span class="p">{</span><span class="nx">initialCatalog</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;catalog&#39;</span><span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Returns:
<code class="docutils literal notranslate"><span class="pre">Promise&lt;IDBSQLSession&gt;</span></code></p>
</div>
<div class="section" id="getclient-method">
<h6><a class="toc-backref" href="#id11"><code class="docutils literal notranslate"><span class="pre">getClient</span></code> method</a><a class="headerlink" href="#getclient-method" title="Permalink to this headline"> </a></h6>
<p>Returns internal thrift TCLIService.Client object. Must be called after DBSQLClient has connected.</p>
<p>No parameters</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">TCLIService.Client</span></code></p>
</div>
<div class="section" id="close-method">
<h6><a class="toc-backref" href="#id12"><code class="docutils literal notranslate"><span class="pre">close</span></code> method</a><a class="headerlink" href="#close-method" title="Permalink to this headline"> </a></h6>
<p>Closes the connection to the database and releases all associated resources on the server. Any additional calls to this client will throw error.</p>
<p>No parameters.</p>
<p>No return value.</p>
</div>
</div>
</div>
<div class="section" id="dbsqlsession-class">
<h4><a class="toc-backref" href="#id13"><code class="docutils literal notranslate"><span class="pre">DBSQLSession</span></code> class</a><a class="headerlink" href="#dbsqlsession-class" title="Permalink to this headline"> </a></h4>
<p>DBSQLSessions are primarily used for the execution of statements against the databbase as well as various metadata fetching operations.</p>
<div class="section" id="methods">
<span id="methods-1"></span><h5><a class="toc-backref" href="#id14">Methods</a><a class="headerlink" href="#methods" title="Permalink to this headline"> </a></h5>
<div class="section" id="executestatement-method">
<h6><a class="toc-backref" href="#id15"><code class="docutils literal notranslate"><span class="pre">executeStatement</span></code> method</a><a class="headerlink" href="#executestatement-method" title="Permalink to this headline"> </a></h6>
<p>Executes a statement with the options provided.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>statement</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>The statement to be executed.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>options</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">ExecuteStatementOptions</span></code></p>
<p>A set of optional parameters for determining query timeout, max
rows for direct results, and whether to run the query
asynchronously. By default <code class="docutils literal notranslate"><span class="pre">maxRows</span></code> is set to 10000. If <code class="docutils literal notranslate"><span class="pre">maxRows</span></code>
is set to null, the operation will run with the direct results
feature off.</p>
<p>Example:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">session</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">openSession</span><span class="p">(</span>
<span class="w">  </span><span class="p">{</span><span class="nx">initialCatalog</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;catalog&#39;</span><span class="p">}</span>
<span class="p">);</span>

<span class="nx">queryOperation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">session</span><span class="p">.</span><span class="nx">executeStatement</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;SELECT &quot;Hello, World!&quot;&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">runAsync</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Returns:
<code class="docutils literal notranslate"><span class="pre">Promise&lt;IOperation&gt;</span></code></p>
</div>
<div class="section" id="close-method">
<span id="close-method-1"></span><h6><a class="toc-backref" href="#id16"><code class="docutils literal notranslate"><span class="pre">close</span></code> method</a><a class="headerlink" href="#close-method" title="Permalink to this headline"> </a></h6>
<p>Closes the session. Must be done after using session.</p>
<p>No parameters.</p>
<p>No return value.</p>
</div>
<div class="section" id="getid-method">
<h6><a class="toc-backref" href="#id17"><code class="docutils literal notranslate"><span class="pre">getId</span></code> method</a><a class="headerlink" href="#getid-method" title="Permalink to this headline"> </a></h6>
<p>Returns the GUID of the session.</p>
<p>No parameters.</p>
<p>Returns:
<code class="docutils literal notranslate"><span class="pre">str</span></code></p>
</div>
<div class="section" id="gettypeinfo-method">
<h6><a class="toc-backref" href="#id18"><code class="docutils literal notranslate"><span class="pre">getTypeInfo</span></code> method</a><a class="headerlink" href="#gettypeinfo-method" title="Permalink to this headline"> </a></h6>
<p>Returns information about supported data types.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>request</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">TypeInfoRequest</span></code></p>
<p>Request parameters.</p>
</td>
</tr>
</tbody>
</table>
<p>Returns:
<code class="docutils literal notranslate"><span class="pre">Promise&lt;IOperation&gt;</span></code></p>
</div>
<div class="section" id="getcatalogs-method">
<h6><a class="toc-backref" href="#id19"><code class="docutils literal notranslate"><span class="pre">getCatalogs</span></code> method</a><a class="headerlink" href="#getcatalogs-method" title="Permalink to this headline"> </a></h6>
<p>Gets list of catalogs.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>request</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">CatalogsRequest</span></code></p>
<p>Request parameters.</p>
</td>
</tr>
</tbody>
</table>
<p>Returns:
<code class="docutils literal notranslate"><span class="pre">Promise&lt;IOperation&gt;</span></code></p>
</div>
<div class="section" id="getschemas-method">
<h6><a class="toc-backref" href="#id20"><code class="docutils literal notranslate"><span class="pre">getSchemas</span></code> method</a><a class="headerlink" href="#getschemas-method" title="Permalink to this headline"> </a></h6>
<p>Gets list of schemas.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>request</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">SchemasRequest</span></code></p>
<p>Request parameters. Fields <code class="docutils literal notranslate"><span class="pre">catalogName</span></code> and <code class="docutils literal notranslate"><span class="pre">schemaName</span></code> can be
used for filtering purposes.</p>
</td>
</tr>
</tbody>
</table>
<p>Returns:
<code class="docutils literal notranslate"><span class="pre">Promise&lt;IOperation&gt;</span></code></p>
</div>
<div class="section" id="gettables-method">
<h6><a class="toc-backref" href="#id21"><code class="docutils literal notranslate"><span class="pre">getTables</span></code> method</a><a class="headerlink" href="#gettables-method" title="Permalink to this headline"> </a></h6>
<p>Gets list of tables.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>request</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">TablesRequest</span></code></p>
<p>Request parameters. Fields <code class="docutils literal notranslate"><span class="pre">catalogName</span></code> and <code class="docutils literal notranslate"><span class="pre">schemaName</span></code> and
<code class="docutils literal notranslate"><span class="pre">tableName</span></code> can be used for filtering.</p>
</td>
</tr>
</tbody>
</table>
<p>Returns:
<code class="docutils literal notranslate"><span class="pre">Promise&lt;IOperation&gt;</span></code></p>
</div>
<div class="section" id="getfunctions-method">
<h6><a class="toc-backref" href="#id22"><code class="docutils literal notranslate"><span class="pre">getFunctions</span></code> method</a><a class="headerlink" href="#getfunctions-method" title="Permalink to this headline"> </a></h6>
<p>Gets list of tables.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>request</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">FunctionsRequest</span></code></p>
<p>Request parameters. Field <code class="docutils literal notranslate"><span class="pre">functionName</span></code> is required.</p>
</td>
</tr>
</tbody>
</table>
<p>Returns:
<code class="docutils literal notranslate"><span class="pre">Promise&lt;IOperation&gt;</span></code></p>
</div>
<div class="section" id="getprimarykeys-method">
<h6><a class="toc-backref" href="#id23"><code class="docutils literal notranslate"><span class="pre">getPrimaryKeys</span></code> method</a><a class="headerlink" href="#getprimarykeys-method" title="Permalink to this headline"> </a></h6>
<p>Gets list of primary keys.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>request</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">PrimaryKeysRequest</span></code></p>
<p>Request parameters. Fields <code class="docutils literal notranslate"><span class="pre">schemaName</span></code> and <code class="docutils literal notranslate"><span class="pre">tableName</span></code> are
required.</p>
</td>
</tr>
</tbody>
</table>
<p>Returns:
<code class="docutils literal notranslate"><span class="pre">Promise&lt;IOperation&gt;</span></code></p>
</div>
<div class="section" id="getcrossreference-method">
<h6><a class="toc-backref" href="#id24"><code class="docutils literal notranslate"><span class="pre">getCrossReference</span></code> method</a><a class="headerlink" href="#getcrossreference-method" title="Permalink to this headline"> </a></h6>
<p>Gets information about foreign keys between two tables.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>request</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">CrossReferenceRequest</span></code></p>
<p>Request parameters. Schema, Parent, and Catalog name must be
specified for both tables.</p>
</td>
</tr>
</tbody>
</table>
<p>Returns:
<code class="docutils literal notranslate"><span class="pre">Promise&lt;IOperation&gt;</span></code></p>
</div>
</div>
</div>
<div class="section" id="dbsqloperation-class">
<h4><a class="toc-backref" href="#id25"><code class="docutils literal notranslate"><span class="pre">DBSQLOperation</span></code> class</a><a class="headerlink" href="#dbsqloperation-class" title="Permalink to this headline"> </a></h4>
<p>DBSQLOperations are created by DBSQLSessions and can be used to fetch the results of statements and check up on their execution. Data is fetched through functions fetchChunk and fetchAll.</p>
<div class="section" id="methods">
<span id="methods-2"></span><h5><a class="toc-backref" href="#id26">Methods</a><a class="headerlink" href="#methods" title="Permalink to this headline"> </a></h5>
<div class="section" id="getid-method">
<span id="getid-method-1"></span><h6><a class="toc-backref" href="#id27"><code class="docutils literal notranslate"><span class="pre">getId</span></code> method</a><a class="headerlink" href="#getid-method" title="Permalink to this headline"> </a></h6>
<p>Returns the GUID of the operation.</p>
<p>No parameters.</p>
<p>Returns:
<code class="docutils literal notranslate"><span class="pre">str</span></code></p>
</div>
<div class="section" id="fetchall-method">
<h6><a class="toc-backref" href="#id28"><code class="docutils literal notranslate"><span class="pre">fetchAll</span></code> method</a><a class="headerlink" href="#fetchall-method" title="Permalink to this headline"> </a></h6>
<p>Waits for operation completion, then fetches all rows from operation.</p>
<p>Parameters: None</p>
<p>Returns:
<code class="docutils literal notranslate"><span class="pre">Promise&lt;Array&lt;object&gt;&gt;</span></code></p>
</div>
<div class="section" id="fetchchunk-method">
<h6><a class="toc-backref" href="#id29"><code class="docutils literal notranslate"><span class="pre">fetchChunk</span></code> method</a><a class="headerlink" href="#fetchchunk-method" title="Permalink to this headline"> </a></h6>
<p>Waits for operation completion, then fetches up to a specified number of rows from an operation.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>options</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">FetchOptions</span></code></p>
<p>Options used to fetch. Currently, the only option is maxRows, which
corresponds to the max number of data objects to be returned in any
given array.</p>
</td>
</tr>
</tbody>
</table>
<p>Returns:
<code class="docutils literal notranslate"><span class="pre">Promise&lt;Array&lt;object&gt;&gt;</span></code></p>
</div>
<div class="section" id="close-method">
<span id="close-method-2"></span><h6><a class="toc-backref" href="#id30"><code class="docutils literal notranslate"><span class="pre">close</span></code> method</a><a class="headerlink" href="#close-method" title="Permalink to this headline"> </a></h6>
<p>Closes the operation and releases all associated resources. Must be done after no longer using operation.</p>
<p>No parameters.</p>
<p>No return value.</p>
</div>
</div>
</div>
</div>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../_static/js/localized.js"></script>
  <script type="text/javascript" src="../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>