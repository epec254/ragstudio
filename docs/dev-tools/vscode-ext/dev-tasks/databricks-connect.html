

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to debug code by using the Databricks Connect integration in the Databricks extension for Visual Studio Code." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Debug code by using Databricks Connect for the Databricks extension for Visual Studio Code">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Debug code by using Databricks Connect for the Databricks extension for Visual Studio Code &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/dev-tools/vscode-ext/dev-tasks/databricks-connect.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/dev-tools/vscode-ext/dev-tasks/databricks-connect.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/dev-tools/vscode-ext/dev-tasks/databricks-connect.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../../../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../../../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../../../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../../../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../../../genindex.html" />
  <link rel="search" title="Search" href="../../../search.html" />
  <link rel="top" title="Databricks on AWS" href="../../../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../../../en/dev-tools/vscode-ext/dev-tasks/databricks-connect.html" class="notranslate">English</option>
    <option value="../../../../ja/dev-tools/vscode-ext/dev-tasks/databricks-connect.html" class="notranslate">日本語</option>
    <option value="../../../../pt/dev-tools/vscode-ext/dev-tasks/databricks-connect.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Debug code by using Databricks Connect for the Databricks extension for Visual Studio Code</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="debug-code-by-using-databricks-connect-for-the-databricks-extension-for-visual-studio-code">
<span id="debug-code-by-using-databricks-connect-for-the-vscode-ext"></span><h1>Debug code by using Databricks Connect for the Databricks extension for Visual Studio Code<a class="headerlink" href="#debug-code-by-using-databricks-connect-for-the-databricks-extension-for-visual-studio-code" title="Permalink to this headline"> </a></h1>
<p>This articles describes how to debug code by using the Databricks Connect integration in the Databricks extension for Visual Studio Code. See <a class="reference internal" href="../index.html"><span class="doc">What is the Databricks extension for Visual Studio Code?</span></a>.</p>
<p>This information assumes that you have already installed and set up the Databricks extension for Visual Studio Code. See <a class="reference internal" href="../install.html"><span class="doc">Install the Databricks extension for Visual Studio Code</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature is <a class="reference internal" href="../../../release-notes/release-types.html"><span class="doc">Experimental</span></a>.</p>
<p>Databricks Connect integration within the Databricks extension for Visual Studio Code supports only a portion of the <a class="reference internal" href="../../auth/index.html#unified-auth"><span class="std std-ref">Databricks client unified authentication</span></a> standard. For more information, see <a class="reference internal" href="../authentication.html"><span class="doc">Authentication setup for the Databricks extension for Visual Studio Code</span></a>.</p>
</div>
<p>The Databricks extension for Visual Studio Code includes <a class="reference internal" href="../../databricks-connect/index.html"><span class="doc">Databricks Connect</span></a>. You can use Databricks Connect from within the Databricks extension for Visual Studio Code to run and do step-through debugging of individual Python (<code class="docutils literal notranslate"><span class="pre">.py</span></code>) files and Python Jupyter notebooks (<code class="docutils literal notranslate"><span class="pre">.ipynb</span></code>). The Databricks extension for Visual Studio Code includes Databricks Connect for Databricks Runtime 13.0 and above. Earlier versions of Databricks Connect are not supported.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"> </a></h2>
<p>Before you can use Databricks Connect from within the Databricks extension for Visual Studio Code, you must first meet the <a class="reference internal" href="../../databricks-connect/cluster-config.html"><span class="doc">Databricks Connect requirements</span></a>. These requirements include things such as a workspace enabled with Unity Catalog, a cluster running Databricks Runtime 13.0 or higher and with a cluster access mode of Single User or Shared, and a local version of Python installed with its major and minor versions matching those of Python installed on the cluster.</p>
</div>
<div class="section" id="step-1-create-a-python-virtual-environment">
<h2>Step 1: Create a Python virtual environment<a class="headerlink" href="#step-1-create-a-python-virtual-environment" title="Permalink to this headline"> </a></h2>
<p>Create and activate a Python <em>virtual environment</em> for your Python code project. Python virtual environments help to make sure that your code project is using compatible versions of Python and Python packages (in this case, the Databricks Connect package). The instructions and examples in this article use <a class="reference external" href="https://docs.python.org/3/library/venv.html">venv</a> or <a class="reference external" href="https://python-poetry.org/">Poetry</a> for Python virtual environments. Databricks has not fully tested the Databricks Connect package with other types of Python virtual environments, such as Conda.</p>
<div class="section" id="create-a-python-virtual-environment-using-venv">
<h3>Create a Python virtual environment using <code class="docutils literal notranslate"><span class="pre">venv</span></code><a class="headerlink" href="#create-a-python-virtual-environment-using-venv" title="Permalink to this headline"> </a></h3>
<ol class="arabic">
<li><p>From your Visual Studio Code terminal (<strong>View &gt; Terminal</strong>) set to the root directory of your Python code project, instruct <code class="docutils literal notranslate"><span class="pre">venv</span></code> to use Python for the virtual environment, and then create the virtual environment’s supporting files in a hidden directory named <code class="docutils literal notranslate"><span class="pre">.venv</span></code> within the root directory of your Python code project, by running the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Linux and macOS</span>
python3.10<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>./.venv
<span class="c1"># Windows</span>
python3.10<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>.<span class="se">\.</span>venv
</pre></div>
</div>
<p>The preceding command uses Python 3.10, which matches the major and minor version of Python that Databricks Runtime 13.0 uses. Be sure to use the major and minor version of Python that matches your cluster’s installed version of Python.</p>
</li>
<li><p>If Visual Studio Code displays the message “We noticed a new environment has been created. Do you want to select it for the workspace folder,” click <strong>Yes</strong>.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">venv</span></code> to activate the virtual environment. See the <a class="reference external" href="https://docs.python.org/3/library/venv.html">venv</a> documentation for the correct command to use, based on your operating system and terminal type. For example, on macOS running <code class="docutils literal notranslate"><span class="pre">zsh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>./.venv/bin/activate
</pre></div>
</div>
<p>You will know that your virtual environment is activated when the virtual environment’s name (for example, <code class="docutils literal notranslate"><span class="pre">.venv</span></code>) displays in parentheses just before your terminal prompt.</p>
<p>To deactivate the virtual environment at any time, run the command <code class="docutils literal notranslate"><span class="pre">deactivate</span></code>.</p>
<p>You will know that your virtual environment is deactivated when the virtual environment’s name no longer displays in parentheses just before your terminal prompt.</p>
</li>
</ol>
<p>Skip ahead to <a class="reference internal" href="#update-python-code"><span class="std std-ref">Step 2: Update your Python code to establish a debugging context</span></a>.</p>
</div>
<div class="section" id="create-a-python-virtual-environment-using-poetry">
<h3>Create a Python virtual environment using Poetry<a class="headerlink" href="#create-a-python-virtual-environment-using-poetry" title="Permalink to this headline"> </a></h3>
<ol class="arabic">
<li><p><a class="reference external" href="https://python-poetry.org/docs/#installation">Install Poetry</a>, if you have not done so already.</p></li>
<li><p>From your Visual Studio Code terminal (<strong>View &gt; Terminal</strong>) set to the root directory of your existing Python code project, instruct <code class="docutils literal notranslate"><span class="pre">poetry</span></code> to initialize your Python code project for Poetry, by running the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>init
</pre></div>
</div>
</li>
<li><p>Poetry displays several prompts for you to complete. None of these prompts are specific to the Databricks extension for Visual Studio Code or to Databricks Connect. For information about these prompts, see <a class="reference external" href="https://python-poetry.org/docs/cli/#init">init</a>.</p></li>
<li><p>After you complete the prompts, Poetry adds a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file to your Python project. For information about the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file, see <a class="reference external" href="https://python-poetry.org/docs/pyproject/">The pyproject.toml file</a>.</p></li>
<li><p>With the Visual Studio Code terminal still set to the root directory of your Python code project, instruct <code class="docutils literal notranslate"><span class="pre">poetry</span></code> to read the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file, resolve the dependencies and install them, create a <code class="docutils literal notranslate"><span class="pre">poetry.lock</span></code> file to lock the dependencies, and finally to create a virtual environment. To do this, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>install
</pre></div>
</div>
</li>
<li><p>Instruct Visual Studio Code to use the Python interpreter that is included in the virtual environment for this Python project, as follows:</p>
<ol class="arabic">
<li><p>Find the full path to the Python interpreter that is in the virtual environment for this Python project, by running the following command from the project’s root directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>env<span class="w"> </span>info
</pre></div>
</div>
</li>
<li><p>Copy the full path that is displayed in the <code class="docutils literal notranslate"><span class="pre">Virtualenv</span> <span class="pre">&gt;</span> <span class="pre">Executable</span></code> field’s output, for example the full path that contains <code class="docutils literal notranslate"><span class="pre">pypoetry/virtualenvs</span></code>.</p></li>
<li><p>In the Command Palette (<strong>View &gt; Command Palette</strong>), enter the command <code class="docutils literal notranslate"><span class="pre">&gt;Python:</span> <span class="pre">Select</span> <span class="pre">Interpreter</span></code>.</p></li>
<li><p>Enter the full path to the Python interpreter that you just copied.</p></li>
</ol>
</li>
<li><p>With the Visual Studio Code terminal still set to the root directory of your Python code project, instruct <code class="docutils literal notranslate"><span class="pre">poetry</span></code> to activate the virtual environment and enter the shell. To do this, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>shell
</pre></div>
</div>
<p>You will know that your virtual environment is activated and the shell is entered when the virtual environment’s name displays in parentheses just before your terminal prompt.</p>
<p>To deactivate the virtual environment and exit the shell at any time, run the command <code class="docutils literal notranslate"><span class="pre">exit</span></code>.</p>
<p>You will know that you have exited the shell when the virtual environment’s name no longer displays in parentheses just before your terminal prompt.</p>
<p>For more information about creating and managing Poetry virtual environments, see <a class="reference external" href="https://python-poetry.org/docs/managing-environments/">Managing environments</a>.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="step-2-update-your-python-code-to-establish-a-debugging-context">
<span id="update-python-code"></span><h2>Step 2: Update your Python code to establish a debugging context<a class="headerlink" href="#step-2-update-your-python-code-to-establish-a-debugging-context" title="Permalink to this headline"> </a></h2>
<p>To establish a debugging context between Databricks Connect and your cluster, your Python code must initialize the <code class="docutils literal notranslate"><span class="pre">DatabricksSession</span></code> class by calling <code class="docutils literal notranslate"><span class="pre">DatabricksSession.builder.getOrCreate()</span></code>.</p>
<p>Note that you do not need to specify settings such as your workspace’s instance name, an access token, or your cluster’s ID and port number when you initialize the <code class="docutils literal notranslate"><span class="pre">DatabricksSession</span></code> class. Databricks Connect gets this information from the configuration details that you already provided through the Databricks extension for Visual Studio Code earlier in this article.</p>
<p>For additional information about initializing the <code class="docutils literal notranslate"><span class="pre">DatabricksSession</span></code> class, see the Databricks Connect <a class="reference internal" href="../../databricks-connect/python/examples.html"><span class="doc">code examples</span></a>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If you use the Databricks extension for Visual Studio Code to set the authentication type to <a class="reference internal" href="../../auth/pat.html"><span class="doc">personal access tokens</span></a>, then the extension sets a related <code class="docutils literal notranslate"><span class="pre">SPARK_REMOTE</span></code> environment variable with debugging context settings for use by Databricks Connect. These debugging context settings include the related workspace instance name, personal access token, and cluster ID.</p>
<p>In Databricks Connect, you can use the <code class="docutils literal notranslate"><span class="pre">DatabricksSession</span></code> or <code class="docutils literal notranslate"><span class="pre">SparkSession</span></code> class along with <code class="docutils literal notranslate"><span class="pre">SPARK_REMOTE</span></code> and personal access token authentication to quickly and easily establish the debugging context programmatically. For other supported Databricks authentication types, you can use only the <code class="docutils literal notranslate"><span class="pre">DatabricksSession</span></code> class to establish the debugging context.</p>
<p>For more information, see <a class="reference internal" href="../../databricks-connect/python/install.html"><span class="doc">Set up the client</span></a> in the Databricks Connect documentation.</p>
</div>
</div>
<div class="section" id="step-3-enable-databricks-connect">
<h2>Step 3: Enable Databricks Connect<a class="headerlink" href="#step-3-enable-databricks-connect" title="Permalink to this headline"> </a></h2>
<p>With the extension opened and the <strong>Workspace</strong> section configured for your code project, do the following:</p>
<ol class="arabic">
<li><p>In the Visual Studio Code status bar, click the red <strong>Databricks Connect disabled</strong> button.</p></li>
<li><p>If the <strong>Cluster</strong> section is not already configured in the extension, the following message appears: “Please attach a cluster to use Databricks Connect.” Click <strong>Attach Cluster</strong> and select a cluster that meets the Databricks Connect requirements.</p></li>
<li><p>If the <strong>Cluster</strong> section is configured but the cluster is not compatible with Databricks Connect, click the red <strong>Databricks Connect disabled</strong> button, click <strong>Attach Cluster</strong>, and select a compatible cluster.</p></li>
<li><p>If the Databricks Connect package (and its dependencies) are not already installed, the following message appears: “For interactive debugging and autocompletion you need Databricks Connect. Would you like to install it in the environment <code class="docutils literal notranslate"><span class="pre">&lt;environment-name&gt;</span></code>.” Click <strong>Install</strong>.</p></li>
<li><p>In the Visual Studio Code status bar, the blue <strong>Databricks Connect enabled</strong> button appears.</p>
<p>If the red <strong>Databricks Connect disabled</strong> button still appears, click it, and complete the on-screen instructions to get the blue <strong>Databricks Connect enabled</strong> button to appear.</p>
</li>
<li><p>After the blue <strong>Databricks Connect enabled</strong> button appears, you are now ready to use Databricks Connect.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You do not need to configure the extension’s <strong>Sync Destination</strong> section in order for your code project to use Databricks Connect.</p>
<p>If you use Poetry, you can synchronize your <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> and <code class="docutils literal notranslate"><span class="pre">poetry.lock</span></code> files with the installed Databricks Connect package (and its dependencies) by running the following command. Be sure to replace <code class="docutils literal notranslate"><span class="pre">13.3.2</span></code> with the version of the Databricks Connect package that matches the one that was installed by the Databricks extension for Visual Studio Code for your project.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>add<span class="w"> </span>databricks-connect<span class="o">==</span><span class="m">13</span>.3.2
</pre></div>
</div>
</div>
</div>
<div class="section" id="step-4-run-or-debug-your-python-code">
<h2>Step 4: Run or debug your Python code<a class="headerlink" href="#step-4-run-or-debug-your-python-code" title="Permalink to this headline"> </a></h2>
<p>After you enable Databricks Connect for your code project, run or debug your Python file or notebook as follows.</p>
<p>To run or debug a Python (<code class="docutils literal notranslate"><span class="pre">.py</span></code>) file:</p>
<ol class="arabic">
<li><p>In your code project, open the Python file that you want to run or debug.</p></li>
<li><p>Set any debugging breakpoints within the Python file.</p></li>
<li><p>In the file editor’s title bar, click the drop-down arrow next to the play (<strong>Run or Debug</strong>) icon. Then in the drop-down list, select <strong>Debug Python File</strong>. This choice supports step-through debugging, breakpoints, watch expressions, call stacks, and similar features. This choice uses Databricks Connect to run Python code locally, run PySpark code on the cluster in the remote workspace, and send remote responses back to Visual Studio Code for local debugging.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Other choices, which do not support debugging, include:</p>
<ul class="simple">
<li><p><strong>Run Python File</strong> to use Databricks Connect to run the file or notebook, but without debugging support. This choice sends the file to the remote workspace, runs the file’s Python and PySpark code on the remote cluster in the workspace, and sends the remote response to the Visual Studio Code Terminal.</p></li>
<li><p><strong>Upload and Run File on Databricks</strong> to send the file to the remote workspace, runs the file’s Python and PySpark code on the remote cluster in the workspace, and sends the remote response to the Visual Studio Code terminal. This choice does not use Databricks Connect.</p></li>
<li><p><strong>Run File as Workflow on Databricks</strong> to send the file to the remote workspace, run the file’s Python and PySpark code on the cluster that is associated with an automated Databricks job, and send the results to an editor in Visual Studio Code. This choice does not use Databricks Connect.</p></li>
</ul>
<div class="figure align-default">
<img alt="Run File on Databricks editor command 0" src="../../../_images/run-file-editor.png" />
</div>
<p>The <strong>Run Current File in Interactive Window</strong> option, if available, attempts to run the file locally in a special Visual Studio Code interactive editor. Databricks does not recommend this option.</p>
</div>
</li>
</ol>
<p>To run or debug a Python Jupyter notebook (<code class="docutils literal notranslate"><span class="pre">.ipynb</span></code>):</p>
<ol class="arabic">
<li><p>In your code project, open the Python Jupyter notebook that you want to run or debug. Make sure the Python file is in Jupyter notebook format and has the extension <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can create a new Python Jupyter notebook by running the <strong>&gt;Create: New Jupyter Notebook</strong> command from within the <strong>Command Palette</strong>.</p>
</div>
</li>
<li><p>Click <strong>Run All Cells</strong> to run all cells without debugging, <strong>Execute Cell</strong> to run an individual corresponding cell without debugging, or <strong>Run by Line</strong> to run an individual cell line-by-line with limited debugging, with variable values displayed in the <strong>Jupyter</strong> panel (<strong>View &gt; Open View &gt; Jupyter</strong>).</p>
<p>For full debugging within an individual cell, set breakpoints, and then click <strong>Debug Cell</strong> in the menu next to the cell’s <strong>Run</strong> button.</p>
<p>After you click any of these options, you might be prompted to install missing Python Jupyter notebook package dependencies. Click to install.</p>
<p>For more information, see <a class="reference external" href="https://code.visualstudio.com/docs/datascience/jupyter-notebooks">Jupyter Notebooks in VS Code</a>.</p>
</li>
</ol>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../../../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../../../_static/js/localized.js"></script>
  <script type="text/javascript" src="../../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../../../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>