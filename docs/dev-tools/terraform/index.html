

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to manage entire Databricks workspaces along with the rest of cloud infrastructure using a flexible, powerful tool." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Databricks Terraform provider">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Databricks Terraform provider &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/dev-tools/terraform/index.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/dev-tools/terraform/index.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/dev-tools/terraform/index.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="top" title="Databricks on AWS" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../../en/dev-tools/terraform/index.html" class="notranslate">English</option>
    <option value="../../../ja/dev-tools/terraform/index.html" class="notranslate">日本語</option>
    <option value="../../../pt/dev-tools/terraform/index.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Databricks Terraform provider</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="databricks-terraform-provider">
<h1>Databricks Terraform provider<a class="headerlink" href="#databricks-terraform-provider" title="Permalink to this headline"> </a></h1>
<p><a class="reference external" href="https://www.terraform.io/">HashiCorp Terraform</a> is a popular open source tool for creating safe and predictable cloud infrastructure across several cloud providers. You can use the <a class="reference external" href="https://registry.terraform.io/providers/databricks/databricks/latest">Databricks Terraform provider</a> to manage your Databricks workspaces and the associated cloud infrastructure using a flexible, powerful tool. The goal of the Databricks Terraform provider is to support all Databricks REST APIs, supporting automation of the most complicated aspects of deploying and managing your data platforms. Databricks customers are using the Databricks Terraform provider to deploy and manage clusters and jobs and to configure data access. You use the Databricks Terraform provider to provision Databricks workspaces as well as the <a class="reference external" href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs">AWS Provider</a> to provision required AWS resources for these workspaces.</p>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline"> </a></h2>
<p>In this section, you install and configure requirements to use Terraform and the Databricks Terraform provider. You then configure Terraform authentication. Following this section, this article provides a <a class="reference internal" href="#sample-configuration"><span class="std std-ref">sample configuration</span></a> that you can experiment with to provision a Databricks notebook, cluster, and a job to run the notebook on the cluster, in an existing Databricks workspace.</p>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"> </a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section describes the requirements for creating resources at the Databricks on AWS account level by using Databricks OAuth, and for creating resources at the Databricks on AWS workspace level by using Databricks <a class="reference internal" href="../auth/pat.html"><span class="doc">personal access tokens</span></a>. To use other supported Databricks authentication types, see <a class="reference internal" href="../auth/index.html#auth-types"><span class="std std-ref">Supported Databricks authentication types</span></a>.</p>
</div>
<p>To use Terraform to create resources at the AWS account level, and to use the Databricks Terraform provider to create resources at the Databricks on AWS account level, you must have the following:</p>
<ul>
<li><p>An AWS account.</p></li>
<li><p>A Databricks on AWS account.</p></li>
<li><p>A service principal that has the account admin role in your Databricks account.</p></li>
<li><p>The Terraform CLI. See <a class="reference external" href="https://www.terraform.io/downloads.html">Download Terraform</a> on the Terraform website.</p></li>
<li><p>The following seven Databricks environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_CLIENT_ID</span></code>, set to the value of the client ID, also known as the application ID, of the service principal. See <a class="reference internal" href="../authentication-oauth.html"><span class="doc">Authentication using OAuth for service principals</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_CLIENT_SECRET</span></code>, set to the value of the client secret of the service principal. See <a class="reference internal" href="../authentication-oauth.html"><span class="doc">Authentication using OAuth for service principals</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_ACCOUNT_ID</span></code>, set to the value of the ID of your Databricks account. You can find this value in the corner of your <a class="reference external" href="https://accounts.cloud.databricks.com">Databricks account console</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TF_VAR_databricks_account_id</span></code>, also set to the value of the ID of your Databricks account.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AWS_ACCESS_KEY_ID</span></code>, set to the value of your AWS user’s access key ID. See <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys">Programmatic access</a> in the AWS General Reference.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AWS_SECRET_ACCESS_KEY</span></code>, set to the value of your AWS user’s secret access key. See <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys">Programmatic access</a> in the AWS General Reference.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AWS_REGION</span></code>, set to the value of the AWS Region code for your Databricks account. See <a class="reference external" href="https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints">Regional endpoints</a> in the AWS General Reference.</p></li>
</ul>
<p></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An account admin’s username and password can also be used to authenticate to the Terraform provider. Databricks strongly recommends that you use OAuth for service principals. To use a username and password, you must have the following environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_USERNAME</span></code>, set to the value of your Databricks account-level admin username.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_PASSWORD</span></code>, set to the value of the password for your Databricks account-level admin user.</p></li>
</ul>
</div>
<p>To set these environment variables, see your operating system’s documentation.</p>
</li>
</ul>
<p>To use the Databricks Terraform provider to also create resources at the Databricks workspace level, you must have the following:</p>
<ul>
<li><p>A Databricks workspace.</p></li>
<li><p>On your local development machine, you must have:</p>
<ul>
<li><p>The Terraform CLI. See <a class="reference external" href="https://www.terraform.io/downloads.html">Download Terraform</a> on the Terraform website.</p></li>
<li><p>One of the following:</p>
<ul>
<li><p>Databricks CLI version 0.205 or above, configured with your Databricks <a class="reference internal" href="../auth/pat.html"><span class="doc">personal access token</span></a> by running <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">configure</span> <span class="pre">--host</span> <span class="pre">&lt;workspace-url&gt;</span> <span class="pre">--profile</span> <span class="pre">&lt;some-unique-profile-name&gt;</span></code>. See <a class="reference internal" href="../cli/install.html"><span class="doc">Install or update the Databricks CLI</span></a> and <a class="reference internal" href="../cli/authentication.html#token-auth"><span class="std std-ref">Databricks personal access token authentication</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a security best practice when you authenticate with automated tools, systems, scripts, and apps, Databricks recommends that you use OAuth tokens.</p>
<p>If you use personal access token authentication, Databricks recommends using personal access tokens belonging to <a class="reference internal" href="../../administration-guide/users-groups/service-principals.html"><span class="doc">service principals</span></a> instead of workspace users. To create tokens for service principals, see <a class="reference internal" href="../../administration-guide/users-groups/service-principals.html#personal-access-tokens"><span class="std std-ref">Manage tokens for a service principal</span></a>.</p>
</div>
</li>
<li><p>The following Databricks environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_HOST</span></code>, set to the value of your Databricks <a class="reference internal" href="../../workspace/workspace-details.html#workspace-url"><span class="std std-ref">workspace instance URL</span></a>, for example <code class="docutils literal notranslate"><span class="pre">https://dbc-1234567890123456.cloud.databricks.com</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_CLIENT_ID</span></code>, set to the value of the client ID, also known as the application ID, of the service principal. See <a class="reference internal" href="../authentication-oauth.html"><span class="doc">Authentication using OAuth for service principals</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_CLIENT_SECRET</span></code>, set to the value of the client secret of the service principal. See <a class="reference internal" href="../authentication-oauth.html"><span class="doc">Authentication using OAuth for service principals</span></a>.</p></li>
</ul>
<p>Alternatively, you can use a personal access token instead of a service principal’s client ID and client secret:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_TOKEN</span></code>, set to the value of your Databricks <a class="reference internal" href="../auth/pat.html"><span class="doc">personal access token</span></a>. See also <a class="reference internal" href="../../administration-guide/access-control/tokens.html"><span class="doc">Manage personal access tokens</span></a>.</p></li>
</ul>
<p>To set these environment variables, see your operating system’s documentation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a security best practice when you authenticate with automated tools, systems, scripts, and apps, Databricks recommends that you use OAuth tokens.</p>
<p>If you use personal access token authentication, Databricks recommends using personal access tokens belonging to <a class="reference internal" href="../../administration-guide/users-groups/service-principals.html"><span class="doc">service principals</span></a> instead of workspace users. To create tokens for service principals, see <a class="reference internal" href="../../administration-guide/users-groups/service-principals.html#personal-access-tokens"><span class="std std-ref">Manage tokens for a service principal</span></a>.</p>
</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="configure-terraform-authentication">
<h3>Configure Terraform authentication<a class="headerlink" href="#configure-terraform-authentication" title="Permalink to this headline"> </a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section describes how to create resources at the Databricks on AWS account level by using Databricks OAuth, and how to create resources at the Databricks on AWS workspace level by using Databricks <a class="reference internal" href="../auth/pat.html"><span class="doc">personal access tokens</span></a>. To use other supported Databricks authentication types, see <a class="reference internal" href="../auth/index.html#auth-types"><span class="std std-ref">Supported Databricks authentication types</span></a>.</p>
</div>
<p>To create a Databricks personal access token:</p>
<ol class="arabic simple">
<li><p>In your Databricks workspace, click your Databricks username in the top bar, and then select <strong>User Settings</strong> from the drop down.</p></li>
<li><p>Click <strong>Developer</strong>.</p></li>
<li><p>Next to <strong>Access tokens</strong>, click <strong>Manage</strong>.</p></li>
<li><p>Click <strong>Generate new token</strong>.</p></li>
<li><p>(Optional) Enter a comment that helps you to identify this token in the future, and change the token’s default lifetime of 90 days. To create a token with no lifetime (not recommended), leave the <strong>Lifetime (days)</strong> box empty (blank).</p></li>
<li><p>Click <strong>Generate</strong>.</p></li>
<li><p>Copy the displayed token to a secure location, and then click <strong>Done</strong>.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be sure to save the copied token in a secure location. Do not share your copied token with others. If you lose the copied token, you cannot regenerate that exact same token. Instead, you must repeat this procedure to create a new token. If you lose the copied token, or you believe that the token has been compromised, Databricks strongly recommends that you immediately delete that token from your workspace by clicking the trash can (<strong>Revoke</strong>) icon next to the token on the <strong>Access tokens</strong> page.</p>
<p>If you are not able to create or use tokens in your workspace, this might be because your workspace administrator has disabled tokens or has not given you permission to create or use tokens. See your workspace administrator or the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../administration-guide/access-control/tokens.html#enable-tokens"><span class="std std-ref">Enable or disable personal access token authentication for the workspace</span></a></p></li>
<li><p><a class="reference internal" href="../../security/auth-authz/api-access-permissions.html#pat"><span class="std std-ref">Personal access token permissions</span></a></p></li>
</ul>
</div>
<p>In your Terraform project, you must create a configuration to authenticate Terraform with your AWS account, and to authenticate the Databricks Terraform provider with your Databricks on AWS account and your Databricks workspace, as follows:</p>
<ol class="arabic">
<li><p>In your terminal, create an empty directory and then switch to it. (Each separate set of Terraform configuration files must be in its own directory, which is called a Terraform <em>project</em>.)  For example: <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">terraform_demo</span> <span class="pre">&amp;&amp;</span> <span class="pre">cd</span> <span class="pre">terraform_demo</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>terraform_demo<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>terraform_demo
</pre></div>
</div>
</li>
<li><p>In this empty directory, create a file named <code class="docutils literal notranslate"><span class="pre">auth.tf</span></code>. Add the following content to this file, depending on your authentication method, and then save the file.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you use Visual Studio Code, the <a class="reference external" href="https://marketplace.visualstudio.com/items?itemName=HashiCorp.terraform">HashiCorp Terraform</a> extension for Visual Studio Code adds editing features for Terraform files such as syntax highlighting, IntelliSense, code navigation, code formatting, a module explorer, and much more.</p>
</div>
<p>To use environment variables to authenticate at the AWS account level and at the Databricks on AWS account level, and to use a Databricks CLI configuration profile to authenticate at the Databricks workspace level, add the following content.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">variable</span> <span class="s2">&quot;databricks_connection_profile&quot;</span> <span class="p">{}</span>

<span class="n">terraform</span> <span class="p">{</span>
  <span class="n">required_providers</span> <span class="p">{</span>
    <span class="n">databricks</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;databricks/databricks&quot;</span>
    <span class="p">}</span>
    <span class="n">aws</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;hashicorp/aws&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">provider</span> <span class="s2">&quot;aws&quot;</span> <span class="p">{}</span>

<span class="c1"># Use Databricks CLI authentication.</span>
<span class="n">provider</span> <span class="s2">&quot;databricks&quot;</span> <span class="p">{</span>
  <span class="n">profile</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">databricks_connection_profile</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To use environment variables to authenticate at the AWS account level, the Databricks on AWS account level, and the Databricks workspace level, add the following content instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">terraform</span> <span class="p">{</span>
  <span class="n">required_providers</span> <span class="p">{</span>
    <span class="n">databricks</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;databricks/databricks&quot;</span>
    <span class="p">}</span>
    <span class="n">aws</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;hashicorp/aws&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">provider</span> <span class="s2">&quot;aws&quot;</span> <span class="p">{}</span>

<span class="c1"># Use environment variables for authentication.</span>
<span class="n">provider</span> <span class="s2">&quot;databricks&quot;</span> <span class="p">{}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you want to create resources only at the Databricks workspace level, you can remove the <code class="docutils literal notranslate"><span class="pre">aws</span></code> block from any of the preceding <code class="docutils literal notranslate"><span class="pre">required_providers</span></code> declarations along with the <code class="docutils literal notranslate"><span class="pre">provider</span> <span class="pre">&quot;aws&quot;</span></code> declaration.</p>
</div>
</li>
<li><p>If you use a Databricks CLI configuration profile to authenticate at the Databricks workspace level, create another file named <code class="docutils literal notranslate"><span class="pre">auth.auto.tfvars</span></code>, add the following content to the file, and change the name of the profile that you want to use as needed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">databricks_connection_profile</span> <span class="o">=</span> <span class="s2">&quot;DEFAULT&quot;</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><code class="docutils literal notranslate"><span class="pre">*.auto.tfvars</span></code> files enable you to specify variable values separately from your code. This makes your <code class="docutils literal notranslate"><span class="pre">.tf</span></code> files more modular and reusable across different usage scenarios.</p>
</div>
</li>
<li><p>Initialize the working directory containing the <code class="docutils literal notranslate"><span class="pre">auth.tf</span></code> file by running the <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">init</span></code> command. For more information, see <a class="reference external" href="https://www.terraform.io/docs/cli/commands/init.html">Command: init</a> on the Terraform website.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>terraform<span class="w"> </span>init
</pre></div>
</div>
<p>Terraform downloads the specified providers and installs them in a hidden subdirectory of your current working directory, named <code class="docutils literal notranslate"><span class="pre">.terraform</span></code>. The <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">init</span></code> command prints out which version of the providers were installed. Terraform also creates a lock file named <code class="docutils literal notranslate"><span class="pre">.terraform.lock.hcl</span></code> which specifies the exact provider versions used, so that you can control when you want to update the providers used for your project.</p>
</li>
<li><p>Check whether your project was configured correctly by running the <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">plan</span></code> command. If there are any errors, fix them, and run the command again. For more information, see <a class="reference external" href="https://www.terraform.io/docs/cli/commands/plan.html">Command: plan</a> on the Terraform website.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>terraform<span class="w"> </span>plan
</pre></div>
</div>
</li>
<li><p>Apply the changes required to reach the desired state of the configuration by running the <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">apply</span></code> command.  For more information, see <a class="reference external" href="https://www.terraform.io/docs/cli/commands/apply.html">Command: apply</a> on the Terraform website.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>terraform<span class="w"> </span>apply
</pre></div>
</div>
<p>Because no resources have yet been specified in the <code class="docutils literal notranslate"><span class="pre">auth.tf</span></code> file, the output is <code class="docutils literal notranslate"><span class="pre">Apply</span> <span class="pre">complete!</span> <span class="pre">Resources:</span> <span class="pre">0</span> <span class="pre">added,</span> <span class="pre">0</span> <span class="pre">changed,</span> <span class="pre">0</span> <span class="pre">destroyed.</span></code> Also, Terraform writes data into a file called <code class="docutils literal notranslate"><span class="pre">terraform.tfstate</span></code>. To create resources, continue with <a class="reference internal" href="#sample-configuration"><span class="std std-ref">Sample configuration</span></a>, <a class="reference internal" href="#next-steps"><span class="std std-ref">Next steps</span></a>, or both to specify the desired resources to create, and then run the <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">apply</span></code> command again. Terraform stores the IDs and properties of the resources it manages in this <code class="docutils literal notranslate"><span class="pre">terraform.tfstate</span></code> file, so that it can update or destroy those resources going forward.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="sample-configuration">
<h2>Sample configuration<a class="headerlink" href="#sample-configuration" title="Permalink to this headline"> </a></h2>
<p>This section provides a sample configuration that you can experiment with to provision a Databricks notebook, a cluster, and a job to run the notebook on the cluster, in an existing Databricks workspace. It assumes that you have already set up the <a class="reference internal" href="#requirements"><span class="std std-ref">requirements</span></a>, as well as created a Terraform project and configured the project with Terraform authentication as described in the previous section.</p>
<ol class="arabic">
<li><p>Create another file named <code class="docutils literal notranslate"><span class="pre">me.tf</span></code> in the same directory that you created in <a class="reference internal" href="#configure-terraform-authentication"><span class="std std-ref">Configure Terraform authentication</span></a>, and add the following code. This file gets information about the current user (you):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve information about the current user.</span>
<span class="n">data</span> <span class="s2">&quot;databricks_current_user&quot;</span> <span class="s2">&quot;me&quot;</span> <span class="p">{}</span>
</pre></div>
</div>
</li>
<li><p>Create another file named <code class="docutils literal notranslate"><span class="pre">notebook.tf</span></code>, and add the following code. This file represents the notebook.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">variable</span> <span class="s2">&quot;notebook_subdirectory&quot;</span> <span class="p">{</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;A name for the subdirectory to store the notebook.&quot;</span>
  <span class="nb">type</span>        <span class="o">=</span> <span class="n">string</span>
  <span class="n">default</span>     <span class="o">=</span> <span class="s2">&quot;Terraform&quot;</span>
<span class="p">}</span>

<span class="n">variable</span> <span class="s2">&quot;notebook_filename&quot;</span> <span class="p">{</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;The notebook&#39;s filename.&quot;</span>
  <span class="nb">type</span>        <span class="o">=</span> <span class="n">string</span>
<span class="p">}</span>

<span class="n">variable</span> <span class="s2">&quot;notebook_language&quot;</span> <span class="p">{</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;The language of the notebook.&quot;</span>
  <span class="nb">type</span>        <span class="o">=</span> <span class="n">string</span>
<span class="p">}</span>

<span class="n">resource</span> <span class="s2">&quot;databricks_notebook&quot;</span> <span class="s2">&quot;this&quot;</span> <span class="p">{</span>
  <span class="n">path</span>     <span class="o">=</span> <span class="s2">&quot;$</span><span class="si">{data.databricks_current_user.me.home}</span><span class="s2">/$</span><span class="si">{var.notebook_subdirectory}</span><span class="s2">/$</span><span class="si">{var.notebook_filename}</span><span class="s2">&quot;</span>
  <span class="n">language</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">notebook_language</span>
  <span class="n">source</span>   <span class="o">=</span> <span class="s2">&quot;./$</span><span class="si">{var.notebook_filename}</span><span class="s2">&quot;</span>
<span class="p">}</span>

<span class="n">output</span> <span class="s2">&quot;notebook_url&quot;</span> <span class="p">{</span>
 <span class="n">value</span> <span class="o">=</span> <span class="n">databricks_notebook</span><span class="o">.</span><span class="n">this</span><span class="o">.</span><span class="n">url</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Create another file named <code class="docutils literal notranslate"><span class="pre">notebook.auto.tfvars</span></code>, and add the following code. This file specifies the notebook’s properties.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">notebook_subdirectory</span> <span class="o">=</span> <span class="s2">&quot;Terraform&quot;</span>
<span class="n">notebook_filename</span>     <span class="o">=</span> <span class="s2">&quot;notebook-getting-started.py&quot;</span>
<span class="n">notebook_language</span>     <span class="o">=</span> <span class="s2">&quot;PYTHON&quot;</span>
</pre></div>
</div>
</li>
<li><p>Create another file named <code class="docutils literal notranslate"><span class="pre">notebook-getting-started.py</span></code>, and add the following code. This file represents the notebook’s contents.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">spark</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>Create another file named <code class="docutils literal notranslate"><span class="pre">cluster.tf</span></code>, and add the following code. This file represents the cluster.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">variable</span> <span class="s2">&quot;cluster_name&quot;</span> <span class="p">{</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;A name for the cluster.&quot;</span>
  <span class="nb">type</span>        <span class="o">=</span> <span class="n">string</span>
  <span class="n">default</span>     <span class="o">=</span> <span class="s2">&quot;My Cluster&quot;</span>
<span class="p">}</span>

<span class="n">variable</span> <span class="s2">&quot;cluster_autotermination_minutes&quot;</span> <span class="p">{</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;How many minutes before automatically terminating due to inactivity.&quot;</span>
  <span class="nb">type</span>        <span class="o">=</span> <span class="n">number</span>
  <span class="n">default</span>     <span class="o">=</span> <span class="mi">60</span>
<span class="p">}</span>

<span class="n">variable</span> <span class="s2">&quot;cluster_num_workers&quot;</span> <span class="p">{</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;The number of workers.&quot;</span>
  <span class="nb">type</span>        <span class="o">=</span> <span class="n">number</span>
  <span class="n">default</span>     <span class="o">=</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="c1"># Create the cluster with the &quot;smallest&quot; amount</span>
<span class="c1"># of resources allowed.</span>
<span class="n">data</span> <span class="s2">&quot;databricks_node_type&quot;</span> <span class="s2">&quot;smallest&quot;</span> <span class="p">{</span>
  <span class="n">local_disk</span> <span class="o">=</span> <span class="n">true</span>
<span class="p">}</span>

<span class="c1"># Use the latest Databricks Runtime</span>
<span class="c1"># Long Term Support (LTS) version.</span>
<span class="n">data</span> <span class="s2">&quot;databricks_spark_version&quot;</span> <span class="s2">&quot;latest_lts&quot;</span> <span class="p">{</span>
  <span class="n">long_term_support</span> <span class="o">=</span> <span class="n">true</span>
<span class="p">}</span>

<span class="n">resource</span> <span class="s2">&quot;databricks_cluster&quot;</span> <span class="s2">&quot;this&quot;</span> <span class="p">{</span>
  <span class="n">cluster_name</span>            <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">cluster_name</span>
  <span class="n">node_type_id</span>            <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">databricks_node_type</span><span class="o">.</span><span class="n">smallest</span><span class="o">.</span><span class="n">id</span>
  <span class="n">spark_version</span>           <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">databricks_spark_version</span><span class="o">.</span><span class="n">latest_lts</span><span class="o">.</span><span class="n">id</span>
  <span class="n">autotermination_minutes</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">cluster_autotermination_minutes</span>
  <span class="n">num_workers</span>             <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">cluster_num_workers</span>
<span class="p">}</span>

<span class="n">output</span> <span class="s2">&quot;cluster_url&quot;</span> <span class="p">{</span>
 <span class="n">value</span> <span class="o">=</span> <span class="n">databricks_cluster</span><span class="o">.</span><span class="n">this</span><span class="o">.</span><span class="n">url</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Create another file named <code class="docutils literal notranslate"><span class="pre">cluster.auto.tfvars</span></code>, and add the following code. This file specifies the cluster’s properties.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cluster_name</span>                    <span class="o">=</span> <span class="s2">&quot;My Cluster&quot;</span>
<span class="n">cluster_autotermination_minutes</span> <span class="o">=</span> <span class="mi">60</span>
<span class="n">cluster_num_workers</span>             <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p>Create another file named <code class="docutils literal notranslate"><span class="pre">job.tf</span></code>, and add the following code. This file represents the job that runs the notebook on the cluster.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">variable</span> <span class="s2">&quot;job_name&quot;</span> <span class="p">{</span>
  <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;A name for the job.&quot;</span>
  <span class="nb">type</span>        <span class="o">=</span> <span class="n">string</span>
  <span class="n">default</span>     <span class="o">=</span> <span class="s2">&quot;My Job&quot;</span>
<span class="p">}</span>

<span class="n">resource</span> <span class="s2">&quot;databricks_job&quot;</span> <span class="s2">&quot;this&quot;</span> <span class="p">{</span>
  <span class="n">name</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">job_name</span>
  <span class="n">existing_cluster_id</span> <span class="o">=</span> <span class="n">databricks_cluster</span><span class="o">.</span><span class="n">this</span><span class="o">.</span><span class="n">cluster_id</span>
  <span class="n">notebook_task</span> <span class="p">{</span>
    <span class="n">notebook_path</span> <span class="o">=</span> <span class="n">databricks_notebook</span><span class="o">.</span><span class="n">this</span><span class="o">.</span><span class="n">path</span>
  <span class="p">}</span>
  <span class="n">email_notifications</span> <span class="p">{</span>
    <span class="n">on_success</span> <span class="o">=</span> <span class="p">[</span> <span class="n">data</span><span class="o">.</span><span class="n">databricks_current_user</span><span class="o">.</span><span class="n">me</span><span class="o">.</span><span class="n">user_name</span> <span class="p">]</span>
    <span class="n">on_failure</span> <span class="o">=</span> <span class="p">[</span> <span class="n">data</span><span class="o">.</span><span class="n">databricks_current_user</span><span class="o">.</span><span class="n">me</span><span class="o">.</span><span class="n">user_name</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">output</span> <span class="s2">&quot;job_url&quot;</span> <span class="p">{</span>
  <span class="n">value</span> <span class="o">=</span> <span class="n">databricks_job</span><span class="o">.</span><span class="n">this</span><span class="o">.</span><span class="n">url</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Create another file named <code class="docutils literal notranslate"><span class="pre">job.auto.tfvars</span></code>, and add the following code. This file specifies the jobs’s properties.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">job_name</span> <span class="o">=</span> <span class="s2">&quot;My Job&quot;</span>
</pre></div>
</div>
</li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">plan</span></code>. If there are any errors, fix them, and then run the command again.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">apply</span></code>.</p></li>
<li><p>Verify that the notebook, cluster, and job were created: in the output of the <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">apply</span></code> command, find the URLs for <code class="docutils literal notranslate"><span class="pre">notebook_url</span></code>, <code class="docutils literal notranslate"><span class="pre">cluster_url</span></code>, and <code class="docutils literal notranslate"><span class="pre">job_url</span></code>, and go to them.</p></li>
<li><p>Run the job: on the <strong>Jobs</strong> page, click <strong>Run Now</strong>. After the job finishes, check your email inbox.</p></li>
<li><p>When you are done with this sample, delete the notebook, cluster, and job from the Databricks workspace by running <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">destroy</span></code>.</p></li>
<li><p>Verify that the notebook, cluster, and job were deleted: refresh the notebook, cluster, and <strong>Jobs</strong> pages to each display a message that the resource cannot be found.</p></li>
</ol>
</div>
<div class="section" id="next-steps">
<h2>Next steps<a class="headerlink" href="#next-steps" title="Permalink to this headline"> </a></h2>
<ol class="arabic simple">
<li><p><a class="reference internal" href="e2-workspace.html"><span class="doc">Create a workspace and related infrastructure</span></a>.</p></li>
<li><p><a class="reference internal" href="workspace-management.html"><span class="doc">Manage workspace resources</span></a> for a Databricks workspace.</p></li>
</ol>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline"> </a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For Terraform-specific support, see the <a class="reference external" href="https://discuss.hashicorp.com/c/terraform-core">Latest Terraform topics</a> on the HashiCorp Discuss website. For issues specific to the Databricks Terraform Provider, see <a class="reference external" href="https://github.com/databrickslabs/terraform-provider-databricks/issues">Issues</a> in the <strong>databrickslabs/terraform-provider-databricks</strong> GitHub repository.</p>
</div>
<div class="section" id="error-failed-to-install-provider">
<span id="troubleshooting-failed-to-install-provider"></span><h3>Error: Failed to install provider<a class="headerlink" href="#error-failed-to-install-provider" title="Permalink to this headline"> </a></h3>
<p><strong>Issue</strong>: If you did not check in a <code class="docutils literal notranslate"><span class="pre">terraform.lock.hcl</span></code> file to your version control system, and you run the <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">init</span></code> command, the following message appears: <code class="docutils literal notranslate"><span class="pre">Failed</span> <span class="pre">to</span> <span class="pre">install</span> <span class="pre">provider</span></code>. Additional output may include a message similar to the following:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Error while installing databrickslabs/databricks: v1.0.0: checksum list has no SHA-256 hash for &quot;https://github.com/databricks/terraform-provider-databricks/releases/download/v1.0.0/terraform-provider-databricks_1.0.0_darwin_amd64.zip&quot;
</pre></div>
</div>
<p><strong>Cause</strong>: Your Terraform configurations reference outdated Databricks Terraform providers.</p>
<p><strong>Solution</strong>:</p>
<ol class="arabic">
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">databrickslabs/databricks</span></code> with <code class="docutils literal notranslate"><span class="pre">databricks/databricks</span></code> in all of your <code class="docutils literal notranslate"><span class="pre">.tf</span></code> files.</p>
<p>To automate these replacements, run the following Python command from the parent folder that contains the <code class="docutils literal notranslate"><span class="pre">.tf</span></code> files to update:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;$(curl -Ls https://dbricks.co/updtfns)&quot;</span>
</pre></div>
</div>
</li>
<li><p>Run the following Terraform command and then approve the changes when prompted:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>terraform<span class="w"> </span>state<span class="w"> </span>replace-provider<span class="w"> </span>databrickslabs/databricks<span class="w"> </span>databricks/databricks
</pre></div>
</div>
<p>For information about this command, see <a class="reference external" href="https://www.terraform.io/cli/commands/state/replace-provider">Command: state replace-provider</a> in the Terraform documentation.</p>
</li>
<li><p>Verify the changes by running the following Terraform command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>terraform<span class="w"> </span>init
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="error-failed-to-query-available-provider-packages">
<h3>Error: Failed to query available provider packages<a class="headerlink" href="#error-failed-to-query-available-provider-packages" title="Permalink to this headline"> </a></h3>
<p><strong>Issue</strong>: If you did not check in a <code class="docutils literal notranslate"><span class="pre">terraform.lock.hcl</span></code> file to your version control system, and you run the <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">init</span></code> command, the following message appears: <code class="docutils literal notranslate"><span class="pre">Failed</span> <span class="pre">to</span> <span class="pre">query</span> <span class="pre">available</span> <span class="pre">provider</span> <span class="pre">packages</span></code>.</p>
<p><strong>Cause</strong>: Your Terraform configurations reference outdated Databricks Terraform providers.</p>
<p><strong>Solution</strong>: Follow the solution instructions in <a class="reference internal" href="#troubleshooting-failed-to-install-provider"><span class="std std-ref">Error: Failed to install provider</span></a>.</p>
</div>
</div>
<div class="section" id="additional-examples">
<h2>Additional examples<a class="headerlink" href="#additional-examples" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="e2-workspace.html"><span class="doc">Create Databricks workspaces using Terraform</span></a></p></li>
</ul>
<ul class="simple">
<li><p><a class="reference internal" href="workspace-management.html"><span class="doc">Manage Databricks workspaces using Terraform</span></a></p></li>
<li><p><a class="reference internal" href="../../compute/index.html"><span class="doc">Create clusters</span></a></p></li>
<li><p><a class="reference internal" href="cluster-notebook-job.html"><span class="doc">Create a cluster, a notebook, and a job</span></a></p></li>
<li><p>Control access to clusters: see <a class="reference internal" href="../../security/auth-authz/access-control/cluster-acl.html#terraform-integration"><span class="std std-ref">Cluster access control</span></a></p></li>
<li><p>Control access to jobs: see <a class="reference internal" href="../../security/auth-authz/access-control/jobs-acl.html#terraform-integration"><span class="std std-ref">Jobs access control</span></a></p></li>
<li><p><a class="reference internal" href="../../security/auth-authz/access-control/secret-acl.html#terraform-integration"><span class="std std-ref">Control access to secrets</span></a></p></li>
<li><p><a class="reference internal" href="../../data-governance/table-acls/object-privileges.html#privilege-types"><span class="std std-ref">Control access to Databricks SQL tables</span></a></p></li>
<li><p><a class="reference external" href="https://github.com/databricks/terraform-databricks-examples">Implement CI/CD pipelines to deploy Databricks resources using the Databricks Terraform provider</a></p></li>
<li><p><a class="reference external" href="https://github.com/databricks/terraform-databricks-examples/tree/main/examples/dbsql-nyc-taxi-trip-analysis">Create a sample Databricks SQL dashboard</a></p></li>
</ul>
<ul class="simple">
<li><p><a class="reference internal" href="../../archive/admin-guide/assume-role.html#automated-configuration-using-terraform"><span class="std std-ref">Configure AWS IAM roles and their cluster attachment</span></a></p></li>
<li><p><a class="reference internal" href="../../compute/graviton.html#databricks-terraform-provider"><span class="std std-ref">Create AWS Graviton-enabled clusters</span></a></p></li>
<li><p><a class="reference internal" href="../../administration-guide/account-settings/billable-usage-delivery.html#automated-configuration-using-terraform"><span class="std std-ref">Configure usage log delivery</span></a></p></li>
</ul>
</div>
<div class="section" id="additional-resources">
<h2>Additional resources<a class="headerlink" href="#additional-resources" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://registry.terraform.io/providers/databricks/databricks/latest/docs">Databricks Provider Documentation</a> on the Terraform Registry website</p></li>
<li><p><a class="reference external" href="https://www.terraform.io/docs/index.html">Terraform Documentation</a> on the Terraform website</p></li>
<li><p>The <a class="reference external" href="https://github.com/databricks/terraform-databricks-examples">terraform-databricks-examples</a> repository in GitHub</p></li>
</ul>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../../_static/js/localized.js"></script>
  <script type="text/javascript" src="../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>