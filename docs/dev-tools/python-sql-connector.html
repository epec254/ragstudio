

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Demonstrates how to use the Databricks SQL Connector for Python, a Python library that allows you to run SQL commands on Databricks compute resources." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Databricks SQL Connector for Python">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Databricks SQL Connector for Python &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/dev-tools/python-sql-connector.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/dev-tools/python-sql-connector.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/dev-tools/python-sql-connector.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="top" title="Databricks on AWS" href="../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../en/dev-tools/python-sql-connector.html" class="notranslate">English</option>
    <option value="../../ja/dev-tools/python-sql-connector.html" class="notranslate">日本語</option>
    <option value="../../pt/dev-tools/python-sql-connector.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Databricks SQL Connector for Python</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="databricks-sql-connector-for-python">
<span id="dbsqlconnpy"></span><h1>Databricks SQL Connector for Python<a class="headerlink" href="#databricks-sql-connector-for-python" title="Permalink to this headline"> </a></h1>
<p>The <a class="reference external" href="https://github.com/databricks/databricks-sql-python">Databricks SQL Connector for Python</a> is a Python library that allows you to use Python code to run SQL commands on Databricks clusters and Databricks SQL warehouses. The Databricks SQL Connector for Python is easier to set up and use than similar Python libraries such as <a class="reference internal" href="pyodbc.html"><span class="doc">pyodbc</span></a>. This library follows <a class="reference external" href="https://www.python.org/dev/peps/pep-0249/">PEP 249 – Python Database API Specification v2.0</a>.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li><p>A development machine running Python &gt;=3.8 and &lt;=3.11.</p></li>
<li><p>Databricks recommends that you use Python virtual environments, such as those provided by <a class="reference external" href="https://docs.python.org/3/library/venv.html">venv</a> that are included with Python. Virtual environments help to ensure that you are using the correct versions of Python and the Databricks SQL Connector for Python together. Setting up and using virtual environments is outside of the scope of this article. For more information, see <a class="reference external" href="https://packaging.python.org/en/latest/tutorials/installing-packages/#creating-and-using-virtual-environments">Creating virtual environments</a>.</p></li>
<li><p>An existing <a class="reference internal" href="../compute/index.html"><span class="doc">cluster</span></a> or <a class="reference internal" href="../compute/sql-warehouse/create-sql-warehouse.html"><span class="doc">SQL warehouse</span></a>.</p></li>
</ul>
</div>
<div class="section" id="get-started">
<h2>Get started<a class="headerlink" href="#get-started" title="Permalink to this headline"> </a></h2>
<ul>
<li><p>Install the Databricks SQL Connector for Python library on your development machine by running <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">databricks-sql-connector</span></code> or <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">databricks-sql-connector</span></code>.</p></li>
<li><p>Gather the following information for the cluster or SQL warehouse that you want to use:</p>
<div class="js-code-language-tabs compound">
<div class="compound-first compound" lang="Cluster">
<ul class="simple">
<li><p>The server hostname of the cluster. You can get this from the <strong>Server Hostname</strong> value in the <strong><a class="reference internal" href="../integrations/jdbc-odbc-bi.html#connection-details-cluster"><span class="std std-ref">Advanced Options &gt; JDBC/ODBC</span></a></strong> tab for your cluster.</p></li>
<li><p>The HTTP path of the cluster. You can get this from the <strong>HTTP Path</strong> value in the <strong><a class="reference internal" href="../integrations/jdbc-odbc-bi.html#connection-details-cluster"><span class="std std-ref">Advanced Options &gt; JDBC/ODBC</span></a></strong> tab for your cluster.</p></li>
</ul>
</div>
<div class="compound-last compound" lang="SQL&amp;nbsp;warehouse">
<ul class="simple">
<li><p>The server hostname of the SQL warehouse. You can get this from the <strong>Server Hostname</strong> value in the <a class="reference internal" href="../integrations/jdbc-odbc-bi.html#connection-details-sql-warehouse"><span class="std std-ref">Connection Details</span></a> tab for your SQL warehouse.</p></li>
<li><p>The HTTP path of the SQL warehouse. You can get this from the <strong>HTTP Path</strong> value in the <a class="reference internal" href="../integrations/jdbc-odbc-bi.html#connection-details-sql-warehouse"><span class="std std-ref">Connection Details</span></a> tab for your SQL warehouse.</p></li>
</ul>
</div>
</div>
</li>
</ul>
</div>
<div class="section" id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline"> </a></h2>
<p>The Databricks SQL Connector for Python supports the following Databricks authentication types:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#auth-pat"><span class="std std-ref">Databricks personal access token authentication</span></a></p></li>
<li><p><a class="reference internal" href="#auth-username-password"><span class="std std-ref">Username and password authentication</span></a></p></li>
<li><p><a class="reference internal" href="#auth-u2m"><span class="std std-ref">OAuth user-to-machine (U2M) authentication</span></a></p></li>
<li><p><a class="reference internal" href="#auth-m2m"><span class="std std-ref">OAuth machine-to-machine (M2M) authentication</span></a></p></li>
</ul>
<div class="section" id="databricks-personal-access-token-authentication">
<span id="auth-pat"></span><h3>Databricks personal access token authentication<a class="headerlink" href="#databricks-personal-access-token-authentication" title="Permalink to this headline"> </a></h3>
</div>
<p>To use the Databricks SQL Connector for Python with Databricks <a class="reference internal" href="auth/pat.html"><span class="doc">personal access token authentication</span></a>, you must first create a Databricks personal access token, as follows:</p>
<ol class="arabic simple">
<li><p>In your Databricks workspace, click your Databricks username in the top bar, and then select <strong>User Settings</strong> from the drop down.</p></li>
<li><p>Click <strong>Developer</strong>.</p></li>
<li><p>Next to <strong>Access tokens</strong>, click <strong>Manage</strong>.</p></li>
<li><p>Click <strong>Generate new token</strong>.</p></li>
<li><p>(Optional) Enter a comment that helps you to identify this token in the future, and change the token’s default lifetime of 90 days. To create a token with no lifetime (not recommended), leave the <strong>Lifetime (days)</strong> box empty (blank).</p></li>
<li><p>Click <strong>Generate</strong>.</p></li>
<li><p>Copy the displayed token to a secure location, and then click <strong>Done</strong>.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be sure to save the copied token in a secure location. Do not share your copied token with others. If you lose the copied token, you cannot regenerate that exact same token. Instead, you must repeat this procedure to create a new token. If you lose the copied token, or you believe that the token has been compromised, Databricks strongly recommends that you immediately delete that token from your workspace by clicking the trash can (<strong>Revoke</strong>) icon next to the token on the <strong>Access tokens</strong> page.</p>
<p>If you are not able to create or use tokens in your workspace, this might be because your workspace administrator has disabled tokens or has not given you permission to create or use tokens. See your workspace administrator or the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../administration-guide/access-control/tokens.html#enable-tokens"><span class="std std-ref">Enable or disable personal access token authentication for the workspace</span></a></p></li>
<li><p><a class="reference internal" href="../security/auth-authz/api-access-permissions.html#pat"><span class="std std-ref">Personal access token permissions</span></a></p></li>
</ul>
</div>
<p>To authenticate the Databricks SQL Connector for Python, use the following code snippet. This snippet assumes that you have set the following environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_SERVER_HOSTNAME</span></code>set to the <strong>Server Hostname</strong> value for your cluster or SQL warehouse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_HTTP_PATH</span></code>, set to <strong>HTTP Path</strong> value for your cluster or SQL warehouse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_TOKEN</span></code>, set to the Databricks personal access token.</p></li>
</ul>
<p>To set environment variables, see your operating system’s documentation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">databricks</span> <span class="kn">import</span> <span class="n">sql</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">with</span> <span class="n">sql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">server_hostname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_SERVER_HOSTNAME&quot;</span><span class="p">),</span>
                 <span class="n">http_path</span>       <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_HTTP_PATH&quot;</span><span class="p">),</span>
                 <span class="n">access_token</span>    <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_TOKEN&quot;</span><span class="p">))</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
<span class="c1"># ...</span>
</pre></div>
</div>
<div class="section" id="username-and-password-authentication">
<span id="auth-username-password"></span><h3>Username and password authentication<a class="headerlink" href="#username-and-password-authentication" title="Permalink to this headline"> </a></h3>
<p>To authenticate the Databricks SQL Connector for Python with username and password authentication, also known as <a class="reference internal" href="auth/basic.html"><span class="doc">basic authentication</span></a>, use the following code snippet. This snippet assumes that you have set the following environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_SERVER_HOSTNAME</span></code>set to the <strong>Server Hostname</strong> value for your cluster or SQL warehouse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_HTTP_PATH</span></code>, set to <strong>HTTP Path</strong> value for your cluster or SQL warehouse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_USERNAME</span></code>, set to the Databricks user account’s username.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_PASSWORD</span></code>, set to the Databricks user account’s password.</p></li>
</ul>
<p>To set environment variables, see your operating system’s documentation.</p>
<p>Username and password authentication is possible only if <a class="reference internal" href="../administration-guide/users-groups/single-sign-on/index.html"><span class="doc">single sign-on</span></a> is disabled.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">databricks</span> <span class="kn">import</span> <span class="n">sql</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">with</span> <span class="n">sql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">server_hostname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_SERVER_HOSTNAME&quot;</span><span class="p">),</span>
                 <span class="n">http_path</span>       <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_HTTP_PATH&quot;</span><span class="p">),</span>
                 <span class="n">username</span>        <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_USERNAME&quot;</span><span class="p">),</span>
                 <span class="n">password</span>        <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_PASSWORD&quot;</span><span class="p">))</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
<span class="c1"># ...</span>
</pre></div>
</div>
</div>
<div class="section" id="oauth-user-to-machine-u2m-authentication">
<span id="auth-u2m"></span><h3>OAuth user-to-machine (U2M) authentication<a class="headerlink" href="#oauth-user-to-machine-u2m-authentication" title="Permalink to this headline"> </a></h3>
<p>Databricks SQL Connector for Python versions 2.1.0 and above support <a class="reference internal" href="auth/oauth-u2m.html"><span class="doc">OAuth user-to-machine (U2M) authentication</span></a>.</p>
<p>To authenticate the Databricks SQL Connector for Python with OAuth U2M authentication, use the following code snippet. This snippet assumes that you have set the following environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_SERVER_HOSTNAME</span></code>set to the <strong>Server Hostname</strong> value for your cluster or SQL warehouse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_HTTP_PATH</span></code>, set to <strong>HTTP Path</strong> value for your cluster or SQL warehouse.</p></li>
</ul>
<p>To set environment variables, see your operating system’s documentation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">databricks</span> <span class="kn">import</span> <span class="n">sql</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">with</span> <span class="n">sql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">server_hostname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_SERVER_HOSTNAME&quot;</span><span class="p">),</span>
                 <span class="n">http_path</span>       <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_HTTP_PATH&quot;</span><span class="p">),</span>
                 <span class="n">auth_type</span>       <span class="o">=</span> <span class="s2">&quot;databricks-oauth&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
<span class="c1"># ...</span>
</pre></div>
</div>
</div>
<div class="section" id="oauth-machine-to-machine-m2m-authentication">
<span id="auth-m2m"></span><h3>OAuth machine-to-machine (M2M) authentication<a class="headerlink" href="#oauth-machine-to-machine-m2m-authentication" title="Permalink to this headline"> </a></h3>
<p>Databricks SQL Connector for Python versions 2.5.0 and above support <a class="reference internal" href="auth/oauth-m2m.html"><span class="doc">OAuth machine-to-machine (M2M) authentication</span></a>.</p>
<p>To use the Databricks SQL Connector for Python with OAuth M2M authentication, you must do the following:</p>
<ol class="arabic">
<li><p>Create a Databricks service principal in your Databricks workspace, and create an OAuth secret for that service principal.</p>
<p>To create the service principal and its OAuth secret, follow Steps 1-2 in <a class="reference internal" href="authentication-oauth.html"><span class="doc">Authentication using OAuth for service principals</span></a>. Make a note of the service principal’s <strong>UUID</strong> or <strong>Application ID</strong> value, and the <strong>Secret</strong> value for the service principal’s OAuth secret.</p>
</li>
<li><p>Give that service principal access to your cluster or warehouse.</p>
<p>To give the service principal access to your cluster or warehouse, see <a class="reference internal" href="../security/auth-authz/access-control/cluster-acl.html#cluster-level-permissions"><span class="std std-ref">Cluster permissions</span></a> or <a class="reference internal" href="../security/auth-authz/access-control/sql-endpoint-acl.html"><span class="doc">SQL warehouse access control</span></a>.</p>
</li>
</ol>
<p>To authenticate the Databricks SQL Connector for Python, use the following code snippet. This snippet assumes that you have set the following environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_SERVER_HOSTNAME</span></code>set to the <strong>Server Hostname</strong> value for your cluster or SQL warehouse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_HTTP_PATH</span></code>, set to <strong>HTTP Path</strong> value for your cluster or SQL warehouse.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_CLIENT_ID</span></code>, set to the service principal’s <strong>UUID</strong> or <strong>Application ID</strong> value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_CLIENT_SECRET</span></code>, set to the <strong>Secret</strong> value for the service principal’s OAuth secret.</p></li>
</ul>
<p>To set environment variables, see your operating system’s documentation.</p>
<p>You must also install the <a class="reference internal" href="sdk-python.html"><span class="doc">Databricks SDK for Python</span></a>, for example by running <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">databricks-sdk</span></code> or <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">databricks-sdk</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">databricks.sdk.core</span> <span class="kn">import</span> <span class="n">Config</span><span class="p">,</span> <span class="n">oauth_service_principal</span>
<span class="kn">from</span> <span class="nn">databricks</span> <span class="kn">import</span> <span class="n">sql</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">server_hostname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_SERVER_HOSTNAME&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">credential_provider</span><span class="p">():</span>
  <span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span>
    <span class="n">host</span>          <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://</span><span class="si">{</span><span class="n">server_hostname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">client_id</span>     <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_CLIENT_ID&quot;</span><span class="p">),</span>
    <span class="n">client_secret</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_CLIENT_SECRET&quot;</span><span class="p">))</span>
  <span class="k">return</span> <span class="n">oauth_service_principal</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

<span class="k">with</span> <span class="n">sql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">server_hostname</span>      <span class="o">=</span> <span class="n">server_hostname</span><span class="p">,</span>
                 <span class="n">http_path</span>            <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_HTTP_PATH&quot;</span><span class="p">),</span>
                 <span class="n">credentials_provider</span> <span class="o">=</span> <span class="n">credential_provider</span><span class="p">)</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
<span class="c1"># ...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline"> </a></h2>
<p>The following code examples demonstrate how to use the Databricks SQL Connector for Python to query and insert data, query metadata, manage cursors and connections, and configure logging.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following code examples demonstrate how to use a Databricks personal access token for authentication. To use other available Databricks authentication types instead, see <a class="reference internal" href="#authentication"><span class="std std-ref">Authentication</span></a>.</p>
</div>
<p>These code example retrieve their <code class="docutils literal notranslate"><span class="pre">server_hostname</span></code>, <code class="docutils literal notranslate"><span class="pre">http_path</span></code>, and <code class="docutils literal notranslate"><span class="pre">access_token</span></code> connection variable values from these environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_SERVER_HOSTNAME</span></code>, which represents the <strong>Server Hostname</strong> value from the requirements.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_HTTP_PATH</span></code>, which represents the <strong>HTTP Path</strong> value from the requirements.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATABRICKS_TOKEN</span></code>, which represents your access token from the requirements.</p></li>
</ul>
<p>You can use other approaches to retrieving these connection variable values. Using environment variables is just one approach among many.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#query-data" id="id6">Query data</a></p></li>
<li><p><a class="reference internal" href="#insert-data" id="id7">Insert data</a></p></li>
<li><p><a class="reference internal" href="#query-metadata" id="id8">Query metadata</a></p></li>
<li><p><a class="reference internal" href="#manage-cursors-and-connections" id="id9">Manage cursors and connections</a></p></li>
<li><p><a class="reference internal" href="#configure-logging" id="id10">Configure logging</a></p></li>
</ul>
</div>
<div class="section" id="query-data">
<h3><a class="toc-backref" href="#id6">Query data</a><a class="headerlink" href="#query-data" title="Permalink to this headline"> </a></h3>
<p>The following code example demonstrates how to call the Databricks SQL Connector for Python to run a basic SQL command on a cluster or SQL warehouse. This command returns the first two rows from the <code class="docutils literal notranslate"><span class="pre">trips</span></code> table in the <code class="docutils literal notranslate"><span class="pre">samples</span></code> catalog’s <code class="docutils literal notranslate"><span class="pre">nyctaxi</span></code> schema.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">databricks</span> <span class="kn">import</span> <span class="n">sql</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">with</span> <span class="n">sql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">server_hostname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_SERVER_HOSTNAME&quot;</span><span class="p">),</span>
                 <span class="n">http_path</span>       <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_HTTP_PATH&quot;</span><span class="p">),</span>
                 <span class="n">access_token</span>    <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_TOKEN&quot;</span><span class="p">))</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>

  <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span> <span class="k">as</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM samples.nyctaxi.trips LIMIT 2&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="insert-data">
<h3><a class="toc-backref" href="#id7">Insert data</a><a class="headerlink" href="#insert-data" title="Permalink to this headline"> </a></h3>
<p>The following example demonstrate how to insert small amounts of data (thousands of rows):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">databricks</span> <span class="kn">import</span> <span class="n">sql</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">with</span> <span class="n">sql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">server_hostname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_SERVER_HOSTNAME&quot;</span><span class="p">),</span>
                 <span class="n">http_path</span>       <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_HTTP_PATH&quot;</span><span class="p">),</span>
                 <span class="n">access_token</span>    <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_TOKEN&quot;</span><span class="p">))</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>

  <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span> <span class="k">as</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;CREATE TABLE IF NOT EXISTS squares (x int, x_squared int)&quot;</span><span class="p">)</span>

    <span class="n">squares</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span>
    <span class="n">values</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">for</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">in</span> <span class="n">squares</span><span class="p">])</span>

    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;INSERT INTO squares VALUES </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM squares LIMIT 10&quot;</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
<p>For large amounts of data, you should first upload the data to cloud storage and then execute the <a class="reference internal" href="../sql/language-manual/delta-copy-into.html"><span class="doc">COPY INTO</span></a> command.</p>
</div>
<div class="section" id="query-metadata">
<h3><a class="toc-backref" href="#id8">Query metadata</a><a class="headerlink" href="#query-metadata" title="Permalink to this headline"> </a></h3>
<p>There are dedicated methods for retrieving metadata. The following example retrieves metadata about columns in a sample table:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">databricks</span> <span class="kn">import</span> <span class="n">sql</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">with</span> <span class="n">sql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">server_hostname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_SERVER_HOSTNAME&quot;</span><span class="p">),</span>
                 <span class="n">http_path</span>       <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_HTTP_PATH&quot;</span><span class="p">),</span>
                 <span class="n">access_token</span>    <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_TOKEN&quot;</span><span class="p">))</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>

  <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span> <span class="k">as</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="n">schema_name</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="n">table_name</span><span class="o">=</span><span class="s2">&quot;squares&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="manage-cursors-and-connections">
<h3><a class="toc-backref" href="#id9">Manage cursors and connections</a><a class="headerlink" href="#manage-cursors-and-connections" title="Permalink to this headline"> </a></h3>
<p>It is best practice to close any connections and cursors that have been finished with. This frees resources on Databricks clusters and Databricks SQL warehouses.</p>
<p>You can use a context manager (the <code class="docutils literal notranslate"><span class="pre">with</span></code> syntax used in previous examples) to manage the resources, or explicitly call <code class="docutils literal notranslate"><span class="pre">close</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">databricks</span> <span class="kn">import</span> <span class="n">sql</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">connection</span> <span class="o">=</span> <span class="n">sql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">server_hostname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_SERVER_HOSTNAME&quot;</span><span class="p">),</span>
                         <span class="n">http_path</span>       <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_HTTP_PATH&quot;</span><span class="p">),</span>
                         <span class="n">access_token</span>    <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_TOKEN&quot;</span><span class="p">))</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * from range(10)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="configure-logging">
<h3><a class="toc-backref" href="#id10">Configure logging</a><a class="headerlink" href="#configure-logging" title="Permalink to this headline"> </a></h3>
<p>The Databricks SQL Connector uses Python’s <a class="reference external" href="https://docs.python.org/3/library/logging.html">standard logging module</a>. You can configure the logging level similar to the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">databricks</span> <span class="kn">import</span> <span class="n">sql</span>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">logging</span>

<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;databricks.sql&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;results.log&quot;</span><span class="p">,</span>
                    <span class="n">level</span>    <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

<span class="n">connection</span> <span class="o">=</span> <span class="n">sql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">server_hostname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_SERVER_HOSTNAME&quot;</span><span class="p">),</span>
                         <span class="n">http_path</span>       <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_HTTP_PATH&quot;</span><span class="p">),</span>
                         <span class="n">access_token</span>    <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;DATABRICKS_TOKEN&quot;</span><span class="p">))</span>

<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * from range(10)&quot;</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
   <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="api-reference">
<h2>API reference<a class="headerlink" href="#api-reference" title="Permalink to this headline"> </a></h2>
<div class="contents local topic" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#package" id="id11">Package</a></p></li>
<li><p><a class="reference internal" href="#module" id="id12">Module</a></p>
<ul>
<li><p><a class="reference internal" href="#methods" id="id13">Methods</a></p>
<ul>
<li><p><a class="reference internal" href="#connect-method" id="id14"><code class="docutils literal notranslate"><span class="pre">connect</span></code> method</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#classes" id="id15">Classes</a></p>
<ul>
<li><p><a class="reference internal" href="#connection-class" id="id16"><code class="docutils literal notranslate"><span class="pre">Connection</span></code> class</a></p>
<ul>
<li><p><a class="reference internal" href="#methods" id="id17">Methods</a></p>
<ul>
<li><p><a class="reference internal" href="#close-method" id="id18"><code class="docutils literal notranslate"><span class="pre">close</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#cursor-method" id="id19"><code class="docutils literal notranslate"><span class="pre">cursor</span></code> method</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#cursor-class" id="id20"><code class="docutils literal notranslate"><span class="pre">Cursor</span></code> class</a></p>
<ul>
<li><p><a class="reference internal" href="#attributes" id="id21">Attributes</a></p>
<ul>
<li><p><a class="reference internal" href="#arraysize-attribute" id="id22"><code class="docutils literal notranslate"><span class="pre">arraysize</span></code> attribute</a></p></li>
<li><p><a class="reference internal" href="#description-attribute" id="id23"><code class="docutils literal notranslate"><span class="pre">description</span></code> attribute</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#methods" id="id24">Methods</a></p>
<ul>
<li><p><a class="reference internal" href="#cancel-method" id="id25"><code class="docutils literal notranslate"><span class="pre">cancel</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#close-method" id="id26"><code class="docutils literal notranslate"><span class="pre">close</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#execute-method" id="id27"><code class="docutils literal notranslate"><span class="pre">execute</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#executemany-method" id="id28"><code class="docutils literal notranslate"><span class="pre">executemany</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#catalogs-method" id="id29"><code class="docutils literal notranslate"><span class="pre">catalogs</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#schemas-method" id="id30"><code class="docutils literal notranslate"><span class="pre">schemas</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#tables-method" id="id31"><code class="docutils literal notranslate"><span class="pre">tables</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#columns-method" id="id32"><code class="docutils literal notranslate"><span class="pre">columns</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#fetchall-method" id="id33"><code class="docutils literal notranslate"><span class="pre">fetchall</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#fetchmany-method" id="id34"><code class="docutils literal notranslate"><span class="pre">fetchmany</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#fetchone-method" id="id35"><code class="docutils literal notranslate"><span class="pre">fetchone</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#fetchall_arrow-method" id="id36"><code class="docutils literal notranslate"><span class="pre">fetchall_arrow</span></code> method</a></p></li>
<li><p><a class="reference internal" href="#fetchmany_arrow-method" id="id37"><code class="docutils literal notranslate"><span class="pre">fetchmany_arrow</span></code> method</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#row-class" id="id38"><code class="docutils literal notranslate"><span class="pre">Row</span></code> class</a></p>
<ul>
<li><p><a class="reference internal" href="#methods" id="id39">Methods</a></p>
<ul>
<li><p><a class="reference internal" href="#asdict-method" id="id40"><code class="docutils literal notranslate"><span class="pre">asDict</span></code> method</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#type-conversions" id="id41">Type conversions</a></p></li>
</ul>
</div>
<div class="section" id="package">
<h3><a class="toc-backref" href="#id11">Package</a><a class="headerlink" href="#package" title="Permalink to this headline"> </a></h3>
<p><code class="docutils literal notranslate"><span class="pre">databricks-sql-connector</span></code></p>
<p>Usage: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">databricks-sql-connector</span></code></p>
<p>See also <a class="reference external" href="https://pypi.org/project/databricks-sql-connector">databricks-sql-connector</a> in the Python Package Index (PyPI).</p>
</div>
<div class="section" id="module">
<h3><a class="toc-backref" href="#id12">Module</a><a class="headerlink" href="#module" title="Permalink to this headline"> </a></h3>
<p><code class="docutils literal notranslate"><span class="pre">databricks.sql</span></code></p>
<p>Usage: <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">databricks</span> <span class="pre">import</span> <span class="pre">sql</span></code></p>
<div class="section" id="methods">
<h4><a class="toc-backref" href="#id13">Methods</a><a class="headerlink" href="#methods" title="Permalink to this headline"> </a></h4>
<div class="section" id="connect-method">
<h5><a class="toc-backref" href="#id14"><code class="docutils literal notranslate"><span class="pre">connect</span></code> method</a><a class="headerlink" href="#connect-method" title="Permalink to this headline"> </a></h5>
<p>Creates a connection to a database.</p>
<p>Returns a <a class="reference internal" href="#connection-class"><span class="std std-ref">Connection</span></a> object.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>server_hostname</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>The server hostname for the cluster or SQL warehouse.
To get the server hostname, see the instructions earlier in this article.</p>
<p>This parameter is required.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">dbc-a1b2345c-d6e7.cloud.databricks.com</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>http_path</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>The HTTP path of the cluster or SQL warehouse.
To get the HTTP path, see the instructions earlier in this article.</p>
<p>This parameter is required.</p>
<p>Example:
<code class="docutils literal notranslate"><span class="pre">sql/protocolv1/o/1234567890123456/1234-567890-test123</span></code> for a cluster.
<code class="docutils literal notranslate"><span class="pre">/sql/1.0/warehouses/a1b234c567d8e9fa</span></code> for a SQL warehouse.</p>
</td>
</tr>
<tr class="row-even"><td><p><strong>access_token</strong>, <strong>auth_type</strong>, <strong>credentials_provider</strong>, <strong>password</strong>, <strong>username</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>Information about Databricks authentication settings.
For details see <a class="reference internal" href="#authentication"><span class="std std-ref">Authentication</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>session_configuration</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">dict[str,</span> <span class="pre">Any]</span></code></p>
<p>A dictionary of Spark session configuration parameters.
Setting a configuration is equivalent to using the <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">key=val</span></code> SQL command.
Run the SQL command <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">-v</span></code> to get a full list of available configurations.</p>
<p>Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>This parameter is optional.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">{&quot;spark.sql.variable.substitute&quot;:</span> <span class="pre">True}</span></code></p>
</td>
</tr>
<tr class="row-even"><td><p><strong>http_headers</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">List[Tuple[str,</span> <span class="pre">str]]]</span></code></p>
<p>Additional (key, value) pairs to set in HTTP headers on every RPC request the client
makes. Typical usage will not set any extra HTTP headers.
Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>This parameter is optional.</p>
<p><em>Since version 2.0</em></p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>catalog</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>Initial catalog to use for the connection.
Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code> (in which case the default catalog, typically <code class="docutils literal notranslate"><span class="pre">hive_metastore</span></code>
will be used).</p>
<p>This parameter is optional.</p>
<p><em>Since version 2.0</em></p>
</td>
</tr>
<tr class="row-even"><td><p><strong>schema</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>Initial schema to use for the connection.
Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code> (in which case the default schema <code class="docutils literal notranslate"><span class="pre">default</span></code> will be used).</p>
<p>This parameter is optional.</p>
<p><em>Since version 2.0</em></p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>use_cloud_fetch</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">bool</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">True</span></code> to send fetch requests directly to the cloud object store to download chunks of
data. <code class="docutils literal notranslate"><span class="pre">False</span></code> (the default) to send fetch requests directly to Databricks.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">use_cloud_fetch</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> but network access is blocked, then the fetch
requests will fail.</p>
<p><em>Since version 2.8</em></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="classes">
<h3><a class="toc-backref" href="#id15">Classes</a><a class="headerlink" href="#classes" title="Permalink to this headline"> </a></h3>
<div class="section" id="connection-class">
<h4><a class="toc-backref" href="#id16"><code class="docutils literal notranslate"><span class="pre">Connection</span></code> class</a><a class="headerlink" href="#connection-class" title="Permalink to this headline"> </a></h4>
<p>Represents a connection to a database.</p>
<div class="section" id="methods">
<span id="methods-1"></span><h5><a class="toc-backref" href="#id17">Methods</a><a class="headerlink" href="#methods" title="Permalink to this headline"> </a></h5>
<div class="section" id="close-method">
<span id="connection-close-method"></span><h6><a class="toc-backref" href="#id18"><code class="docutils literal notranslate"><span class="pre">close</span></code> method</a><a class="headerlink" href="#close-method" title="Permalink to this headline"> </a></h6>
<p>Closes the connection to the database and releases all associated resources on the server. Any additional calls to this connection will throw an <code class="docutils literal notranslate"><span class="pre">Error</span></code>.</p>
<p>No parameters.</p>
<p>No return value.</p>
</div>
<div class="section" id="cursor-method">
<h6><a class="toc-backref" href="#id19"><code class="docutils literal notranslate"><span class="pre">cursor</span></code> method</a><a class="headerlink" href="#cursor-method" title="Permalink to this headline"> </a></h6>
<p>Returns a mechanism that enables traversal over the records in a database.</p>
<p>No parameters.</p>
<p>Returns a <a class="reference internal" href="#cursor-class"><span class="std std-ref">Cursor</span></a> object.</p>
</div>
</div>
</div>
<div class="section" id="cursor-class">
<h4><a class="toc-backref" href="#id20"><code class="docutils literal notranslate"><span class="pre">Cursor</span></code> class</a><a class="headerlink" href="#cursor-class" title="Permalink to this headline"> </a></h4>
<div class="section" id="attributes">
<h5><a class="toc-backref" href="#id21">Attributes</a><a class="headerlink" href="#attributes" title="Permalink to this headline"> </a></h5>
<div class="section" id="arraysize-attribute">
<h6><a class="toc-backref" href="#id22"><code class="docutils literal notranslate"><span class="pre">arraysize</span></code> attribute</a><a class="headerlink" href="#arraysize-attribute" title="Permalink to this headline"> </a></h6>
<p>Used with the <a class="reference internal" href="#fetchmany-method"><span class="std std-ref">fetchmany</span></a> method, specifies the internal buffer size, which is also how many rows are actually fetched from the server at a time. The default value is <code class="docutils literal notranslate"><span class="pre">10000</span></code>. For narrow results (results in which each row does not contain a lot of data), you should increase this value for better performance.</p>
<p>Read-write access.</p>
</div>
<div class="section" id="description-attribute">
<h6><a class="toc-backref" href="#id23"><code class="docutils literal notranslate"><span class="pre">description</span></code> attribute</a><a class="headerlink" href="#description-attribute" title="Permalink to this headline"> </a></h6>
<p>Contains a Python <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">tuple</span></code> objects. Each of these <code class="docutils literal notranslate"><span class="pre">tuple</span></code> objects contains 7 values, with the first 2 items of each <code class="docutils literal notranslate"><span class="pre">tuple</span></code> object containing information describing a single result column as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name of the column.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type_code</span></code>: A string representing the type of the column. For example, an integer column will have a type code of <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p></li>
</ul>
<p>The remaining 5 items of each 7-item <code class="docutils literal notranslate"><span class="pre">tuple</span></code> object are not implemented, and their values are not defined. They will typically be returned as 4 <code class="docutils literal notranslate"><span class="pre">None</span></code> values followed by a single <code class="docutils literal notranslate"><span class="pre">True</span></code> value.</p>
<p>Read-only access.</p>
</div>
</div>
<div class="section" id="methods">
<span id="methods-2"></span><h5><a class="toc-backref" href="#id24">Methods</a><a class="headerlink" href="#methods" title="Permalink to this headline"> </a></h5>
<div class="section" id="cancel-method">
<h6><a class="toc-backref" href="#id25"><code class="docutils literal notranslate"><span class="pre">cancel</span></code> method</a><a class="headerlink" href="#cancel-method" title="Permalink to this headline"> </a></h6>
<p>Interrupts the running of any database query or command that the cursor has started. To release the associated resources on the server, call the <a class="reference internal" href="#cursor-close-method"><span class="std std-ref">close</span></a> method after calling the <code class="docutils literal notranslate"><span class="pre">cancel</span></code> method.</p>
<p>No parameters.</p>
<p>No return value.</p>
</div>
<div class="section" id="close-method">
<span id="close-method-1"></span><span id="cursor-close-method"></span><h6><a class="toc-backref" href="#id26"><code class="docutils literal notranslate"><span class="pre">close</span></code> method</a><a class="headerlink" href="#close-method" title="Permalink to this headline"> </a></h6>
<p>Closes the cursor and releases the associated resources on the server. Closing an already closed cursor might throw an error.</p>
<p>No parameters.</p>
<p>No return value.</p>
</div>
<div class="section" id="execute-method">
<h6><a class="toc-backref" href="#id27"><code class="docutils literal notranslate"><span class="pre">execute</span></code> method</a><a class="headerlink" href="#execute-method" title="Permalink to this headline"> </a></h6>
<p>Prepares and then runs a database query or command.</p>
<p>No return value.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>operation</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>The query or command to prepare and then run.</p>
<p>This parameter is required.</p>
<p>Example without the <code class="docutils literal notranslate"><span class="pre">parameters</span></code> parameter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
 <span class="s1">&#39;SELECT * FROM samples.nyctaxi.trips WHERE pickup_zip=&quot;10019&quot; LIMIT 2&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Example with the <code class="docutils literal notranslate"><span class="pre">parameters</span></code> parameter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
 <span class="s1">&#39;SELECT * FROM samples.nyctaxi.trips WHERE zip=</span><span class="si">%(pickup_zip)s</span><span class="s1"> LIMIT 2&#39;</span><span class="p">,</span>
 <span class="p">{</span> <span class="s1">&#39;pickup_zip&#39;</span><span class="p">:</span> <span class="s1">&#39;10019&#39;</span> <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><strong>parameters</strong></p>
<p>Type: dictionary</p>
<p>A sequence of parameters to use with the <code class="docutils literal notranslate"><span class="pre">operation</span></code>
parameter.</p>
<p>This parameter is optional. The default is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="executemany-method">
<h6><a class="toc-backref" href="#id28"><code class="docutils literal notranslate"><span class="pre">executemany</span></code> method</a><a class="headerlink" href="#executemany-method" title="Permalink to this headline"> </a></h6>
<p>Prepares and then runs a database query or command using all parameter sequences in the <code class="docutils literal notranslate"><span class="pre">seq_of_parameters</span></code> argument. Only the final result set is retained.</p>
<p>No return value.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>operation</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>The query or command to prepare and then run.</p>
<p>This parameter is required.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>seq_of_parameters</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>A sequence of many sets of parameter values to use with the
<code class="docutils literal notranslate"><span class="pre">operation</span></code> parameter.</p>
<p>This parameter is required.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="catalogs-method">
<h6><a class="toc-backref" href="#id29"><code class="docutils literal notranslate"><span class="pre">catalogs</span></code> method</a><a class="headerlink" href="#catalogs-method" title="Permalink to this headline"> </a></h6>
<p>Execute a metadata query about the catalogs. Actual results should then be fetched using <code class="docutils literal notranslate"><span class="pre">fetchmany</span></code> or <code class="docutils literal notranslate"><span class="pre">fetchall</span></code>.
Important fields in the result set include:</p>
<ul class="simple">
<li><p>Field name: <code class="docutils literal notranslate"><span class="pre">TABLE_CAT</span></code>. Type: <code class="docutils literal notranslate"><span class="pre">str</span></code>. The name of the catalog.</p></li>
</ul>
<p>No parameters.</p>
<p>No return value.</p>
<p><em>Since version 1.0</em></p>
</div>
<div class="section" id="schemas-method">
<h6><a class="toc-backref" href="#id30"><code class="docutils literal notranslate"><span class="pre">schemas</span></code> method</a><a class="headerlink" href="#schemas-method" title="Permalink to this headline"> </a></h6>
<p>Execute a metadata query about the schemas. Actual results should then be fetched using <code class="docutils literal notranslate"><span class="pre">fetchmany</span></code> or <code class="docutils literal notranslate"><span class="pre">fetchall</span></code>.
Important fields in the result set include:</p>
<ul class="simple">
<li><p>Field name: <code class="docutils literal notranslate"><span class="pre">TABLE_SCHEM</span></code>. Type: <code class="docutils literal notranslate"><span class="pre">str</span></code>. The name of the schema.</p></li>
<li><p>Field name: <code class="docutils literal notranslate"><span class="pre">TABLE_CATALOG</span></code>. Type: <code class="docutils literal notranslate"><span class="pre">str</span></code>. The catalog to which the schema belongs.</p></li>
</ul>
<p>No return value.</p>
<p><em>Since version 1.0</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>catalog_name</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>A catalog name to retrieve information about.
The <code class="docutils literal notranslate"><span class="pre">%</span></code> character is interpreted as a wildcard.</p>
<p>This parameter is optional.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>schema_name</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>A schema name to retrieve information about.
The <code class="docutils literal notranslate"><span class="pre">%</span></code> character is interpreted as a wildcard.</p>
<p>This parameter is optional.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tables-method">
<h6><a class="toc-backref" href="#id31"><code class="docutils literal notranslate"><span class="pre">tables</span></code> method</a><a class="headerlink" href="#tables-method" title="Permalink to this headline"> </a></h6>
<p>Execute a metadata query about tables and views. Actual results should then be fetched using <code class="docutils literal notranslate"><span class="pre">fetchmany</span></code> or <code class="docutils literal notranslate"><span class="pre">fetchall</span></code>.
Important fields in the result set include:</p>
<ul class="simple">
<li><p>Field name: <code class="docutils literal notranslate"><span class="pre">TABLE_CAT</span></code>. Type: <code class="docutils literal notranslate"><span class="pre">str</span></code>. The catalog to which the table belongs.</p></li>
<li><p>Field name: <code class="docutils literal notranslate"><span class="pre">TABLE_SCHEM</span></code>. Type: <code class="docutils literal notranslate"><span class="pre">str</span></code>. The schema to which the table belongs.</p></li>
<li><p>Field name: <code class="docutils literal notranslate"><span class="pre">TABLE_NAME</span></code>. Type: <code class="docutils literal notranslate"><span class="pre">str</span></code>. The name of the table.</p></li>
<li><p>Field name: <code class="docutils literal notranslate"><span class="pre">TABLE_TYPE</span></code>. Type: <code class="docutils literal notranslate"><span class="pre">str</span></code>. The kind of relation, for example <code class="docutils literal notranslate"><span class="pre">VIEW</span></code> or <code class="docutils literal notranslate"><span class="pre">TABLE</span></code> (applies to Databricks Runtime 10.2 and above as well as to Databricks SQL; prior versions of the Databricks Runtime return an empty string).</p></li>
</ul>
<p>No return value.</p>
<p><em>Since version 1.0</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>catalog_name</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>A catalog name to retrieve information about.
The <code class="docutils literal notranslate"><span class="pre">%</span></code> character is interpreted as a wildcard.</p>
<p>This parameter is optional.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>schema_name</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>A schema name to retrieve information about.
The <code class="docutils literal notranslate"><span class="pre">%</span></code> character is interpreted as a wildcard.</p>
<p>This parameter is optional.</p>
</td>
</tr>
<tr class="row-even"><td><p><strong>table_name</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>A table name to retrieve information about.
The <code class="docutils literal notranslate"><span class="pre">%</span></code> character is interpreted as a wildcard.</p>
<p>This parameter is optional.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>table_types</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">List[str]</span></code></p>
<p>A list of table types to match, for example <code class="docutils literal notranslate"><span class="pre">TABLE</span></code> or <code class="docutils literal notranslate"><span class="pre">VIEW</span></code>.</p>
<p>This parameter is optional.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="columns-method">
<h6><a class="toc-backref" href="#id32"><code class="docutils literal notranslate"><span class="pre">columns</span></code> method</a><a class="headerlink" href="#columns-method" title="Permalink to this headline"> </a></h6>
<p>Execute a metadata query about the columns. Actual results should then be fetched using <code class="docutils literal notranslate"><span class="pre">fetchmany</span></code> or <code class="docutils literal notranslate"><span class="pre">fetchall</span></code>.
Important fields in the result set include:</p>
<ul class="simple">
<li><p>Field name: <code class="docutils literal notranslate"><span class="pre">TABLE_CAT</span></code>. Type: <code class="docutils literal notranslate"><span class="pre">str</span></code>. The catalog to which the column belongs.</p></li>
<li><p>Field name: <code class="docutils literal notranslate"><span class="pre">TABLE_SCHEM</span></code>. Type: <code class="docutils literal notranslate"><span class="pre">str</span></code>. The schema to which the column belongs.</p></li>
<li><p>Field name: <code class="docutils literal notranslate"><span class="pre">TABLE_NAME</span></code>. Type: <code class="docutils literal notranslate"><span class="pre">str</span></code>. The name of the table to which the column belongs.</p></li>
<li><p>Field name: <code class="docutils literal notranslate"><span class="pre">COLUMN_NAME</span></code>. Type: <code class="docutils literal notranslate"><span class="pre">str</span></code>. The name of the column.</p></li>
</ul>
<p>No return value.</p>
<p><em>Since version 1.0</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>catalog_name</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>A catalog name to retrieve information about.
The <code class="docutils literal notranslate"><span class="pre">%</span></code> character is interpreted as a wildcard.</p>
<p>This parameter is optional.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>schema_name</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>A schema name to retrieve information about.
The <code class="docutils literal notranslate"><span class="pre">%</span></code> character is interpreted as a wildcard.</p>
<p>This parameter is optional.</p>
</td>
</tr>
<tr class="row-even"><td><p><strong>table_name</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>A table name to retrieve information about.
The <code class="docutils literal notranslate"><span class="pre">%</span></code> character is interpreted as a wildcard.</p>
<p>This parameter is optional.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>column_name</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">str</span></code></p>
<p>A column name to retrieve information about.
The <code class="docutils literal notranslate"><span class="pre">%</span></code> character is interpreted as a wildcard.</p>
<p>This parameter is optional.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="fetchall-method">
<h6><a class="toc-backref" href="#id33"><code class="docutils literal notranslate"><span class="pre">fetchall</span></code> method</a><a class="headerlink" href="#fetchall-method" title="Permalink to this headline"> </a></h6>
<p>Gets all (or all remaining) rows of a query.</p>
<p>No parameters.</p>
<p>Returns all (or all remaining) rows of the query as a Python <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">Row</span></code> objects.</p>
<p>Throws an <code class="docutils literal notranslate"><span class="pre">Error</span></code> if the previous call to the <a class="reference internal" href="#execute-method"><span class="std std-ref">execute</span></a> method did not return any data or no <code class="docutils literal notranslate"><span class="pre">execute</span></code> call has yet been made.</p>
</div>
<div class="section" id="fetchmany-method">
<h6><a class="toc-backref" href="#id34"><code class="docutils literal notranslate"><span class="pre">fetchmany</span></code> method</a><a class="headerlink" href="#fetchmany-method" title="Permalink to this headline"> </a></h6>
<p>Gets the next rows of a query.</p>
<p>Returns up to <code class="docutils literal notranslate"><span class="pre">size</span></code>  (or the <a class="reference internal" href="#arraysize-attribute"><span class="std std-ref">arraysize</span></a> attribute if <code class="docutils literal notranslate"><span class="pre">size</span></code> is not specified) of the next rows of a query as a Python <code class="docutils literal notranslate"><span class="pre">list</span></code> of <code class="docutils literal notranslate"><span class="pre">Row</span></code> objects.
If there are fewer than <code class="docutils literal notranslate"><span class="pre">size</span></code> rows left to be fetched, all remaining rows will be returned.</p>
<p>Throws an <code class="docutils literal notranslate"><span class="pre">Error</span></code> if the previous call to the <a class="reference internal" href="#execute-method"><span class="std std-ref">execute</span></a> method did not return any data or no <code class="docutils literal notranslate"><span class="pre">execute</span></code> call has yet been made.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>size</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">int</span></code></p>
<p>The number of next rows to get.</p>
<p>This parameter is optional. If not specified, the value of
the <code class="docutils literal notranslate"><span class="pre">arraysize</span></code> attribute is used.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">cursor.fetchmany(10)</span></code></p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="fetchone-method">
<h6><a class="toc-backref" href="#id35"><code class="docutils literal notranslate"><span class="pre">fetchone</span></code> method</a><a class="headerlink" href="#fetchone-method" title="Permalink to this headline"> </a></h6>
<p>Gets the next row of the dataset.</p>
<p>No parameters.</p>
<p>Returns the next row of the dataset as a single sequence as a Python <code class="docutils literal notranslate"><span class="pre">tuple</span></code> object, or returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if there is no more available data.</p>
<p>Throws an <code class="docutils literal notranslate"><span class="pre">Error</span></code> if the previous call to the <a class="reference internal" href="#execute-method"><span class="std std-ref">execute</span></a> method did not return any data or no <code class="docutils literal notranslate"><span class="pre">execute</span></code> call has yet been made.</p>
</div>
<div class="section" id="fetchall_arrow-method">
<h6><a class="toc-backref" href="#id36"><code class="docutils literal notranslate"><span class="pre">fetchall_arrow</span></code> method</a><a class="headerlink" href="#fetchall_arrow-method" title="Permalink to this headline"> </a></h6>
<p>Gets all (or all remaining) rows of a query, as a PyArrow <code class="docutils literal notranslate"><span class="pre">Table</span></code> object.
Queries returning very large amounts of data should use <code class="docutils literal notranslate"><span class="pre">fetchmany_arrow</span></code> instead to reduce memory consumption.</p>
<p>No parameters.</p>
<p>Returns all (or all remaining) rows of the query as a PyArrow table.</p>
<p>Throws an <code class="docutils literal notranslate"><span class="pre">Error</span></code> if the previous call to the <a class="reference internal" href="#execute-method"><span class="std std-ref">execute</span></a> method did not return any data or no <code class="docutils literal notranslate"><span class="pre">execute</span></code> call has yet been made.</p>
<p><em>Since version 2.0</em></p>
</div>
<div class="section" id="fetchmany_arrow-method">
<h6><a class="toc-backref" href="#id37"><code class="docutils literal notranslate"><span class="pre">fetchmany_arrow</span></code> method</a><a class="headerlink" href="#fetchmany_arrow-method" title="Permalink to this headline"> </a></h6>
<p>Gets the next rows of a query as a PyArrow <code class="docutils literal notranslate"><span class="pre">Table</span></code> object.</p>
<p>Returns up to the <code class="docutils literal notranslate"><span class="pre">size</span></code> argument (or the <a class="reference internal" href="#arraysize-attribute"><span class="std std-ref">arraysize</span></a> attribute if <code class="docutils literal notranslate"><span class="pre">size</span></code> is not specified) of the next rows of a query as a Python PyArrow <code class="docutils literal notranslate"><span class="pre">Table</span></code> object.</p>
<p>Throws an <code class="docutils literal notranslate"><span class="pre">Error</span></code> if the previous call to the <a class="reference internal" href="#execute-method"><span class="std std-ref">execute</span></a> method did not return any data or no <code class="docutils literal notranslate"><span class="pre">execute</span></code> call has yet been made.</p>
<p><em>Since version 2.0</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameters</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>size</strong></p>
<p>Type: <code class="docutils literal notranslate"><span class="pre">int</span></code></p>
<p>The number of next rows to get.</p>
<p>This parameter is optional. If not specified, the value of
the <code class="docutils literal notranslate"><span class="pre">arraysize</span></code> attribute is used.</p>
<p>Example: <code class="docutils literal notranslate"><span class="pre">cursor.fetchmany_arrow(10)</span></code></p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="row-class">
<h4><a class="toc-backref" href="#id38"><code class="docutils literal notranslate"><span class="pre">Row</span></code> class</a><a class="headerlink" href="#row-class" title="Permalink to this headline"> </a></h4>
<p>The row class is a tuple-like data structure that represents an individual result row.
If the row contains a column with the name <code class="docutils literal notranslate"><span class="pre">&quot;my_column&quot;</span></code>, you can access the <code class="docutils literal notranslate"><span class="pre">&quot;my_column&quot;</span></code> field of <code class="docutils literal notranslate"><span class="pre">row</span></code> via
<code class="docutils literal notranslate"><span class="pre">row.my_column</span></code>. You can also use numeric indicies to access fields, for example <code class="docutils literal notranslate"><span class="pre">row[0]</span></code>.
If the column name is not allowed as an attribute method name (for example, it begins with a digit),
then you can access the field as <code class="docutils literal notranslate"><span class="pre">row[&quot;1_my_column&quot;]</span></code>.</p>
<p><em>Since version 1.0</em></p>
<div class="section" id="methods">
<span id="methods-3"></span><h5><a class="toc-backref" href="#id39">Methods</a><a class="headerlink" href="#methods" title="Permalink to this headline"> </a></h5>
<div class="section" id="asdict-method">
<h6><a class="toc-backref" href="#id40"><code class="docutils literal notranslate"><span class="pre">asDict</span></code> method</a><a class="headerlink" href="#asdict-method" title="Permalink to this headline"> </a></h6>
<p>Return a dictionary representation of the row, which is indexed by field names. If there are duplicate field names,
one of the duplicate fields (but only one) will be returned in the dictionary. Which duplicate field is returned is not defined.</p>
<p>No parameters.</p>
<p>Returns a <code class="docutils literal notranslate"><span class="pre">dict</span></code> of fields.</p>
</div>
</div>
</div>
</div>
<div class="section" id="type-conversions">
<h3><a class="toc-backref" href="#id41">Type conversions</a><a class="headerlink" href="#type-conversions" title="Permalink to this headline"> </a></h3>
<p>The following table maps Apache Spark SQL data types to their Python data type equivalents.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 49%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Apache Spark SQL data type</p></th>
<th class="head"><p>Python data type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">array</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bigint</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">binary</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bytearray</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">date</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">datetime.date</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">decimal</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">decimal.Decimal</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">double</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">map</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">str</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">null</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NoneType</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">smallint</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">str</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">struct</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">str</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tinyint</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline"> </a></h2>
<div class="section" id="tokenauthwrapperinvalidaccesstoken-invalid-access-token-message">
<h3><code class="docutils literal notranslate"><span class="pre">tokenAuthWrapperInvalidAccessToken:</span> <span class="pre">Invalid</span> <span class="pre">access</span> <span class="pre">token</span></code> message<a class="headerlink" href="#tokenauthwrapperinvalidaccesstoken-invalid-access-token-message" title="Permalink to this headline"> </a></h3>
<p><strong>Issue</strong>: When you run your code, you see a message similar to <code class="docutils literal notranslate"><span class="pre">Error</span> <span class="pre">during</span> <span class="pre">request</span> <span class="pre">to</span> <span class="pre">server:</span> <span class="pre">tokenAuthWrapperInvalidAccessToken:</span> <span class="pre">Invalid</span> <span class="pre">access</span> <span class="pre">token</span></code>.</p>
<p><strong>Possible cause</strong>: The value passed to <code class="docutils literal notranslate"><span class="pre">access_token</span></code> is not a valid Databricks personal access token.</p>
<p><strong>Recommended fix</strong>: Check that the value passed to <code class="docutils literal notranslate"><span class="pre">access_token</span></code> is correct and try again.</p>
</div>
<div class="section" id="gaierror8-nodename-nor-servname-provided-or-not-known-message">
<h3><code class="docutils literal notranslate"><span class="pre">gaierror(8,</span> <span class="pre">'nodename</span> <span class="pre">nor</span> <span class="pre">servname</span> <span class="pre">provided,</span> <span class="pre">or</span> <span class="pre">not</span> <span class="pre">known')</span></code> message<a class="headerlink" href="#gaierror8-nodename-nor-servname-provided-or-not-known-message" title="Permalink to this headline"> </a></h3>
<p><strong>Issue</strong>: When you run your code, you see a message similar to <code class="docutils literal notranslate"><span class="pre">Error</span> <span class="pre">during</span> <span class="pre">request</span> <span class="pre">to</span> <span class="pre">server:</span> <span class="pre">gaierror(8,</span> <span class="pre">'nodename</span> <span class="pre">nor</span> <span class="pre">servname</span> <span class="pre">provided,</span> <span class="pre">or</span> <span class="pre">not</span> <span class="pre">known')</span></code>.</p>
<p><strong>Possible cause</strong>: The value passed to <code class="docutils literal notranslate"><span class="pre">server_hostname</span></code> is not the correct host name.</p>
<p><strong>Recommended fix</strong>: Check that the value passed to <code class="docutils literal notranslate"><span class="pre">server_hostname</span></code> is correct and try again.</p>
<p>For more information on finding the server hostname, see <a class="reference internal" href="../integrations/jdbc-odbc-bi.html#retrieve-the-connection-details"><span class="std std-ref">Retrieve the connection details</span></a>.</p>
</div>
<div class="section" id="ipaclerror-message">
<h3><code class="docutils literal notranslate"><span class="pre">IpAclError</span></code> message<a class="headerlink" href="#ipaclerror-message" title="Permalink to this headline"> </a></h3>
<p><strong>Issue</strong>: When you run your code, you see the message <code class="docutils literal notranslate"><span class="pre">Error</span> <span class="pre">during</span> <span class="pre">request</span> <span class="pre">to</span> <span class="pre">server:</span> <span class="pre">IpAclValidation</span></code> when you try to use the
connector on a Databricks notebook.</p>
<p><strong>Possible cause</strong>: You may have IP allow listing enabled for the Databricks workspace. With IP allow listing, connections
from Spark clusters back to the control plane are not allowed by default.</p>
<p><strong>Recommended fix</strong>: Ask your administrator to add the compute plane subnet to the IP allow list.</p>
</div>
</div>
<div class="section" id="additional-resources">
<h2>Additional resources<a class="headerlink" href="#additional-resources" title="Permalink to this headline"> </a></h2>
<p>For more information, see:</p>
<ul class="simple">
<li><p>The <a class="reference external" href="https://github.com/databricks/databricks-sql-python">Databricks SQL Connector for Python</a> repository on GitHub</p></li>
<li><p><a class="reference internal" href="../sql/language-manual/sql-ref-datatypes.html"><span class="doc">Data types</span></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/stdtypes.html">Built-in Types</a> (for <code class="docutils literal notranslate"><span class="pre">bool</span></code>, <code class="docutils literal notranslate"><span class="pre">bytearray</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code>, and <code class="docutils literal notranslate"><span class="pre">str</span></code>) on the Python website</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/datetime.html">datetime</a> (for <code class="docutils literal notranslate"><span class="pre">datetime.date</span></code> and <code class="docutils literal notranslate"><span class="pre">datatime.datetime</span></code>) on the Python website</p></li>
<li><p><a class="reference external" href="https://docs.python.org/library/decimal.html">decimal</a> (for <code class="docutils literal notranslate"><span class="pre">decimal.Decimal</span></code>) on the Python website</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/constants.html">Built-in Constants</a> (for <code class="docutils literal notranslate"><span class="pre">NoneType</span></code>) on the Python website</p></li>
</ul>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../_static/js/localized.js"></script>
  <script type="text/javascript" src="../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>