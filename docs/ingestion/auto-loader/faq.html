

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Find answers to commonly asked questions about Auto Loader." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Auto Loader FAQ">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Auto Loader FAQ &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/ingestion/auto-loader/faq.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/ingestion/auto-loader/faq.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/ingestion/auto-loader/faq.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="top" title="Databricks on AWS" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../../en/ingestion/auto-loader/faq.html" class="notranslate">English</option>
    <option value="../../../ja/ingestion/auto-loader/faq.html" class="notranslate">日本語</option>
    <option value="../../../pt/ingestion/auto-loader/faq.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Auto Loader FAQ</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="auto-loader-faq">
<h1>Auto Loader FAQ<a class="headerlink" href="#auto-loader-faq" title="Permalink to this headline"> </a></h1>
<p>Commonly asked questions about Databricks Auto Loader.</p>
<div class="section" id="does-auto-loader-process-the-file-again-when-the-file-gets-appended-or-overwritten">
<span id="does-al-process-the-file-again-when-the-file-gets-appended-or-overwritten"></span><span id="process-file-behavior"></span><h2>Does Auto Loader process the file again when the file gets appended or overwritten?<a class="headerlink" href="#does-auto-loader-process-the-file-again-when-the-file-gets-appended-or-overwritten" title="Permalink to this headline"> </a></h2>
<p>Files are processed exactly once unless <code class="docutils literal notranslate"><span class="pre">cloudFiles.allowOverwrites</span></code> is enabled. When a file is appended to or overwritten, Databricks cannot guarantee which version of the file will be processed. You should also use caution when enabling <code class="docutils literal notranslate"><span class="pre">cloudFiles.allowOverwrites</span></code> in file notification mode, where Auto Loader might identify new files through both file notifications and directory listing. Due to the discrepancy between file notification event time and file modification time, Auto Loader might obtain two different timestamps and therefore ingest the same file twice, even when the file is only written once.</p>
<p>In general, Databricks recommends you use Auto Loader to ingest only immutable files and avoid setting <code class="docutils literal notranslate"><span class="pre">cloudFiles.allowOverwrites</span></code>. If this does not meet your requirements, contact your Databricks account team.</p>
</div>
<div class="section" id="if-my-data-files-do-not-arrive-continuously-but-in-regular-intervals-for-example-once-a-day-should-i-still-use-this-source-and-are-there-any-benefits">
<h2>If my data files do not arrive continuously, but in regular intervals, for example, once a day, should I still use this source and are there any benefits?<a class="headerlink" href="#if-my-data-files-do-not-arrive-continuously-but-in-regular-intervals-for-example-once-a-day-should-i-still-use-this-source-and-are-there-any-benefits" title="Permalink to this headline"> </a></h2>
<p>In this case, you can set up a <code class="docutils literal notranslate"><span class="pre">Trigger.AvailableNow</span></code> (available in Databricks Runtime 10.2 and later) Structured Streaming job and schedule to run after the anticipated file arrival time. Auto Loader works well with both infrequent or frequent updates. Even if the eventual updates are very large, Auto Loader scales well to the input size. Auto Loader’s efficient file discovery techniques and schema evolution capabilities make Auto Loader the recommended method for incremental data ingestion.</p>
</div>
<div class="section" id="what-happens-if-i-change-the-checkpoint-location-when-restarting-the-stream">
<h2>What happens if I change the checkpoint location when restarting the stream?<a class="headerlink" href="#what-happens-if-i-change-the-checkpoint-location-when-restarting-the-stream" title="Permalink to this headline"> </a></h2>
<p>A checkpoint location maintains important identifying information of a stream. Changing the checkpoint location effectively means that you have abandoned the previous stream and started a new stream.</p>
</div>
<div class="section" id="do-i-need-to-create-event-notification-services-beforehand">
<h2>Do I need to create event notification services beforehand?<a class="headerlink" href="#do-i-need-to-create-event-notification-services-beforehand" title="Permalink to this headline"> </a></h2>
<p>No. If you choose file notification mode and provide the required permissions, Auto Loader can create file notification services for you. See <a class="reference internal" href="file-notification-mode.html"><span class="doc">What is Auto Loader file notification mode?</span></a></p>
</div>
<div class="section" id="how-do-i-clean-up-the-event-notification-resources-created-by-auto-loader">
<h2>How do I clean up the event notification resources created by Auto Loader?<a class="headerlink" href="#how-do-i-clean-up-the-event-notification-resources-created-by-auto-loader" title="Permalink to this headline"> </a></h2>
<p>You can use the <a class="reference internal" href="file-notification-mode.html#cloud-resource-management"><span class="std std-ref">cloud resource manager</span></a> to list and tear down resources.
You can also delete these resources manually using the cloud provider’s UI or APIs.</p>
</div>
<div class="section" id="can-i-run-multiple-streaming-queries-from-different-input-directories-on-the-same-bucketcontainer">
<h2>Can I run multiple streaming queries from different input directories on the same bucket/container?<a class="headerlink" href="#can-i-run-multiple-streaming-queries-from-different-input-directories-on-the-same-bucketcontainer" title="Permalink to this headline"> </a></h2>
<p>Yes, as long as they are not parent-child directories; for example, <code class="docutils literal notranslate"><span class="pre">prod-logs/</span></code> and <code class="docutils literal notranslate"><span class="pre">prod-logs/usage/</span></code> would not work because <code class="docutils literal notranslate"><span class="pre">/usage</span></code> is a child directory of <code class="docutils literal notranslate"><span class="pre">/prod-logs</span></code>.</p>
</div>
<div class="section" id="can-i-use-this-feature-when-there-are-existing-file-notifications-on-my-bucket-or-container">
<h2>Can I use this feature when there are existing file notifications on my bucket or container?<a class="headerlink" href="#can-i-use-this-feature-when-there-are-existing-file-notifications-on-my-bucket-or-container" title="Permalink to this headline"> </a></h2>
<p>Yes, as long as your input directory does not conflict with the existing notification prefix (for example, the above parent-child directories).</p>
</div>
<div class="section" id="how-does-auto-loader-infer-schema">
<h2>How does Auto Loader infer schema?<a class="headerlink" href="#how-does-auto-loader-infer-schema" title="Permalink to this headline"> </a></h2>
<p>When the DataFrame is first defined, Auto Loader lists your source directory and chooses the most recent (by file modification time) 50 GB of data or 1000 files, and uses those to infer your data schema.</p>
<p>Auto Loader also infers partition columns by examining the source directory structure and looks for file paths that contain the <code class="docutils literal notranslate"><span class="pre">/key=value/</span></code> structure. If the source directory has an inconsistent structure, for example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>base/path/partition=1/date=2020-12-31/file1.json
// inconsistent because date and partition directories are in different orders
base/path/date=2020-12-31/partition=2/file2.json
// inconsistent because the date directory is missing
base/path/partition=3/file3.json
</pre></div>
</div>
<p>Auto Loader infers the partition columns as empty. Use <code class="docutils literal notranslate"><span class="pre">cloudFiles.partitionColumns</span></code> to explicitly parse columns from the directory structure.</p>
</div>
<div class="section" id="how-does-auto-loader-behave-when-the-source-folder-is-empty">
<h2>How does Auto Loader behave when the source folder is empty?<a class="headerlink" href="#how-does-auto-loader-behave-when-the-source-folder-is-empty" title="Permalink to this headline"> </a></h2>
<p>If the source directory is empty, Auto Loader requires you to provide a schema as there is no data to perform inference.</p>
</div>
<div class="section" id="when-does-autoloader-infer-schema-does-it-evolve-automatically-after-every-micro-batch">
<h2>When does Autoloader infer schema? Does it evolve automatically after every micro-batch?<a class="headerlink" href="#when-does-autoloader-infer-schema-does-it-evolve-automatically-after-every-micro-batch" title="Permalink to this headline"> </a></h2>
<p>The schema is inferred when the DataFrame is first defined in your code. During each micro-batch, schema changes are evaluated on the fly; therefore, you don’t need to worry about performance hits. When the stream restarts, it picks up the evolved schema from the schema location and starts executing without any overhead from inference.</p>
</div>
<div class="section" id="whats-the-performance-impact-on-ingesting-the-data-when-using-auto-loader-schema-inference">
<h2>What’s the performance impact on ingesting the data when using Auto Loader schema inference?<a class="headerlink" href="#whats-the-performance-impact-on-ingesting-the-data-when-using-auto-loader-schema-inference" title="Permalink to this headline"> </a></h2>
<p>You should expect schema inference to take a couple of minutes for very large source directories during initial schema inference. You shouldn’t observe significant performance hits otherwise during stream execution. If you run your code in a Databricks notebook, you can see status updates that specify when Auto Loader will be listing your directory for sampling and inferring your data schema.</p>
</div>
<div class="section" id="due-to-a-bug-a-bad-file-has-changed-my-schema-drastically-what-should-i-do-to-roll-back-a-schema-change">
<h2>Due to a bug, a bad file has changed my schema drastically. What should I do to roll back a schema change?<a class="headerlink" href="#due-to-a-bug-a-bad-file-has-changed-my-schema-drastically-what-should-i-do-to-roll-back-a-schema-change" title="Permalink to this headline"> </a></h2>
<p>Contact Databricks support for help.</p>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../../_static/js/localized.js"></script>
  <script type="text/javascript" src="../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>