

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to manage service principals for your Databricks account and workspaces. A service principal is an identity that you create in Databricks for use with automated tools, jobs, and applications." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Manage service principals">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Manage service principals &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/administration-guide/users-groups/service-principals.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/administration-guide/users-groups/service-principals.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/administration-guide/users-groups/service-principals.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="top" title="Databricks on AWS" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../../en/administration-guide/users-groups/service-principals.html" class="notranslate">English</option>
    <option value="../../../ja/administration-guide/users-groups/service-principals.html" class="notranslate">日本語</option>
    <option value="../../../pt/administration-guide/users-groups/service-principals.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Manage service principals</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="manage-service-principals">
<h1>Manage service principals<a class="headerlink" href="#manage-service-principals" title="Permalink to this headline"> </a></h1>
<p>This article explains how to create and manage service principals for your Databricks account and workspaces.</p>
<p>For an overview of the Databricks identity model, see <a class="reference internal" href="index.html#identity-model"><span class="std std-ref">Databricks identities</span></a>.</p>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="what-is-a-service-principal">
<h2>What is a service principal?<a class="headerlink" href="#what-is-a-service-principal" title="Permalink to this headline"> </a></h2>
<p>A service principal is an identity that you create in Databricks for use with automated tools, jobs, and applications. Service principals give automated tools and scripts API-only access to Databricks resources, providing greater security than using users or groups.</p>
<p>You can grant and restrict a service principal’s access to resources in the same way as you can a Databricks user. For example, you can do the following:</p>
<ul class="simple">
<li><p>Give a service principal account admin and workspace admin roles.</p></li>
<li><p>Give a service principal access to data, either at the account level using Unity Catalog, or at the workspace level.</p></li>
<li><p><a class="reference internal" href="groups.html"><span class="doc">Add a service principal to a group</span></a> at both the account and workspace level, including the workspace <code class="docutils literal notranslate"><span class="pre">admins</span></code> group.</p></li>
</ul>
<p>You can also grant Databricks users, service principals, and groups permissions to use a service principal. This allows users to run jobs as the service principal, instead of as their identity. This prevents jobs from failing if a user leaves your organization or a group is modified.</p>
<p>Unlike a Databricks user, a service principal is an API-only identity; it cannot be used to access the Databricks UI.</p>
<p>Databricks recommends that you <a class="reference internal" href="index.html#enable-identity-federation"><span class="std std-ref">enable your workspaces for identity federation</span></a> so that you can manage your service principals in the account. If your workspace isn’t enabled for identity federation, you can create and manage service principals in your workspace.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If your account was created after November 8, 2023, identity federation is enabled on all new workspaces by default, and it cannot be disabled.</p>
</div>
</div>
<div class="section" id="who-can-manage-and-use-service-principals">
<span id="manage-sp-permissions"></span><h2>Who can manage and use service principals?<a class="headerlink" href="#who-can-manage-and-use-service-principals" title="Permalink to this headline"> </a></h2>
<p>To manage service principals in Databricks, you must have one of the following: the account admin role, the workspace admin role, or the manager or user role on a service principal.</p>
<ul class="simple">
<li><p><strong>Account admins</strong> can add service principals to the account and assign them admin roles. They can also assign service principals to workspaces, as long as those workspaces use identity federation.</p></li>
<li><p><strong>Workspace admins</strong> can add service principals to a Databricks workspace, assign them the workspace admin role, and manage access to objects and functionality in the workspace, such as the ability to create clusters or access specified persona-based environments.</p></li>
<li><p><strong>Service Principal Managers</strong> can manage roles on a service principal. The creator of a service principal becomes the service principal manager. Account admins are service principal managers on all service principals in an account.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a service principal was created before June 13, 2023, then the creator of the service principal does not have the service principal manager role by default. Ask an account admin to grant you the service principal manager role.</p>
</div>
<ul class="simple">
<li><p><strong>Service Principal Users</strong> can run jobs as the service principal by updating the job’s <strong>Run as</strong> setting to the service principal. The job runs using the identity of the service principal, instead of the identity of the job’s owner. The service principal user must have the <strong>Can Manage</strong> or <strong>Is Owner</strong> permission on the job to update the job’s <strong>Run as</strong> setting. For more information, see <a class="reference internal" href="../../workflows/jobs/create-run-jobs.html#run-as-sp"><span class="std std-ref">Run a job as a service principal</span></a>.</p></li>
</ul>
<p>For information on how to grant the service principal manager and user roles, see <a class="reference internal" href="../../security/auth-authz/access-control/service-principal-acl.html"><span class="doc">Roles for managing service principals</span></a>.</p>
</div>
<div class="section" id="manage-service-principals-in-your-account">
<span id="add-sp-account"></span><h2>Manage service principals in your account<a class="headerlink" href="#manage-service-principals-in-your-account" title="Permalink to this headline"> </a></h2>
<p>Account admins can add service principals to your Databricks account using the account console.</p>
<div class="section" id="add-service-principals-to-your-account-using-the-account-console">
<h3>Add service principals to your account using the account console<a class="headerlink" href="#add-service-principals-to-your-account-using-the-account-console" title="Permalink to this headline"> </a></h3>
<ol class="arabic simple">
<li><p>As an account admin, log in to the <a class="reference external" href="https://accounts.cloud.databricks.com">account console</a>.</p></li>
<li><p>In the sidebar, click <strong>User management</strong>.</p></li>
<li><p>On the <strong>Service principals</strong> tab, click <strong>Add service principal</strong>.</p></li>
<li><p>Enter a name for the service principal.</p></li>
<li><p>Click <strong>Add</strong>.</p></li>
</ol>
</div>
<div class="section" id="assign-account-admin-roles-to-a-service-principal">
<span id="assign-sp-account-admin"></span><h3>Assign account admin roles to a service principal<a class="headerlink" href="#assign-account-admin-roles-to-a-service-principal" title="Permalink to this headline"> </a></h3>
<ol class="arabic simple">
<li><p>As an account admin, log in to the <a class="reference external" href="https://accounts.cloud.databricks.com">account console</a>.</p>
<ol class="arabic simple">
<li><p>In the sidebar, click <strong>User management</strong>.</p></li>
<li><p>On the <strong>Service principals</strong> tab, find and click the username.</p></li>
<li><p>On the <strong>Roles</strong> tab, turn on <strong>Account admin</strong> or <strong>Marketplace admin</strong>.</p></li>
</ol>
</li>
</ol>
<p>To use service principals as account admins, you must generate OAuth tokens for them. See <a class="reference internal" href="../../dev-tools/authentication-oauth.html"><span class="doc">Authentication using OAuth for service principals</span></a>.</p>
</div>
<div class="section" id="assign-a-service-principal-to-a-workspace-using-the-account-console">
<h3>Assign a service principal to a workspace using the account console<a class="headerlink" href="#assign-a-service-principal-to-a-workspace-using-the-account-console" title="Permalink to this headline"> </a></h3>
<p>To add users to a workspace using the <a class="reference external" href="https://accounts.cloud.databricks.com">account console</a>, the workspace must be enabled for identity federation. Workspace admins can also assign service principals to workspaces using the workspace admin settings page. For details, see <a class="reference internal" href="#add-sp-admin-console"><span class="std std-ref">Add a service principal to a workspace using the workspace admin settings</span></a>.</p>
<ol class="arabic simple">
<li><p>As an account admin, log in to the <a class="reference external" href="https://accounts.cloud.databricks.com">account console</a>.</p></li>
<li><p>In the sidebar, click <strong>Workspaces</strong>.</p></li>
<li><p>Click your workspace name.</p></li>
<li><p>On the <strong>Permissions</strong> tab, click <strong>Add permissions</strong>.</p></li>
<li><p>Search for and select the service principal, assign the permission level (workspace <strong>User</strong> or <strong>Admin</strong>), and click <strong>Save</strong>.</p></li>
</ol>
</div>
<div class="section" id="remove-a-service-principal-from-a-workspace-using-the-account-console">
<h3>Remove a service principal from a workspace using the account console<a class="headerlink" href="#remove-a-service-principal-from-a-workspace-using-the-account-console" title="Permalink to this headline"> </a></h3>
<p>To remove service principals from a workspace using the account console, the workspace must be enabled for identity federation.</p>
<ol class="arabic simple">
<li><p>As an account admin, log in to the <a class="reference external" href="https://accounts.cloud.databricks.com">account console</a></p></li>
<li><p>In the sidebar, click <strong>Workspaces</strong>.</p></li>
<li><p>Click your workspace name.</p></li>
<li><p>On the <strong>Permissions</strong> tab, find the service principal.</p></li>
<li><p>Click the <img alt="Kebab menu" src="../../_images/kebab-menu.png" /> kebab menu at the far right of the service principal row and select <strong>Remove</strong>.</p></li>
<li><p>On the confirmation dialog, click <strong>Remove</strong>.</p></li>
</ol>
</div>
<div class="section" id="deactivate-a-service-principal-in-your-databricks-account">
<span id="deactivate-sp"></span><h3>Deactivate a service principal in your Databricks account<a class="headerlink" href="#deactivate-a-service-principal-in-your-databricks-account" title="Permalink to this headline"> </a></h3>
<p>Account admins can deactivate service principals across a Databricks account. A deactivated service principal cannot authenticate to the Databricks account or workspaces. However, all of the service principal’s permissions and workspace objects remain unchanged. When a service principal is deactivated the following is true:</p>
<ul class="simple">
<li><p>The service principal cannot authenticate to the account or any of their workspaces from any method.</p></li>
<li><p>Applications or scripts that use the tokens generated by the service principal are no longer able to access the Databricks API. The tokens remain but cannot be used to authenticate while a service principal is deactivated.</p></li>
<li><p>Clusters owned by the service principal remain running.</p></li>
<li><p>Scheduled jobs created by the service principal fail unless they are assigned to a new owner.</p></li>
</ul>
<p>When a service principal is reactivated, they can login to Databricks with the same permissions. Databricks recommends deactivating service principals from the account instead of removing them because removing a service principal is a destructive action. See <a class="reference internal" href="#remove-sp"><span class="std std-ref">Remove service principals from your Databricks account</span></a>. When you deactivate a service principal from the account, that service principal is also deactivated from their identity federated workspaces.</p>
<p>You cannot deactivate a user using the account console. Instead, use the Account Service Principals API. See <a class="reference internal" href="#deactivate-api"><span class="std std-ref">Deactivate a service principal using the API</span></a>.</p>
</div>
<div class="section" id="remove-service-principals-from-your-databricks-account">
<span id="remove-sp"></span><h3>Remove service principals from your Databricks account<a class="headerlink" href="#remove-service-principals-from-your-databricks-account" title="Permalink to this headline"> </a></h3>
<p>Account admins can delete service principals from a Databricks account. Workspace admins cannot. When you delete a service principal from the account, that principal is also removed from their workspaces.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>When you remove a service principal from the account, that service principal is also removed from their workspaces, regardless of whether or not identity federation has been enabled. We recommend that you refrain from deleting account-level service principals unless you want them to lose access to all workspaces in the account. Be aware of the following consequences of deleting service principals:</p>
<ul class="simple">
<li><p>Applications or scripts that use the tokens generated by the service principal can no longer access Databricks APIs</p></li>
<li><p>Jobs owned by the service principal fail</p></li>
<li><p>Clusters owned by the service principal stop</p></li>
<li><p>Queries or dashboards created by the service principal and shared using the Run as Owner credential have to be assigned to a new owner to prevent sharing from failing</p></li>
</ul>
</div>
<p>To remove a service principal using the <a class="reference external" href="https://accounts.cloud.databricks.com">account console</a>, do the following:</p>
<ol class="arabic simple">
<li><p>As an account admin, log in to the account console.</p></li>
<li><p>In the sidebar, click <strong>User management</strong>.</p></li>
<li><p>On the <strong>Service principals</strong> tab, find and click the username.</p></li>
<li><p>On the <strong>Principal Information</strong> tab, click the <img alt="Kebab menu" src="../../_images/kebab-menu.png" />  kebab menu in the upper-right corner and select <strong>Delete</strong>.</p></li>
<li><p>In the confirmation dialog box, click <strong>Confirm delete</strong>.</p></li>
</ol>
</div>
</div>
<div class="section" id="manage-service-principals-in-your-workspace">
<span id="add-sp-workspace"></span><h2>Manage service principals in your workspace<a class="headerlink" href="#manage-service-principals-in-your-workspace" title="Permalink to this headline"> </a></h2>
<p>Workspace admins can manage service principals in their workspaces using the workspace admin settings page.</p>
<div class="section" id="add-a-service-principal-to-a-workspace-using-the-workspace-admin-settings">
<span id="add-sp-admin-console"></span><h3>Add a service principal to a workspace using the workspace admin settings<a class="headerlink" href="#add-a-service-principal-to-a-workspace-using-the-workspace-admin-settings" title="Permalink to this headline"> </a></h3>
<ol class="arabic simple">
<li><p>As a workspace admin, log in to the Databricks workspace.</p></li>
<li><p>Click your username in the top bar of the Databricks workspace and select <strong>Admin Settings</strong>.</p></li>
<li><p>Click on the <strong>Identity and access</strong> tab.</p></li>
<li><p>Next to <strong>Service principals</strong>, click <strong>Manage</strong>.</p></li>
<li><p>Click <strong>Add service principal</strong>.</p></li>
<li><p>Select an existing service principal to assign to the workspace or click <strong>Add new</strong> to create a new one.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your workspace is not enabled for <a class="reference internal" href="index.html#enable-identity-federation"><span class="std std-ref">identity federation</span></a>, you cannot assign existing account service principals to your workspace.</p>
</div>
</div>
<div class="section" id="assign-the-workspace-admin-role-to-a-service-principal-using-the-workspace-admin-settings-page">
<h3>Assign the workspace admin role to a service principal using the workspace admin settings page<a class="headerlink" href="#assign-the-workspace-admin-role-to-a-service-principal-using-the-workspace-admin-settings-page" title="Permalink to this headline"> </a></h3>
<ol class="arabic simple">
<li><p>As a workspace admin, log in to the Databricks workspace.</p></li>
<li><p>Click your username in the top bar of the Databricks workspace and select <strong>Admin Settings</strong>.</p></li>
<li><p>Click on the <strong>Identity and access</strong> tab.</p></li>
<li><p>Next to <strong>*Groups</strong>, click <strong>Manage</strong>.</p></li>
<li><p>Select the <code class="docutils literal notranslate"><span class="pre">admins</span></code> system group.</p></li>
<li><p>Click <strong>Add members</strong>.</p></li>
<li><p>Select the service principal and click <strong>Confirm</strong>.</p></li>
</ol>
<p>To remove the workspace admin role from a service principal, remove the service principal from the admin group.</p>
</div>
<div class="section" id="manage-workspace-entitlements-for-a-service-principal">
<span id="manage-sp-entitlements"></span><h3>Manage workspace entitlements for a service principal<a class="headerlink" href="#manage-workspace-entitlements-for-a-service-principal" title="Permalink to this headline"> </a></h3>
<p>An entitlement is a property that allows a user, service principal, or group to interact with Databricks in a specified way. Entitlements are assigned to users at the workspace level. The following table lists entitlements and the workspace UI and API property name that you use to manage each one. You can use the workspace admin settings page and workspace-level SCIM REST APIs to manage entitlements.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Entitlement name</p></th>
<th class="head"><p>Entitlement API name</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Workspace access</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">workspace-access</span></code></p></td>
<td><p>Granted by default.</p></td>
<td><p>When granted to a user or service principal, they can access the Data Science &amp; Engineering and Databricks Machine Learning persona-based environments.</p>
<p>Can’t be removed from workspace admins.</p>
</td>
</tr>
<tr class="row-odd"><td><p>Databricks SQL access</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">databricks-sql-access</span></code></p></td>
<td><p>Granted by default.</p></td>
<td><p>When granted to a user or service principal, they can access Databricks SQL.</p></td>
</tr>
<tr class="row-even"><td><p>Allow unrestricted cluster creation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">allow-cluster-create</span></code></p></td>
<td><p>Not granted to users or service principals by default.</p></td>
<td><p>When granted to a user or service principal, they can create unrestricted clusters. You can restrict access to existing clusters using <a class="reference internal" href="../../security/auth-authz/access-control/cluster-acl.html"><span class="doc">cluster-level permissions</span></a>.</p>
<p>Can’t be removed from workspace admins.</p>
</td>
</tr>
<tr class="row-odd"><td><p>Allow pool creation (not available via UI)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">allow-instance-pool-create</span></code></p></td>
<td><p>Can’t be granted to individual users or service principals.</p></td>
<td><p>When granted to a group, its members can create instance pools.</p>
<p>Can’t be removed from workspace admins.</p>
</td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">users</span></code> group is granted the <strong>Workspace access</strong> and <strong>Databricks SQL access</strong> entitlements by default. All workspace users and service principals are members of the <code class="docutils literal notranslate"><span class="pre">users</span></code> group. To assign these entitlements on a user-by-user basis, a workspace admin must remove the entitlement from the <code class="docutils literal notranslate"><span class="pre">users</span></code> group and assign it individually to users, service principals, and groups.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>To log in and access a Databricks workspace, a user must have the <strong>Databricks SQL access</strong> or <strong>Workspace access</strong> entitlement.</p>
</div>
<p>You cannot grant the <code class="docutils literal notranslate"><span class="pre">allow-instance-pool-create</span></code> entitlement using the admin settings page. Instead, use the Workspace Users, Service Principals, or Groups API.</p>
<div class="section" id="add-or-remove-an-entitlement-for-a-service-principal-using-the-workspace-admin-settings-page">
<h4>Add or remove an entitlement for a service principal using the workspace admin settings page<a class="headerlink" href="#add-or-remove-an-entitlement-for-a-service-principal-using-the-workspace-admin-settings-page" title="Permalink to this headline"> </a></h4>
<ol class="arabic simple">
<li><p>As a workspace admin, log in to the Databricks workspace.</p></li>
<li><p>Click your username in the top bar of the Databricks workspace and select <strong>Admin Settings</strong>.</p></li>
<li><p>Click on the <strong>Identity and access</strong> tab.</p></li>
<li><p>Next to <strong>Service principals</strong>, click <strong>Manage</strong>.</p></li>
<li><p>Select the service principal you want to update.</p></li>
<li><p>To add an entitlement, under <strong>Entitlements</strong>, select the corresponding checkbox.</p></li>
</ol>
<p>To remove an entitlement, perform the same steps, but clear the checkbox instead.</p>
</div>
</div>
<div class="section" id="deactivate-a-service-principal-in-your-databricks-workspace">
<span id="deactivate-sp-workspace"></span><h3>Deactivate a service principal in your Databricks workspace<a class="headerlink" href="#deactivate-a-service-principal-in-your-databricks-workspace" title="Permalink to this headline"> </a></h3>
<p>Workspace admins can deactivate service principals in a Databricks workspace. A deactivated service principal cannot access the workspace from Databricks APIs, however all of the service principal’s permissions and workspace objects remain unchanged. When a service principal is deactivated:</p>
<ul class="simple">
<li><p>The service principal cannot authenticate to the workspaces from any method.</p></li>
<li><p>The service principal’s status shows as <strong>Inactive</strong> in the workspace admin setting page.</p></li>
<li><p>Applications or scripts that use the tokens generated by the service principal can no longer access the Databricks API. The tokens remain but cannot be used to authenticate while a service principal is deactivated.</p></li>
<li><p>Clusters owned by the service principal remain running.</p></li>
<li><p>Scheduled jobs created by the service principal have to be assigned to a new owner to prevent them from failing.</p></li>
</ul>
<p>When a service principal is reactivated, they can authenticate to the workspace with the same permissions. Databricks recommends deactivating service principal instead of removing them because removing a service principal is a destructive action.</p>
<ol class="arabic simple">
<li><p>As a workspace admin, log in to the Databricks workspace.</p></li>
<li><p>Click your username in the top bar of the Databricks workspace and select <strong>Admin Settings</strong>.</p></li>
<li><p>Click on the <strong>Identity and access</strong> tab.</p></li>
<li><p>Next to <strong>Service principals</strong>, click <strong>Manage</strong>.</p></li>
<li><p>Select the service principal you want to deactivate.</p></li>
<li><p>Under <strong>Status</strong>, uncheck <strong>Active</strong>.</p></li>
</ol>
<p>To set a service principal to active, perform the same steps, but check the checkbox instead.</p>
</div>
<div class="section" id="remove-a-service-principal-from-a-workspace-using-the-workspace-admin-settings-page">
<h3>Remove a service principal from a workspace using the workspace admin settings page<a class="headerlink" href="#remove-a-service-principal-from-a-workspace-using-the-workspace-admin-settings-page" title="Permalink to this headline"> </a></h3>
<p>Removing a service principal from a workspace does not remove the service principal from the account. To remove a service principal from your account, see <a class="reference internal" href="#remove-sp"><span class="std std-ref">Remove service principals from your Databricks account</span></a>.</p>
<ol class="arabic simple">
<li><p>As a workspace admin, log in to the Databricks workspace.</p></li>
<li><p>Click your username in the top bar of the Databricks workspace and select <strong>Admin Settings</strong>.</p></li>
<li><p>Click on the <strong>Identity and access</strong> tab.</p></li>
<li><p>Next to <strong>Service principals</strong>, click <strong>Manage</strong>.</p></li>
<li><p>Select the service principal.</p></li>
<li><p>In the upper-right corner, click <strong>Delete</strong>.</p></li>
<li><p>Click <strong>Delete</strong> to confirm.</p></li>
</ol>
</div>
</div>
<div class="section" id="manage-service-principals-using-the-api">
<span id="manage-sp-api"></span><h2>Manage service principals using the API<a class="headerlink" href="#manage-service-principals-using-the-api" title="Permalink to this headline"> </a></h2>
<p>Account admins and workspace admins can manage service principals in the Databricks account and workspaces using Databricks APIs. To manage roles on a service principal using the API, see <a class="reference internal" href="../../security/auth-authz/access-control/service-principal-acl.html#api"><span class="std std-ref">Manage service principal roles using the API</span></a>.</p>
<div class="section" id="manage-service-principals-in-the-account-using-the-api">
<span id="manage-sp-account-api"></span><h3>Manage service principals in the account using the API<a class="headerlink" href="#manage-service-principals-in-the-account-using-the-api" title="Permalink to this headline"> </a></h3>
<p>Admins can add and manage service principals in the Databricks account using the Account Service Principals API. Account admins and workspace admins invoke the API using a different endpoint URL:</p>
<ul class="simple">
<li><p>Account admins use <code class="docutils literal notranslate"><span class="pre">{account-domain}/api/2.0/accounts/{account_id}/scim/v2/</span></code>.</p></li>
<li><p>Workspace admins use <code class="docutils literal notranslate"><span class="pre">{workspace-domain}/api/2.0/account/scim/v2/</span></code>.</p></li>
</ul>
<p>For details, see the <a class="reference external" href="https://docs.databricks.com/api/account/accountserviceprincipals">Account Service Principals API</a>.</p>
</div>
<div class="section" id="deactivate-a-service-principal-using-the-api">
<span id="deactivate-api"></span><h3>Deactivate a service principal using the API<a class="headerlink" href="#deactivate-a-service-principal-using-the-api" title="Permalink to this headline"> </a></h3>
<p>Account admins can change a service principal’s status to false to deactivate the service principal using the <a class="reference external" href="https://docs.databricks.com/api/account/accountserviceprincipals/patch">Account Service Principals API</a>.</p>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>--netrc<span class="w"> </span>-X<span class="w"> </span>PATCH<span class="w"> </span><span class="se">\</span>
https://<span class="si">${</span><span class="nv">DATABRICKS_HOST</span><span class="si">}</span>/api/2.0/accounts/<span class="o">{</span>account_id<span class="o">}</span>/scim/v2/ServicePrincipals/<span class="o">{</span>id<span class="o">}</span><span class="w"> </span><span class="se">\</span>
--header<span class="w"> </span><span class="s1">&#39;Content-type: application/scim+json&#39;</span><span class="w"> </span><span class="se">\</span>
--data<span class="w"> </span>@update-sp.json<span class="w"> </span><span class="se">\</span>
<span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>.
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">update-sp.json</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;schemas&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;urn:ietf:params:scim:api:messages:2.0:PatchOp&quot;</span><span class="w"> </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;Operations&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;op&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;replace&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;active&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;false&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A deactivated service principal’s status is labeled <strong>Inactive</strong> in the account console. When you deactivate a service principal from the account, that service principal is also deactivated from its workspaces.</p>
</div>
<div class="section" id="manage-service-principals-in-the-workspace-using-the-api">
<h3>Manage service principals in the workspace using the API<a class="headerlink" href="#manage-service-principals-in-the-workspace-using-the-api" title="Permalink to this headline"> </a></h3>
<p>Account and workspace admins can use the Workspace Assignment API to assign service principals to workspaces enabled for identity federation. The Workspace Assignment API is supported through the Databricks account and workspaces.</p>
<ul class="simple">
<li><p>Account admins use <code class="docutils literal notranslate"><span class="pre">{account-domain}/api/2.0/accounts/{account_id}/workspaces/{workspace_id}/permissionassignments</span></code>.</p></li>
<li><p>Workspace admins use <code class="docutils literal notranslate"><span class="pre">{workspace-domain}/api/2.0/preview/permissionassignments</span></code>.</p></li>
</ul>
<p>See <a class="reference external" href="https://docs.databricks.com/api/account/workspaceassignment">Workspace Assignment API</a>.</p>
<p>If your workspace is not enabled for identity federation, a workspace admin can use the workspace-level APIs to assign service principals to their workspaces. See <a class="reference external" href="https://docs.databricks.com/api/workspace/serviceprincipals">Workspace Service Principals API</a>.</p>
</div>
</div>
<div class="section" id="manage-tokens-for-a-service-principal">
<span id="personal-access-tokens"></span><h2>Manage tokens for a service principal<a class="headerlink" href="#manage-tokens-for-a-service-principal" title="Permalink to this headline"> </a></h2>
<p>To authenticate a service principal to APIs on Databricks, an administrator can create OAuth tokens or personal access tokens for a service principal.</p>
<div class="section" id="manage-oauth-for-a-service-principal">
<span id="oauth-tokens"></span><h3>Manage OAuth for a service principal<a class="headerlink" href="#manage-oauth-for-a-service-principal" title="Permalink to this headline"> </a></h3>
<p>To authenticate to account-level and workspace-level Databricks REST APIs, account admins can use Databricks OAuth tokens for service principals. You can request an OAuth token using the client ID and a client secret for the service principal. For more information, see <a class="reference internal" href="../../dev-tools/authentication-oauth.html"><span class="doc">Authentication using OAuth for service principals</span></a>.</p>
</div>
<div class="section" id="manage-personal-access-tokens-for-a-service-principal">
<h3>Manage personal access tokens for a service principal<a class="headerlink" href="#manage-personal-access-tokens-for-a-service-principal" title="Permalink to this headline"> </a></h3>
</div>
<p>To authenticate a service principal to workspace-level APIs on Databricks, a workspace admin can create a Databricks personal access tokens on behalf of the service principal.</p>
<ol class="arabic simple">
<li><p>Grant the <a class="reference internal" href="../access-control/tokens.html#permissions"><span class="std std-ref">Can Use token permission</span></a> to the service principal.</p></li>
<li><p>Create a Databricks personal access token on behalf of the service principal using the <code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/token-management/on-behalf-of/tokens</span></code> operation in the <a class="reference external" href="https://docs.databricks.com/api/workspace/tokenmanagement">Token management API</a>. An administrator can also list personal access tokens and delete them using the same API.</p></li>
</ol>
<p>For detailed, step-by-step instructions for creating access tokens for service principals, see <a class="reference internal" href="../../dev-tools/service-principals.html"><span class="doc">Provision a service principal for Databricks automation - Databricks UI</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It’s not possible to create, list, or manage a token for a service principal from within the Databricks UI.</p>
</div>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../../_static/js/localized.js"></script>
  <script type="text/javascript" src="../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>