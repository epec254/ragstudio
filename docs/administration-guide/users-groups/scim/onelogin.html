

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to provision users to Databricks using OneLogin." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Configure SCIM provisioning for OneLogin">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Configure SCIM provisioning for OneLogin &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/administration-guide/users-groups/scim/onelogin.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/administration-guide/users-groups/scim/onelogin.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/administration-guide/users-groups/scim/onelogin.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../../../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../../../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../../../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../../../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../../../genindex.html" />
  <link rel="search" title="Search" href="../../../search.html" />
  <link rel="top" title="Databricks on AWS" href="../../../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../../../en/administration-guide/users-groups/scim/onelogin.html" class="notranslate">English</option>
    <option value="../../../../ja/administration-guide/users-groups/scim/onelogin.html" class="notranslate">日本語</option>
    <option value="../../../../pt/administration-guide/users-groups/scim/onelogin.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Configure SCIM provisioning for OneLogin</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="configure-scim-provisioning-for-onelogin">
<h1>Configure SCIM provisioning for OneLogin<a class="headerlink" href="#configure-scim-provisioning-for-onelogin" title="Permalink to this headline"> </a></h1>
<p>This article describes how to set up Databricks provisioning using Onelogin.</p>
<p>You can set set up provisioning at the Databricks account level or at the Databricks workspace level.</p>
<p>Databricks recommends that you provision users, service principals, and groups to the account level and assign users and groups to workspaces using <a class="reference internal" href="../index.html#enable-identity-federation"><span class="std std-ref">identity federation</span></a>. If you have any workspaces that are not enabled for identity federation, you must continue to provision users, service principals, and groups directly to those workspaces.</p>
<p>To learn more about SCIM provisioning in Databricks, including an explanation of the impact of identity federation on provisioning and advice about when to use account-level and workspace-level provisioning, see <a class="reference internal" href="index.html"><span class="doc">Sync users and groups from your identity provider</span></a>.</p>
<p>To configure single sign-on with OneLogin see, <a class="reference internal" href="../single-sign-on/index.html"><span class="doc">Set up SSO for your workspace</span></a>.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li><p>Your Databricks account must have the <a class="reference external" href="https://databricks.com/product/pricing/platform-addons">Premium plan or above</a>.</p></li>
<li><p>To set up provisioning for your Databricks account, you must be Databricks account admin.</p></li>
<li><p>To set up provisioning for a Databricks workspace, you must be Databricks workspace admin.</p></li>
<li><p>Your OneLogin account must support provisioning.</p></li>
<li><p>You must be a Super User or Account Owner for your OneLogin account.</p></li>
<li><p>Databricks recommends that you read the OneLogin article, <a class="reference external" href="https://www.onelogin.com/learn/what-is-user-provisioning-and-deprovisioning">What is User Provisioning and Deprovisioning?</a>.</p></li>
</ul>
</div>
<div class="section" id="set-up-account-level-scim-provisioning-using-onelogin">
<h2>Set up account-level SCIM provisioning using OneLogin<a class="headerlink" href="#set-up-account-level-scim-provisioning-using-onelogin" title="Permalink to this headline"> </a></h2>
<p>This section describes how to configure an OneLogin SCIM connector to provision users and groups to your account.</p>
<div class="section" id="get-the-scim-token-and-account-scim-url-in-databricks">
<h3>Get the SCIM token and account SCIM URL in Databricks<a class="headerlink" href="#get-the-scim-token-and-account-scim-url-in-databricks" title="Permalink to this headline"> </a></h3>
<ol class="arabic">
<li><p>As an account admin, log in to the Databricks <a class="reference external" href="https://accounts.cloud.databricks.com">account console</a>.</p>
<ol class="arabic">
<li><p>Click <img alt="User Settings Icon" src="../../../_images/user-settings-icon.png" /> <strong>Settings</strong>.</p></li>
<li><p>Click <strong>User Provisioning</strong>.</p></li>
<li><p>Click <strong>Enable user provisioning</strong>.</p>
<p>Copy the SCIM token and the Account SCIM URL. You will use these to configure your connector in OneLogin.</p>
</li>
</ol>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The SCIM token is restricted to the Account SCIM API <code class="docutils literal notranslate"><span class="pre">/api/2.0/accounts/{account_id}/scim/v2/</span></code> and cannot be used to authenticate to other Databricks REST APIs.</p>
</div>
</div>
<div class="section" id="configure-the-onelogin-scim-provisioning-app">
<h3>Configure the OneLogin SCIM provisioning app<a class="headerlink" href="#configure-the-onelogin-scim-provisioning-app" title="Permalink to this headline"> </a></h3>
<ol class="arabic">
<li><p>Log in to OneLogin as a Super User or Account Owner, and launch the OneLogin admin console.</p></li>
<li><p>Go to <strong>Applications</strong> and  click <strong>Add App</strong>.</p></li>
<li><p>Search for and select <strong>SCIM Provisioner with SAML (SCIM v2 Core)</strong>.</p></li>
<li><p>Click <strong>Save</strong>. New configuration tabs appear at the left.</p></li>
<li><p>Click <strong>Configuration</strong>.</p></li>
<li><p>In <strong>Databricks subdomain</strong>, enter the Account SCIM URL.</p></li>
<li><p>In the <strong>SCIM Bearer Token</strong> field, enter the Databricks personal access token.</p></li>
<li><p>Under <strong>API Connection</strong>, click <strong>Enable</strong>. The application authenticates to Databricks.</p></li>
<li><p>Go to <strong>Provisioning</strong> to enable and configure provisioning.</p>
<ol class="loweralpha">
<li><p>Under <strong>Workflow</strong>, select <strong>Enable provisioning</strong>.</p></li>
<li><p>Configure whether to require admin approval to create, delete, or update a user.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Databricks recommends that you enable admin approval for all operations as an initial safeguard, so that you don’t trigger automatic provisioning for your users before setup and testing have been completed. After you have tested and verified that provisioning is working as expected, you can configure these settings to override admin approval.</p>
</div>
</li>
<li><p>Configure the behavior in Databricks when a user is deleted from OneLogin:</p>
<ul class="simple">
<li><p><strong>Do nothing</strong> does not modify the user in Databricks.</p></li>
<li><p><strong>Suspend</strong> disables the user in Databricks. The user can’t log in, but the user’s resources are not modified. This is reversible.</p></li>
<li><p><strong>Delete</strong> deletes the user in Databricks and archives the user’s resources. This is not reversible.</p></li>
</ul>
</li>
<li><p>Configure the behavior in Databricks when a user is suspended in OneLogin.</p>
<ul class="simple">
<li><p><strong>Do nothing</strong> does not modify the user in Databricks.</p></li>
<li><p><strong>Suspend</strong> disables the user in Databricks. The user can’t log in, but the user’s resources are not modified. This is reversible.</p></li>
</ul>
</li>
</ol>
<ol class="loweralpha simple" start="2">
<li><p>Under <strong>Entitlements</strong>, click <strong>Refresh</strong>. In OneLogin, groups are called entitlements. This imports groups from Databricks into OneLogin. Importing OneLogin entitlements into Databricks is not supported.</p></li>
</ol>
</li>
<li><p>Click Save.</p></li>
</ol>
<p>Continue to <a class="reference internal" href="#manage-users"><span class="std std-ref">Use OneLogin to manage users and groups in Databricks</span></a> to provision users and groups in your Databricks account.</p>
</div>
</div>
<div class="section" id="set-up-workspace-level-scim-provisioning-using-onelogin">
<h2>Set up workspace-level SCIM provisioning using OneLogin<a class="headerlink" href="#set-up-workspace-level-scim-provisioning-using-onelogin" title="Permalink to this headline"> </a></h2>
<div class="preview admonition">
<p class="admonition-title">Preview</p>
<p>This feature is in <a class="reference internal" href="../../../release-notes/release-types.html"><span class="doc">Public Preview</span></a>.</p>
</div>
<p>When you follow these steps, log into the Databricks admin settings page in one browser tab and log into the OneLogin admin console in another.</p>
<div class="section" id="generate-a-databricks-personal-access-token">
<h3>Generate a Databricks personal access token<a class="headerlink" href="#generate-a-databricks-personal-access-token" title="Permalink to this headline"> </a></h3>
<p>As a Databricks workspace administrator, generate a personal access token. See <a class="reference external" href="https://docs.databricks.com/api/workspace/tokenmanagement">Token management</a>. Store the personal access token in a secure location. OneLogin will use this personal access token to authenticate to Databricks.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The user who owns this personal access token must not be managed within
OneLogin. Otherwise, removing the user from OneLogin would disrupt the SCIM integration.</p>
</div>
</div>
<div class="section" id="configure-the-onelogin-scim-provisioning-app">
<span id="configure-the-onelogin-scim-provisioning-app-1"></span><h3>Configure the OneLogin SCIM provisioning app<a class="headerlink" href="#configure-the-onelogin-scim-provisioning-app" title="Permalink to this headline"> </a></h3>
<ol class="arabic">
<li><p>Log in to OneLogin as a Super User or Account Owner, and launch the OneLogin admin console.</p></li>
<li><p>Go to <strong>Applications</strong> and  click <strong>Add App</strong>.</p></li>
<li><p>Search for and select <strong>SCIM Provisioner with SAML (SCIM v2 Core)</strong>.</p></li>
<li><p>Click <strong>Save</strong>. New configuration tabs appear at the left.</p></li>
<li><p>Click <strong>Configuration</strong>.</p></li>
<li><p>In <strong>Databricks subdomain</strong>, enter <code class="docutils literal notranslate"><span class="pre">https://&lt;databricks-instance&gt;/api/2.0/preview/scim/v2</span></code>. Replace <code class="docutils literal notranslate"><span class="pre">&lt;databricks-instance&gt;</span></code> with the <a class="reference internal" href="../../../workspace/workspace-details.html#workspace-url"><span class="std std-ref">workspace URL</span></a> of your Databricks deployment. See <a class="reference internal" href="../../../workspace/workspace-details.html"><span class="doc">Get identifiers for workspace objects</span></a>.</p></li>
<li><p>In the <strong>SCIM Bearer Token</strong> field, enter the Databricks personal access token.</p></li>
<li><p>Under <strong>API Connection</strong>, click <strong>Enable</strong>. The application authenticates to Databricks.</p></li>
<li><p>Go to <strong>Provisioning</strong> to enable and configure provisioning.</p>
<ol class="loweralpha">
<li><p>Under <strong>Workflow</strong>, select <strong>Enable provisioning</strong>.</p></li>
<li><p>Configure whether to require admin approval to create, delete, or update a user.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Databricks recommends that you enable admin approval for all operations as an initial safeguard, so that you don’t trigger automatic provisioning for your users before setup and testing have been completed. After you have tested and verified that provisioning is working as expected, you can configure these settings to override admin approval.</p>
</div>
</li>
<li><p>Configure the behavior in Databricks when a user is deleted from OneLogin:</p>
<ul class="simple">
<li><p><strong>Do nothing</strong> does not modify the user in Databricks.</p></li>
<li><p><strong>Suspend</strong> disables the user in Databricks. The user can’t log in, but the user’s resources are not modified. This is reversible.</p></li>
<li><p><strong>Delete</strong> deletes the user in Databricks and archives the user’s resources. This is not reversible.</p></li>
</ul>
</li>
<li><p>Configure the behavior in Databricks when a user is suspended in OneLogin.</p>
<ul class="simple">
<li><p><strong>Do nothing</strong> does not modify the user in Databricks.</p></li>
<li><p><strong>Suspend</strong> disables the user in Databricks. The user can’t log in, but the user’s resources are not modified. This is reversible.</p></li>
</ul>
</li>
</ol>
<ol class="loweralpha simple" start="2">
<li><p>Under <strong>Entitlements</strong>, click <strong>Refresh</strong>. In OneLogin, groups are called entitlements. This imports groups from Databricks into OneLogin. Importing OneLogin entitlements into Databricks is not supported.</p></li>
</ol>
</li>
<li><p>Click Save.</p></li>
</ol>
<p>Continue to <a class="reference internal" href="#manage-users"><span class="std std-ref">Use OneLogin to manage users and groups in Databricks</span></a> to provision users and groups in your Databricks workspace.</p>
</div>
</div>
<div class="section" id="use-onelogin-to-manage-users-and-groups-in-databricks">
<span id="manage-users"></span><h2>Use OneLogin to manage users and groups in Databricks<a class="headerlink" href="#use-onelogin-to-manage-users-and-groups-in-databricks" title="Permalink to this headline"> </a></h2>
<p>This section describes how to use OneLogin to manage users and groups the Databricks account or workspace.</p>
<div class="section" id="assign-groups-to-databricks-workspace-users">
<h3>Assign groups to Databricks workspace users<a class="headerlink" href="#assign-groups-to-databricks-workspace-users" title="Permalink to this headline"> </a></h3>
<p>You must create Databricks groups in Databricks and create mappings to keep them in sync with OneLogin fields. You cannot add groups to Databricks using OneLogin.</p>
<ol class="arabic simple">
<li><p>In OneLogin, go to the <strong>Parameters</strong> tab.</p></li>
<li><p>Under <strong>Optional Parameters</strong>, click on <strong>Groups</strong>.</p></li>
<li><p>Verify that all of the group names were successfully imported from Databricks to the <strong>Values</strong> field when you clicked Refresh on the Provisioning tab (above), and select the <strong>Include in User Provisioning</strong> flag.</p></li>
<li><p>Click <strong>Save</strong>.</p></li>
</ol>
<p>Once you have configured your attribute mapping, you can assign groups to Databricks users when you provision them. To assign Group values, you can manually select them on the user login record for the OneLogin SCIM provisioning app. On the <strong>Users</strong> tab of the OneLogin SCIM provisioning app, select the user to edit.</p>
<p>You can also use OneLogin rules (mappings) to assign users to Databricks groups automatically, based on another OneLogin attribute, such as OneLogin Role. For example, to place all users who are in the OneLogin Role “Finance” in the Databricks “finance” group, you can go to the <strong>Rules</strong> tab in your OneLogin SCIM provisioning app and create a <strong>New Rule</strong> with the condition <strong>Roles – include – Finance</strong> and the action <strong>Set Groups in Databricks to – finance</strong>, as in this screenshot:</p>
<div class="figure align-default">
<img alt="Rules tab" src="../../../_images/onelogin-rule.png" />
</div>
<p>Now, whenever you add a user to the OneLogin “Finance” role and the OneLogin SCIM provisioning app, the user will be assigned the “finance” group in Databricks when you reapply entitlement mappings.</p>
<p>Users added to the <code class="docutils literal notranslate"><span class="pre">admins</span></code> group in a OneLogin workspace-level SCIM provisioning app become Databricks workspace administrators.</p>
</div>
<div class="section" id="remove-or-update-group-assignments">
<h3>Remove or update group assignments<a class="headerlink" href="#remove-or-update-group-assignments" title="Permalink to this headline"> </a></h3>
<p>To remove or update group assignments go to the <strong>Users</strong> tab in the OneLogin SCIM provisioning app and select the user to edit. Remove or override the current selection in the group field, custom IAM role field, or custom entitlement field.</p>
<p>If you have set up rules to assign groups to the user based on a OneLogin attribute, such as OneLogin Role, remove that attribute from the user (for example, remove the user from the OneLogin Role). You can also change the rule that assigns the group, IAM role, or entitlement to users in that OneLogin role.</p>
<p>When you remove a user from the <code class="docutils literal notranslate"><span class="pre">admins</span></code> group in OneLogin and the change is synced to Databricks, the user is no longer a Databricks workspace administrator.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Do not remove the administrator who configured the OneLogin SCIM provisioning app, and do not remove them from the <code class="docutils literal notranslate"><span class="pre">admins</span></code> group. Otherwise, the SCIM integration cannot authenticate to Databricks.</p>
</div>
</div>
<div class="section" id="trigger-a-sync">
<h3>Trigger a sync<a class="headerlink" href="#trigger-a-sync" title="Permalink to this headline"> </a></h3>
<p>You can manually trigger a sync of OneLogin users with Databricks users by going to the OneLogin SCIM provisioning app and selecting <strong>MORE ACTIONS -&gt; Sync logins</strong>. If a user is assigned to the app, the user will be added to your Databricks account or workspace. However, the reverse is not true: a user created in the Databricks account or workspace will not be added to the OneLogin SCIM provisioning app.</p>
<p>To manually sync users from the Databricks account or workspace to OneLogin, create a user in OneLogin with the same username and email address as the user in the Databricks account or workspace, and then assign the user to the app in OneLogin.</p>
</div>
<div class="section" id="delete-users">
<h3>Delete users<a class="headerlink" href="#delete-users" title="Permalink to this headline"> </a></h3>
<p>You can delete users in OneLogin and OneLogin deactivates them from the Databricks account or workspace.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Do not remove the administrator who configured the OneLogin SCIM provisioning app from Databricks or from the <code class="docutils literal notranslate"><span class="pre">admins</span></code> group. Otherwise, the SCIM integration cannot authenticate to Databricks.</p>
</div>
<p>You can deactivated a user in multiple ways:</p>
<ul class="simple">
<li><p>Delete or suspend the user from OneLogin.</p></li>
<li><p>Remove the user from the app manually by going to the <strong>Users</strong> tab in the OneLogin SCIM provisioning app, selecting the user, and clicking the <strong>Delete</strong> button.</p></li>
<li><p>If you have set up rules to assign the user to the app based on a OneLogin attribute, such as OneLogin Role, remove that attribute from the user (for example, remove the user from the OneLogin Role). You can also remove then Databricks app from a OneLogin Role that the user is assigned to (this deprovisions Databricks for all users in the role).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you remove a user from the account-level SCIM application, that user is deactivated from the account and from their workspaces, regardless of whether or not identity federation has been enabled.</p>
<p>If you delete a OneLogin-managed user directly in the Databricks workspace, the user will remain active in the OneLogin SCIM provisioning app. When you try to delete the user from the OneLogin SCIM provisioning app, the attempt will fail, because the user is already deleted in the workspace.</p>
</div>
</div>
</div>
<div class="section" id="use-onelogin-to-manage-entitlements-and-iam-roles">
<span id="use-onelogin-to-manage-users-and-groups-in-databricks"></span><h2>Use OneLogin to manage entitlements and IAM roles<a class="headerlink" href="#use-onelogin-to-manage-entitlements-and-iam-roles" title="Permalink to this headline"> </a></h2>
<p>Databricks supports the assignment of IAM roles and workspace entitlements from workspace-level Databricks applications in OneLogin. The assignment of roles and entitlements is not supported from the account-level Databricks application in OneLogin. If you want to assign IAM roles and workspace entitlements from OneLogin, you must create a workspace-level Databricks application in OneLogin to that workspace.</p>
<p>Databricks recommends that you instead use an account-level Databricks application in OneLogin to provision users and groups to the account level. You assign users and groups to workspaces using <a class="reference internal" href="../index.html#enable-identity-federation"><span class="std std-ref">identity federation</span></a> and manage their entitlements and IAM roles within Databricks.</p>
<div class="section" id="map-databricks-attributes-to-onelogin-attributes">
<h3>Map Databricks attributes to OneLogin attributes<a class="headerlink" href="#map-databricks-attributes-to-onelogin-attributes" title="Permalink to this headline"> </a></h3>
<p>In order to manage IAM roles and entitlements from OneLogin, you must first create mappings to keep Databricks IAM roles and entitlements in sync with OneLogin fields for provisioned users.</p>
<ol class="arabic">
<li><p>In OneLogin, go to <strong>Users &gt; Custom User Fields</strong> and create two custom fields:</p>
<ul class="simple">
<li><p>One to hold a user’s <a class="reference internal" href="../../../security/auth-authz/access-control/cluster-acl.html#cluster-create-permission"><span class="std std-ref">allow-cluster-create permission</span></a>. In our example, we name this <code class="docutils literal notranslate"><span class="pre">databricksEntitlements</span></code>.</p></li>
<li><p>One to hold the user’s Databricks IAM role. In our example, we name this <code class="docutils literal notranslate"><span class="pre">IAM</span> <span class="pre">Role</span></code>.</p></li>
</ul>
<p>Once you have created these fields, you can specify the IAM role and <code class="docutils literal notranslate"><span class="pre">allow-cluster-create</span></code> entitlement for any user in the Custom Fields section of the OneLogin user record.</p>
</li>
<li><p>Return to your OneLogin SCIM provisioning app and go to the <strong>Parameters</strong> tab to map the Entitlement, Groups, and Role attributes (all optional).</p>
<p>Click the field name to open the edit dialog, where you can set the OneLogin field (Value) to map to the Databricks field.</p>
<ul class="simple">
<li><p><strong>Entitlement</strong>: set the <strong>Value</strong> to the custom user field you created in Step 1.</p></li>
<li><p><strong>Role</strong>: set the <strong>Value</strong> to the custom user field you created in Step 1.</p></li>
</ul>
</li>
<li><p>Click <strong>Save</strong>.</p></li>
</ol>
<p>Repeat this procedure to assign additional IAM roles or entitlements.</p>
</div>
<div class="section" id="assign-iam-roles-and-entitlements-to-databricks-workspace-users">
<h3>Assign IAM roles and entitlements to Databricks workspace users<a class="headerlink" href="#assign-iam-roles-and-entitlements-to-databricks-workspace-users" title="Permalink to this headline"> </a></h3>
<p>Once you have created your custom user fields and configured your attribute mapping, you can assign IAM roles and entitlements to Databricks users when you provision them.</p>
<p>When you enter a value for the entitlement and IAM role custom fields on the user record (<strong>Users &gt; All Users &gt; &lt;username&gt;</strong>), the entitlement and IAM role are automatically included when you provision the user to Databricks. You can also use OneLogin rules (mappings) to assign IAM roles and entitlements automatically, based on another OneLogin attribute, such as OneLogin Role.</p>
<p>You can remove or update IAM role or entitlement assignments by going to the <strong>Users</strong> tab in the OneLogin SCIM provisioning app and select the user to edit. Remove or override the current selection in the custom IAM role field, or custom entitlement field. If you have set up rules to assign IAM roles or entitlements to the user based on a OneLogin attribute, remove that attribute from the user. You can also change the rule that assigns the IAM role or entitlement to users in that OneLogin role.</p>
</div>
</div>
<div class="section" id="troubleshooting-and-tips">
<h2>Troubleshooting and tips<a class="headerlink" href="#troubleshooting-and-tips" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li><p>Users who existed in Databricks prior to provisioning setup:</p>
<ul>
<li><p>Are automatically linked to a OneLogin user if they already exist in OneLogin and are matched based on email address (username).</p></li>
<li><p>Can be manually linked to an existing user or created as a new user in OneLogin if they are not automatically matched.</p></li>
</ul>
</li>
<li><p>User permissions that are that are assigned individually and duplicated through membership in a group remain after the group membership is removed for the user.</p></li>
<li><p>Users removed from a Databricks workspace lose access to that workspace but may still have access to other Databricks workspaces.</p></li>
<li><p>You must create Databricks groups in Databricks; you cannot add groups using OneLogin.</p></li>
<li><p>You cannot update Databricks usernames and email addresses.</p></li>
</ul>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../../../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../../../_static/js/localized.js"></script>
  <script type="text/javascript" src="../../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../../../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>