

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to use the available compute system tables to monitor cluster changes and available node types." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Compute system tables reference">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Compute system tables reference &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/administration-guide/system-tables/compute.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/administration-guide/system-tables/compute.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/administration-guide/system-tables/compute.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="top" title="Databricks on AWS" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../../en/administration-guide/system-tables/compute.html" class="notranslate">English</option>
    <option value="../../../ja/administration-guide/system-tables/compute.html" class="notranslate">日本語</option>
    <option value="../../../pt/administration-guide/system-tables/compute.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Compute system tables reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="compute-system-tables-reference">
<h1>Compute system tables reference<a class="headerlink" href="#compute-system-tables-reference" title="Permalink to this headline"> </a></h1>
<div class="preview admonition">
<p class="admonition-title">Preview</p>
<p>This feature is in <a class="reference internal" href="../../release-notes/release-types.html"><span class="doc">Public Preview</span></a>.</p>
</div>
<p>This article provides you with an overview of the compute system tables, including the schemas and example queries. There are two cluster system tables available now: <code class="docutils literal notranslate"><span class="pre">clusters</span></code> and <code class="docutils literal notranslate"><span class="pre">node_types</span></code>.</p>
<div class="section" id="cluster-table-schema">
<h2>Cluster table schema<a class="headerlink" href="#cluster-table-schema" title="Permalink to this headline"> </a></h2>
<p>The cluster table is a slow-changing dimension table that contains the full history of cluster configurations over time for all-purpose and jobs clusters.</p>
<p>The clusters system table is located at <code class="docutils literal notranslate"><span class="pre">system.compute.clusters</span></code> and has the following schema:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 4%" />
<col style="width: 59%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column name</p></th>
<th class="head"><p>Data type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">account_id</span></code></p></td>
<td><p> string</p></td>
<td><p> ID of the account where this cluster was created.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">23e22ba4-87b9-4cc2-9770-d10b894b7118</span></code></p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">workspace_id</span></code></p></td>
<td><p> string</p></td>
<td><p> ID of the workspace where this cluster was created.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">1234567890123456</span></code></p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">cluster_id</span></code></p></td>
<td><p> string</p></td>
<td><p> ID of the cluster for which this record is associated.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">0000-123456-xxxxxxxx</span></code></p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">cluster_name</span></code></p></td>
<td><p> string</p></td>
<td><p> User defined name for the cluster.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">My</span> <span class="pre">cluster</span></code></p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">owned_by</span></code></p></td>
<td><p> string</p></td>
<td><p> Username of the cluster owner. Defaults to the cluster creator, but can be changed through the <a class="reference external" href="https://docs.databricks.com/api/workspace/clusters/changeowner">Clusters API</a>.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">sample_user&#64;email.com</span></code></p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">create_time</span></code></p></td>
<td><p> timestamp</p></td>
<td><p> Timestamp of the change to this compute definition.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">2023-01-09</span> <span class="pre">11:00:00.000</span></code></p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">delete_time</span></code></p></td>
<td><p> timestamp</p></td>
<td><p> Timestamp of when the cluster was deleted. The value is <code class="docutils literal notranslate"><span class="pre">null</span></code> if the cluster is not deleted.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">2023-01-09</span> <span class="pre">11:00:00.000</span></code></p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">driver_node_type</span></code></p></td>
<td><p> string</p></td>
<td><p> Driver node type name. This matches the instance type name from the cloud provider.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">i3.xlarge</span></code></p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">worker_node_type</span></code></p></td>
<td><p> string</p></td>
<td><p> Worker node type name. This matches the instance type name from the cloud provider.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">i3.xlarge</span></code></p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">worker_count</span></code></p></td>
<td><p> bigint</p></td>
<td><p> Number of workers. Defined for fixed-size clusters only.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">4</span></code></p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">min_autoscale_workers</span></code></p></td>
<td><p> bigint</p></td>
<td><p> The set minimum number of workers. This field is valid only for autoscaling clusters.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">max_autoscale_workers</span></code></p></td>
<td><p> bigint</p></td>
<td><p> The set maximum number of workers. This field is valid only for autoscaling clusters.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">auto_termination_minutes</span></code></p></td>
<td><p> bigint</p></td>
<td><p> The configured autotermination duration.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">120</span></code></p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">enable_elastic_disk</span></code></p></td>
<td><p> boolean</p></td>
<td><p> Autoscaling disk enablement status.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">tags</span></code></p></td>
<td><p> map</p></td>
<td><p> User-defined tags for the cluster (does not include default tags).</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">{&quot;ResourceClass&quot;:&quot;SingleNode&quot;}</span></code></p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">cluster_source</span></code></p></td>
<td><p> string</p></td>
<td><p> Indicates the creator for the cluster: <code class="docutils literal notranslate"><span class="pre">UI</span></code>, <code class="docutils literal notranslate"><span class="pre">API</span></code>, <code class="docutils literal notranslate"><span class="pre">DLT</span></code>, <code class="docutils literal notranslate"><span class="pre">JOB</span></code>, etc.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">UI</span></code></p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">init_scripts</span></code></p></td>
<td><p> array</p></td>
<td><p> Set of paths for init scripts.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">&quot;/Users/example&#64;email.com/files/scripts/install-python-pacakges.sh&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">aws_attributes</span></code></p></td>
<td><p> struct</p></td>
<td><p> AWS specific settings.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">{</span></code>&lt;br&gt;<code class="docutils literal notranslate"><span class="pre">&quot;ebs_volume_count&quot;:</span> <span class="pre">null</span></code>&lt;br&gt;<code class="docutils literal notranslate"><span class="pre">&quot;availability&quot;:</span> <span class="pre">&quot;SPOT_WITH_FALLBACK&quot;,</span></code>&lt;br&gt;<code class="docutils literal notranslate"><span class="pre">&quot;first_on_demand&quot;:</span> <span class="pre">&quot;0&quot;,</span></code>&lt;br&gt;<code class="docutils literal notranslate"><span class="pre">&quot;spot_bid_price_percent&quot;:</span> <span class="pre">&quot;100&quot;</span></code>&lt;br&gt;<code class="docutils literal notranslate"><span class="pre">}</span></code></p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">azure_attributes</span></code></p></td>
<td><p> struct</p></td>
<td><p> Azure specific settings.</p></td>
<td><p> empty</p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">gcp_attributes</span></code></p></td>
<td><p> struct</p></td>
<td><p> GCP specific settings. This field will be empty.</p></td>
<td><p> empty</p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">driver_instance_pool_id</span></code></p></td>
<td><p> string</p></td>
<td><p> Instance pool ID if the driver is configured on top of an instance pool.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">1107-555555-crhod16-pool-DIdnjazB</span></code></p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">worker_instance_pool_id</span></code></p></td>
<td><p> string</p></td>
<td><p> Instance Pool ID if the worker is configured on top of an instance pool.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">1107-555555-crhod16-pool-DIdnjazB</span></code></p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">dbr_version</span></code></p></td>
<td><p> string</p></td>
<td><p> The Databricks Runtime of the cluster.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">14.x-snapshot-scala2.12</span></code></p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">change_time</span></code></p></td>
<td><p> timestamp</p></td>
<td><p> Timestamp of change to the compute definition.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">2023-01-09</span> <span class="pre">11:00:00.000</span></code></p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">change_date</span></code></p></td>
<td><p> date</p></td>
<td><p> Change date. Used for retention.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">2023-01-09</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="node-types-table-schema">
<h2>Node types table schema<a class="headerlink" href="#node-types-table-schema" title="Permalink to this headline"> </a></h2>
<p>The node type table captures the currently available node types with their basic hardware information. The node type system table is located at <code class="docutils literal notranslate"><span class="pre">system.compute.node_types</span></code> and has the following schema:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 8%" />
<col style="width: 44%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column name</p></th>
<th class="head"><p>Data type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">account_id</span></code></p></td>
<td><p> string</p></td>
<td><p> ID of the account where this cluster was created.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">23e22ba4-87b9-4cc2-9770-d10b894b7118</span></code></p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">node_type_name</span></code></p></td>
<td><p> string</p></td>
<td><p> Unique identifier for node type.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">i3.xlarge</span></code></p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">core_count</span></code></p></td>
<td><p> double</p></td>
<td><p> Number of vCPUs for the instance.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">48.0</span></code></p></td>
</tr>
<tr class="row-odd"><td><p> <code class="docutils literal notranslate"><span class="pre">memory_mb</span></code></p></td>
<td><p> long</p></td>
<td><p> Total memory for the instance.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">393216</span></code></p></td>
</tr>
<tr class="row-even"><td><p> <code class="docutils literal notranslate"><span class="pre">gpu_count</span></code></p></td>
<td><p> long</p></td>
<td><p> Number of GPUs for the instance.</p></td>
<td><p> <code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="known-limitations">
<h2>Known limitations<a class="headerlink" href="#known-limitations" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li><p>Clusters that were marked deleted before October 23, 2023 do not appear in the clusters table. This might result in joins from the <code class="docutils literal notranslate"><span class="pre">system.billing.usage</span></code> table not matching cluster records in the clusters table. All active clusters have been backfilled.</p></li>
<li><p>The clusters table only includes records for all-purpose and jobs clusters. It does not contain Delta Live Tables clusters or SQL warehouses.</p></li>
</ul>
</div>
<div class="section" id="sample-queries">
<h2>Sample queries<a class="headerlink" href="#sample-queries" title="Permalink to this headline"> </a></h2>
<p>You can use the following sample queries to answer common questions about clusters:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cluster-usage"><span class="std std-ref">Join cluster records with billable usage records</span></a></p></li>
<li><p><a class="reference internal" href="#owner"><span class="std std-ref">Attribute costs for a cluster to the cluster owner</span></a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These examples join the cluster table with the <code class="docutils literal notranslate"><span class="pre">system.billing.usage</span></code> table. Since billing records are cross-regional and cluster records region-sepcific, billing records only match cluster records for the region in which you are querying. To see records from another region, please execute the query in that region.</p>
</div>
<div class="section" id="join-cluster-records-with-the-most-recent-billing-records">
<span id="cluster-usage"></span><h3>Join cluster records with the most recent billing records<a class="headerlink" href="#join-cluster-records-with-the-most-recent-billing-records" title="Permalink to this headline"> </a></h3>
<p>This query can help you understand spending over time. Once you update the <code class="docutils literal notranslate"><span class="pre">usage_start_time</span></code> to the most current billing period, it grabs the most recent updates to the billing records to join into clusters data.</p>
<p>Each record is associated with the cluster owner during that particular run. So, if the cluster owner changes, costs will roll up to the correct owner based on when the cluster was used.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
<span class="w">  </span><span class="n">u</span><span class="p">.</span><span class="n">record_id</span><span class="p">,</span>
<span class="w">  </span><span class="k">c</span><span class="p">.</span><span class="n">cluster_id</span><span class="p">,</span>
<span class="w">  </span><span class="k">c</span><span class="p">.</span><span class="n">owned_by</span><span class="p">,</span>
<span class="w">  </span><span class="k">c</span><span class="p">.</span><span class="n">change_time</span><span class="p">,</span>
<span class="w">  </span><span class="n">u</span><span class="p">.</span><span class="n">usage_start_time</span><span class="p">,</span>
<span class="w">  </span><span class="n">u</span><span class="p">.</span><span class="n">usage_quantity</span>
<span class="k">FROM</span>
<span class="w">  </span><span class="k">system</span><span class="p">.</span><span class="n">billing</span><span class="p">.</span><span class="k">usage</span><span class="w"> </span><span class="n">u</span>
<span class="w">  </span><span class="k">JOIN</span><span class="w"> </span><span class="k">system</span><span class="p">.</span><span class="n">compute</span><span class="p">.</span><span class="n">clusters</span><span class="w"> </span><span class="k">c</span>
<span class="w">  </span><span class="k">JOIN</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">record_id</span><span class="p">,</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">cluster_id</span><span class="p">,</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="k">c</span><span class="p">.</span><span class="n">change_time</span><span class="p">)</span><span class="w"> </span><span class="n">change_time</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="k">system</span><span class="p">.</span><span class="n">billing</span><span class="p">.</span><span class="k">usage</span><span class="w"> </span><span class="n">u</span>
<span class="w">    </span><span class="k">JOIN</span><span class="w"> </span><span class="k">system</span><span class="p">.</span><span class="n">compute</span><span class="p">.</span><span class="n">clusters</span><span class="w"> </span><span class="k">c</span>
<span class="w">    </span><span class="k">WHERE</span>
<span class="w">      </span><span class="n">u</span><span class="p">.</span><span class="n">usage_metadata</span><span class="p">.</span><span class="n">cluster_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span>
<span class="w">      </span><span class="k">and</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">usage_start_time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2023-01-01&#39;</span>
<span class="w">      </span><span class="k">and</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">usage_metadata</span><span class="p">.</span><span class="n">cluster_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">cluster_id</span>
<span class="w">      </span><span class="k">and</span><span class="w"> </span><span class="n">date_trunc</span><span class="p">(</span><span class="s1">&#39;HOUR&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">change_time</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">date_trunc</span><span class="p">(</span><span class="s1">&#39;HOUR&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">usage_start_time</span><span class="p">)</span>
<span class="w">    </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="k">all</span><span class="p">)</span><span class="w"> </span><span class="n">config</span>
<span class="k">WHERE</span>
<span class="w">  </span><span class="n">u</span><span class="p">.</span><span class="n">usage_metadata</span><span class="p">.</span><span class="n">cluster_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span>
<span class="w">  </span><span class="k">and</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">usage_start_time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2023-01-01&#39;</span>
<span class="w">  </span><span class="k">and</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">usage_metadata</span><span class="p">.</span><span class="n">cluster_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">cluster_id</span>
<span class="w">  </span><span class="k">and</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">record_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="n">record_id</span>
<span class="w">  </span><span class="k">and</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">cluster_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="n">cluster_id</span>
<span class="w">  </span><span class="k">and</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">change_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="n">change_time</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">cluster_id</span><span class="p">,</span><span class="w"> </span><span class="n">usage_start_time</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="attribute-costs-for-a-cluster-to-the-cluster-owner">
<span id="owner"></span><h3>Attribute costs for a cluster to the cluster owner<a class="headerlink" href="#attribute-costs-for-a-cluster-to-the-cluster-owner" title="Permalink to this headline"> </a></h3>
<p>If you are looking to reduce compute costs, you can use this query to find out which cluster owners in your account are using the most DBUs.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
<span class="w">  </span><span class="n">u</span><span class="p">.</span><span class="n">record_id</span><span class="w"> </span><span class="n">record_id</span><span class="p">,</span>
<span class="w">  </span><span class="k">c</span><span class="p">.</span><span class="n">cluster_id</span><span class="w"> </span><span class="n">cluster_id</span><span class="p">,</span>
<span class="w">  </span><span class="n">max_by</span><span class="p">(</span><span class="k">c</span><span class="p">.</span><span class="n">owned_by</span><span class="p">,</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">change_time</span><span class="p">)</span><span class="w"> </span><span class="n">owned_by</span><span class="p">,</span>
<span class="w">  </span><span class="k">max</span><span class="p">(</span><span class="k">c</span><span class="p">.</span><span class="n">change_time</span><span class="p">)</span><span class="w"> </span><span class="n">change_time</span><span class="p">,</span>
<span class="w">  </span><span class="n">any_value</span><span class="p">(</span><span class="n">u</span><span class="p">.</span><span class="n">usage_start_time</span><span class="p">)</span><span class="w"> </span><span class="n">usage_start_time</span><span class="p">,</span>
<span class="w">  </span><span class="n">any_value</span><span class="p">(</span><span class="n">u</span><span class="p">.</span><span class="n">usage_quantity</span><span class="p">)</span><span class="w"> </span><span class="n">usage_quantity</span>
<span class="k">FROM</span>
<span class="w">  </span><span class="k">system</span><span class="p">.</span><span class="n">billing</span><span class="p">.</span><span class="k">usage</span><span class="w"> </span><span class="n">u</span>
<span class="w">  </span><span class="k">JOIN</span><span class="w"> </span><span class="k">system</span><span class="p">.</span><span class="n">compute</span><span class="p">.</span><span class="n">clusters</span><span class="w"> </span><span class="k">c</span>
<span class="k">WHERE</span>
<span class="w">  </span><span class="n">u</span><span class="p">.</span><span class="n">usage_metadata</span><span class="p">.</span><span class="n">cluster_id</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span>
<span class="w">  </span><span class="k">and</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">usage_start_time</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2023-01-01&#39;</span>
<span class="w">  </span><span class="k">and</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">usage_metadata</span><span class="p">.</span><span class="n">cluster_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">cluster_id</span>
<span class="w">  </span><span class="k">and</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">change_time</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">u</span><span class="p">.</span><span class="n">usage_start_time</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">cluster_id</span><span class="p">,</span><span class="w"> </span><span class="n">usage_start_time</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../../_static/js/localized.js"></script>
  <script type="text/javascript" src="../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>