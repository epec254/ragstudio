

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to read tables from and write tables to Unity Catalog in your Delta Live Tables pipelines." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Use Unity Catalog with your Delta Live Tables pipelines">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Use Unity Catalog with your Delta Live Tables pipelines &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/delta-live-tables/unity-catalog.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/delta-live-tables/unity-catalog.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/delta-live-tables/unity-catalog.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="top" title="Databricks on AWS" href="../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../en/delta-live-tables/unity-catalog.html" class="notranslate">English</option>
    <option value="../../ja/delta-live-tables/unity-catalog.html" class="notranslate">日本語</option>
    <option value="../../pt/delta-live-tables/unity-catalog.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Use Unity Catalog with your Delta Live Tables pipelines</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="use-unity-catalog-with-your-delta-live-tables-pipelines">
<span id="use-uc-with-your-dlt-pipelines"></span><h1>Use Unity Catalog with your Delta Live Tables pipelines<a class="headerlink" href="#use-unity-catalog-with-your-delta-live-tables-pipelines" title="Permalink to this headline"> </a></h1>
<div class="preview admonition">
<p class="admonition-title">Preview</p>
<p>Delta Live Tables support for Unity Catalog is in <a class="reference internal" href="../release-notes/release-types.html"><span class="doc">Public Preview</span></a>.</p>
</div>
<p>In addition to the existing support for persisting tables to the <a class="reference internal" href="publish.html"><span class="doc">Hive metastore</span></a>, you can use <a class="reference internal" href="../data-governance/unity-catalog/index.html"><span class="doc">Unity Catalog</span></a> with your Delta Live Tables pipelines to:</p>
<ul class="simple">
<li><p>Define a catalog in Unity Catalog where your pipeline will persist tables.</p></li>
<li><p>Read data from Unity Catalog tables.</p></li>
</ul>
<p>Your workspace can contain pipelines that use Unity Catalog or the Hive metastore. However, a single pipeline cannot write to both the Hive metastore and Unity Catalog and existing pipelines cannot be upgraded to use Unity Catalog. Your existing pipelines that do not use Unity Catalog are not affected by this preview, and will continue to persist data to the Hive metastore using the configured storage location.</p>
<p>Unless specified otherwise in this document, all existing data sources and Delta Live Tables functionality are supported with pipelines that use Unity Catalog. Both the <a class="reference internal" href="python-ref.html"><span class="doc">Python</span></a> and <a class="reference internal" href="sql-ref.html"><span class="doc">SQL</span></a> interfaces are supported with pipelines that use Unity Catalog.</p>
<p>The tables created in your pipeline can also be queried from shared Unity Catalog clusters using Databricks Runtime 13.1 and above or a SQL warehouse. Tables cannot be queried from assigned or no isolation clusters.</p>
<p>To manage permissions on the tables created by a Unity Catalog pipeline, use <a class="reference internal" href="../data-governance/unity-catalog/manage-privileges/index.html"><span class="doc">GRANT and REVOKE</span></a>.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"> </a></h2>
<p>The following are required to create tables in Unity Catalog from a Delta Live Tables pipeline:</p>
<ul class="simple">
<li><p>You must have <code class="docutils literal notranslate"><span class="pre">USE</span> <span class="pre">CATALOG</span></code> privileges on the target catalog.</p></li>
<li><p>You must have <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">MATERIALIZED</span> <span class="pre">VIEW</span></code> and <code class="docutils literal notranslate"><span class="pre">USE</span> <span class="pre">SCHEMA</span></code> privileges in the target schema if your pipeline creates <a class="reference internal" href="index.html#dlt-datasets"><span class="std std-ref">materialized views</span></a>.</p></li>
<li><p>You must have <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> and <code class="docutils literal notranslate"><span class="pre">USE</span> <span class="pre">SCHEMA</span></code> privileges in the target schema if your pipeline creates <a class="reference internal" href="index.html#dlt-datasets"><span class="std std-ref">streaming tables</span></a>.</p></li>
<li><p>If a target schema is not specified in the pipeline settings, you must have <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">MATERIALIZED</span> <span class="pre">VIEW</span></code> or <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> privileges on at least one schema in the target catalog.</p></li>
</ul>
</div>
<div class="section" id="limitations">
<span id="uc-pipeline-limitations"></span><h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline"> </a></h2>
<p>The following are limitations when using Unity Catalog with Delta Live Tables:</p>
<ul class="simple">
<li><p>By default, only the pipeline owner and workspace admins have permission to view the driver logs from the cluster that runs a Unity Catalog-enabled pipeline. To enable access for other users to view the driver logs, see <a class="reference internal" href="settings.html#driver-log-permissions"><span class="std std-ref">Allow non-admin users to view the driver logs from a Unity Catalog-enabled pipeline</span></a>.</p></li>
<li><p>Existing pipelines that use the Hive metastore cannot be upgraded to use Unity Catalog. To migrate an existing pipeline that writes to Hive metastore, you must create a new pipeline and re-ingest data from the data source(s).</p></li>
</ul>
<ul class="simple">
<li><p>You cannot create a Unity Catalog-enabled pipeline in a workspace attached to a metastore created during the Unity Catalog public preview. See <a class="reference internal" href="../data-governance/unity-catalog/manage-privileges/upgrade-privilege-model.html"><span class="doc">Upgrade to privilege inheritance</span></a>.</p></li>
</ul>
<ul class="simple">
<li><p>Third-party libraries and JARs are not supported.</p></li>
<li><p>Data manipulation language (DML) queries that modify the schema of a streaming table are not supported.</p></li>
<li><p>A materialized view created in a Delta Live Tables pipeline cannot be used as a streaming source outside of that pipeline, for example, in another pipeline or in a downstream notebook.</p></li>
<li><p>You cannot change the owner of a pipeline that uses Unity Catalog.</p></li>
<li><p>Publishing to schemas that specify a managed storage location is supported only in the <a class="reference internal" href="../release-notes/delta-live-tables/index.html#runtime-channels"><span class="std std-ref">preview channel</span></a>.</p></li>
<li><p>If a pipeline publishes to a schema with a managed storage location, the schema can be changed in a subsequent update, but only if the updated schema uses the same storage location as the previously specified schema.</p></li>
<li><p>If the target schema specifies a storage location, all tables are stored there. If a schema storage location is not specified, tables are stored in the catalog storage location if the target catalog specifies one. If schema and catalog storage locations are not specified, tables are stored in the root storage location of the metastore where the tables are published.</p></li>
<li><p>The <strong>History</strong> tab in Catalog Explorer does not show history for streaming tables and materialized views.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">LOCATION</span></code> property is not supported when defining a table.</p></li>
<li><p>Unity Catalog-enabled pipelines cannot publish to the Hive metastore.</p></li>
</ul>
<ul class="simple">
<li><p>Python UDF support is in <a class="reference internal" href="../release-notes/release-types.html"><span class="doc">Public Preview</span></a>. To use Python UDFs, your pipeline must use the <a class="reference internal" href="properties.html#config-settings"><span class="std std-ref">preview channel</span></a>.</p></li>
</ul>
<ul class="simple">
<li><p>You cannot use <a class="reference internal" href="../data-sharing/index.html"><span class="doc">Delta Sharing</span></a> with a Delta Live Tables materialized view or streaming table published to Unity Catalog.</p></li>
<li><p>You cannot use the <code class="docutils literal notranslate"><span class="pre">event_log</span></code> <a class="reference internal" href="observability.html#event-log-with-uc"><span class="std std-ref">table valued function</span></a> in a pipeline or query to access the event logs of multiple pipelines.</p></li>
<li><p>You cannot share a view created over the <code class="docutils literal notranslate"><span class="pre">event_log</span></code> <a class="reference internal" href="observability.html#event-log-with-uc"><span class="std std-ref">table valued function</span></a> with other users.</p></li>
<li><p>Single-node clusters are not supported with Unity Catalog-enabled pipelines. Because Delta Live Tables might create a single-node cluster to run smaller pipelines, your pipeline might fail with an error message referencing <code class="docutils literal notranslate"><span class="pre">single-node</span> <span class="pre">mode</span></code>. If this occurs, make sure you specify at least one worker when you <a class="reference internal" href="settings.html#cluster-config"><span class="std std-ref">Configure your compute settings</span></a>.</p></li>
<li><p>Tables created in a Unity Catalog-enabled pipeline cannot be queried from assigned or no isolation clusters. To query tables created by a Delta Live Tables pipeline, you must use a shared cluster using Databricks Runtime 13.1 and above or a SQL warehouse.</p></li>
<li><p>Delta Live Tables uses a shared cluster to run a Unity Catalog-enabled pipeline. A Unity Catalog-enabled pipeline cannot run on a single user cluster.</p></li>
<li><p>You cannot use <a class="reference internal" href="../data-governance/unity-catalog/row-and-column-filters.html"><span class="doc">row filters or column masks</span></a> with materialized views or streaming tables published to Unity Catalog.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The underlying files supporting materialized views might include data from upstream tables (including possible personally identifiable information) that do not appear in the materialized view definition. This data is automatically added to the underlying storage to support incremental refreshing of materialized views.</p>
<p>Because the underlying files of a materialized view might risk exposing data from upstream tables not part of the materialized view schema, Databricks recommends not sharing the underlying storage with untrusted downstream consumers.</p>
<p>For example, suppose the definition of a materialized view includes a <code class="docutils literal notranslate"><span class="pre">COUNT(DISTINCT</span> <span class="pre">field_a)</span></code> clause. Even though the materialized view definition only includes the aggregate <code class="docutils literal notranslate"><span class="pre">COUNT</span> <span class="pre">DISTINCT</span></code> clause, the underlying files will contain a list of the actual values of <code class="docutils literal notranslate"><span class="pre">field_a</span></code>.</p>
</div>
</div>
<div class="section" id="changes-to-existing-functionality">
<h2>Changes to existing functionality<a class="headerlink" href="#changes-to-existing-functionality" title="Permalink to this headline"> </a></h2>
<p>When Delta Live Tables is configured to persist data to Unity Catalog, the lifecycle of the table is managed by the Delta Live Tables pipeline. Because the pipeline manages the table lifecycle and permissions:</p>
<ul class="simple">
<li><p>When a table is removed from the Delta Live Tables pipeline definition, the corresponding materialized view or streaming table entry is removed from Unity Catalog on the next pipeline update. The actual data is retained for a period of time so that it can be recovered if it was deleted by mistake. The data can be recovered by adding the materialized view or streaming table back into the pipeline definition.</p></li>
<li><p>Deleting the Delta Live Tables pipeline results in deletion of all tables defined in that pipeline. Because of this change, the Delta Live Tables UI is updated to prompt you to confirm deletion of a pipeline.</p></li>
<li><p>Internal backing tables, including backing tables used to support <code class="docutils literal notranslate"><span class="pre">APPLY</span> <span class="pre">CHANGES</span> <span class="pre">INTO</span></code>, are not directly accessible by users.</p></li>
</ul>
</div>
<div class="section" id="write-tables-to-unity-catalog-from-a-delta-live-tables-pipeline">
<span id="write-tables-to-uc-from-a-dlt-pipeline"></span><span id="write-to-uc"></span><h2>Write tables to Unity Catalog from a Delta Live Tables pipeline<a class="headerlink" href="#write-tables-to-unity-catalog-from-a-delta-live-tables-pipeline" title="Permalink to this headline"> </a></h2>
<p>To write your tables to Unity Catalog, when you <a class="reference internal" href="tutorial-pipelines.html#create-pipeline"><span class="std std-ref">create a pipeline</span></a>, select <strong>Unity Catalog</strong> under <strong>Storage options</strong>, select a catalog in the <strong>Catalog</strong> drop-down menu, and select a database name in the <strong>Target schema</strong> drop-down menu. To learn about Unity Catalog catalogs, see <a class="reference internal" href="../data-governance/unity-catalog/index.html#catalog"><span class="std std-ref">Catalogs</span></a>. To learn about schemas in Unity Catalog,see <a class="reference internal" href="../data-governance/unity-catalog/index.html#schema"><span class="std std-ref">Schemas</span></a>.</p>
</div>
<div class="section" id="ingest-data-into-a-unity-catalog-pipeline">
<span id="ingest-data-into-a-uc-pipeline"></span><span id="ingest-data"></span><h2>Ingest data into a Unity Catalog pipeline<a class="headerlink" href="#ingest-data-into-a-unity-catalog-pipeline" title="Permalink to this headline"> </a></h2>
<p>Your pipeline configured to use Unity Catalog can read data from:</p>
<ul class="simple">
<li><p>Unity Catalog managed and external tables, views, materialized views and streaming tables.</p></li>
<li><p>Hive metastore tables and views.</p></li>
<li><p>Auto Loader using the <code class="docutils literal notranslate"><span class="pre">cloud_files()</span></code> function to read from Unity Catalog external locations.</p></li>
<li><p>Apache Kafka and Amazon Kinesis.</p></li>
</ul>
<p>The following are examples of reading from Unity Catalog and Hive metastore tables.</p>
<div class="section" id="batch-ingestion-from-a-unity-catalog-table">
<span id="batch-ingestion-from-a-uc-table"></span><h3>Batch ingestion from a Unity Catalog table<a class="headerlink" href="#batch-ingestion-from-a-unity-catalog-table" title="Permalink to this headline"> </a></h3>
<div class="js-code-language-tabs js-code-language-tabs--literal compound">
<div class="compound-first highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">REFRESH</span><span class="w"> </span><span class="n">LIVE</span><span class="w"> </span><span class="k">TABLE</span>
<span class="w">  </span><span class="k">table_name</span>
<span class="k">AS</span><span class="w"> </span><span class="k">SELECT</span>
<span class="w">  </span><span class="o">*</span>
<span class="k">FROM</span>
<span class="w">  </span><span class="n">my_catalog</span><span class="p">.</span><span class="n">my_schema</span><span class="p">.</span><span class="n">table1</span><span class="p">;</span>
</pre></div>
</div>
<div class="compound-last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dlt</span><span class="o">.</span><span class="n">table</span>
<span class="k">def</span> <span class="nf">table_name</span><span class="p">():</span>
  <span class="k">return</span> <span class="n">spark</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s2">&quot;my_catalog.my_schema.table&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="stream-changes-from-a-unity-catalog-table">
<span id="stream-changes-from-a-uc-table"></span><h3>Stream changes from a Unity Catalog table<a class="headerlink" href="#stream-changes-from-a-unity-catalog-table" title="Permalink to this headline"> </a></h3>
<div class="js-code-language-tabs js-code-language-tabs--literal compound">
<div class="compound-first highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">REFRESH</span><span class="w"> </span><span class="n">STREAMING</span><span class="w"> </span><span class="k">TABLE</span>
<span class="w">  </span><span class="k">table_name</span>
<span class="k">AS</span><span class="w"> </span><span class="k">SELECT</span>
<span class="w">  </span><span class="o">*</span>
<span class="k">FROM</span>
<span class="w">  </span><span class="n">STREAM</span><span class="p">(</span><span class="n">my_catalog</span><span class="p">.</span><span class="n">my_schema</span><span class="p">.</span><span class="n">table1</span><span class="p">);</span>
</pre></div>
</div>
<div class="compound-last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dlt</span><span class="o">.</span><span class="n">table</span>
<span class="k">def</span> <span class="nf">table_name</span><span class="p">():</span>
  <span class="k">return</span> <span class="n">spark</span><span class="o">.</span><span class="n">readStream</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s2">&quot;my_catalog.my_schema.table&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ingest-data-from-hive-metastore">
<span id="ingest-data-from-hms"></span><h3>Ingest data from Hive metastore<a class="headerlink" href="#ingest-data-from-hive-metastore" title="Permalink to this headline"> </a></h3>
<p>A pipeline that uses Unity Catalog can read data from Hive metastore tables using the <code class="docutils literal notranslate"><span class="pre">hive_metastore</span></code> catalog:</p>
<div class="js-code-language-tabs js-code-language-tabs--literal compound">
<div class="compound-first highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">REFRESH</span><span class="w"> </span><span class="n">LIVE</span><span class="w"> </span><span class="k">TABLE</span>
<span class="w">  </span><span class="k">table_name</span>
<span class="k">AS</span><span class="w"> </span><span class="k">SELECT</span>
<span class="w">  </span><span class="o">*</span>
<span class="k">FROM</span>
<span class="w">  </span><span class="n">hive_metastore</span><span class="p">.</span><span class="n">some_schema</span><span class="p">.</span><span class="k">table</span><span class="p">;</span>
</pre></div>
</div>
<div class="compound-last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dlt</span><span class="o">.</span><span class="n">table</span>
<span class="k">def</span> <span class="nf">table3</span><span class="p">():</span>
  <span class="k">return</span> <span class="n">spark</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="s2">&quot;hive_metastore.some_schema.table&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ingest-data-from-auto-loader">
<span id="ingest-data-from-al"></span><h3>Ingest data from Auto Loader<a class="headerlink" href="#ingest-data-from-auto-loader" title="Permalink to this headline"> </a></h3>
<div class="js-code-language-tabs js-code-language-tabs--literal compound">
<div class="compound-first highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">REFRESH</span><span class="w"> </span><span class="n">STREAMING</span><span class="w"> </span><span class="k">TABLE</span>
<span class="w">  </span><span class="k">table_name</span>
<span class="k">AS</span><span class="w"> </span><span class="k">SELECT</span>
<span class="w">  </span><span class="o">*</span>
<span class="k">FROM</span>
<span class="w">  </span><span class="n">cloud_files</span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="k">to</span><span class="o">-</span><span class="n">uc</span><span class="o">-</span><span class="k">external</span><span class="o">-</span><span class="k">location</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="ss">&quot;json&quot;</span>
<span class="w">  </span><span class="p">)</span>
</pre></div>
</div>
<div class="compound-last highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dlt</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">table_properties</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;quality&quot;</span><span class="p">:</span> <span class="s2">&quot;bronze&quot;</span><span class="p">})</span>
<span class="k">def</span> <span class="nf">table_name</span><span class="p">():</span>
  <span class="k">return</span> <span class="p">(</span>
     <span class="n">spark</span><span class="o">.</span><span class="n">readStream</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;cloudFiles&quot;</span><span class="p">)</span>
     <span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s2">&quot;cloudFiles.format&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">)</span>
     <span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path_to_uc_external_location</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
 <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="share-materialized-views-live-tables">
<h2>Share materialized views (live tables)<a class="headerlink" href="#share-materialized-views-live-tables" title="Permalink to this headline"> </a></h2>
<p>By default, the tables created by a pipeline can be queried only by the pipeline owner. You can give other users the ability to query a table by using <a class="reference internal" href="../sql/language-manual/security-grant.html"><span class="doc">GRANT</span></a> statements and you can revoke query access using <a class="reference internal" href="../sql/language-manual/security-revoke.html"><span class="doc">REVOKE</span></a> statements. For more information about privileges in Unity Catalog, see <a class="reference internal" href="../data-governance/unity-catalog/manage-privileges/index.html"><span class="doc">Manage privileges in Unity Catalog</span></a>.</p>
<div class="section" id="grant-select-on-a-table">
<h3>Grant select on a table<a class="headerlink" href="#grant-select-on-a-table" title="Permalink to this headline"> </a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span>
<span class="w">  </span><span class="n">my_catalog</span><span class="p">.</span><span class="n">my_schema</span><span class="p">.</span><span class="n">live_table</span>
<span class="k">TO</span>
<span class="w">  </span><span class="o">`</span><span class="k">user</span><span class="o">@</span><span class="n">databricks</span><span class="p">.</span><span class="n">com</span><span class="o">`</span>
</pre></div>
</div>
</div>
<div class="section" id="revoke-select-on-a-table">
<h3>Revoke select on a table<a class="headerlink" href="#revoke-select-on-a-table" title="Permalink to this headline"> </a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">REVOKE</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span>
<span class="w">  </span><span class="n">my_catalog</span><span class="p">.</span><span class="n">my_schema</span><span class="p">.</span><span class="n">live_table</span>
<span class="k">FROM</span>
<span class="w">  </span><span class="o">`</span><span class="k">user</span><span class="o">@</span><span class="n">databricks</span><span class="p">.</span><span class="n">com</span><span class="o">`</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="grant-create-table-or-create-materialized-view-privileges">
<h2>Grant create table or create materialized view privileges<a class="headerlink" href="#grant-create-table-or-create-materialized-view-privileges" title="Permalink to this headline"> </a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">GRANT</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="err">}</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">SCHEMA</span>
<span class="w">  </span><span class="n">my_catalog</span><span class="p">.</span><span class="n">my_schema</span>
<span class="k">TO</span>
<span class="w">  </span><span class="err">{</span><span class="w"> </span><span class="n">principal</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="err">}</span>
</pre></div>
</div>
</div>
<div class="section" id="view-lineage-for-a-pipeline">
<span id="grant-create-table-or-create-materialized-view-privileges"></span><h2>View lineage for a pipeline<a class="headerlink" href="#view-lineage-for-a-pipeline" title="Permalink to this headline"> </a></h2>
<p>Lineage for tables in a Delta Live Tables pipeline is visible in Catalog Explorer. For materialized views or streaming tables in a Unity Catalog-enabled pipeline, the Catalog Explorer lineage UI shows the upstream and downstream tables. Lineage is only displayed between tables defined in the pipeline; tables that are defined outside of the pipeline and read in the pipeline are not shown in the Catalog Explorer lineage UI. To learn more about Unity Catalog lineage, see <a class="reference internal" href="../data-governance/unity-catalog/data-lineage.html"><span class="doc">Capture and view data lineage with Unity Catalog</span></a>.</p>
<p>For a materialized view or streaming table in a Unity Catalog-enabled Delta Live Tables pipeline, the Catalog Explorer lineage UI will also link to the pipeline that produced the materialized view or streaming table if the pipeline is accessible from the current workspace.</p>
</div>
<div class="section" id="add-change-or-delete-data-in-a-streaming-table">
<span id="add-change-or-delete-data-in-a-st"></span><span id="streaming-tables-dml-statements"></span><h2>Add, change, or delete data in a streaming table<a class="headerlink" href="#add-change-or-delete-data-in-a-streaming-table" title="Permalink to this headline"> </a></h2>
<p>You can use <a class="reference internal" href="../sql/language-manual/index.html#dml-statements"><span class="std std-ref">data manipulation language</span></a> (DML) statements, including insert, update, delete, and merge statements, to modify streaming tables published to Unity Catalog. Support for DML queries against streaming tables enables use cases such as updating tables for General Data Protection Regulation (GDPR) compliance.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>DML statements that modify the table schema of a streaming table are not supported. Ensure that your DML statements do not attempt to evolve the table schema.</p></li>
<li><p>DML statements that update a streaming table can be run only in a shared Unity Catalog cluster or a SQL warehouse using Databricks Runtime 13.1 and above.</p></li>
<li><p>Because streaming requires append-only data sources, if your processing requires streaming from a source streaming table with changes (for example, by DML statements), set the <a class="reference internal" href="python-ref.html#ignore-changes"><span class="std std-ref">skipChangeCommits flag</span></a> when reading the source streaming table. When <code class="docutils literal notranslate"><span class="pre">skipChangeCommits</span></code> is set, transactions that delete or modify records on the source table are ignored. If your processing does not require a streaming table, you can use a materialized view (which does not have the append-only restriction) as the target table.</p></li>
</ul>
</div>
<p>The following are examples of DML statements to modify records in a streaming table.</p>
<div class="section" id="delete-records-with-a-specific-id">
<h3>Delete records with a specific ID:<a class="headerlink" href="#delete-records-with-a-specific-id" title="Permalink to this headline"> </a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">my_streaming_table</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="update-records-with-a-specific-id">
<h3>Update records with a specific ID:<a class="headerlink" href="#update-records-with-a-specific-id" title="Permalink to this headline"> </a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">UPDATE</span><span class="w"> </span><span class="n">my_streaming_table</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Jane Doe&#39;</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../_static/js/localized.js"></script>
  <script type="text/javascript" src="../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>