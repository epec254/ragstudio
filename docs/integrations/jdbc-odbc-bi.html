

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to get started with the Databricks ODBC and JDBC drivers and connect to Databricks." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="Configure the Databricks ODBC and JDBC drivers">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>Configure the Databricks ODBC and JDBC drivers &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/integrations/jdbc-odbc-bi.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/integrations/jdbc-odbc-bi.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/integrations/jdbc-odbc-bi.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="top" title="Databricks on AWS" href="../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../en/integrations/jdbc-odbc-bi.html" class="notranslate">English</option>
    <option value="../../ja/integrations/jdbc-odbc-bi.html" class="notranslate">日本語</option>
    <option value="../../pt/integrations/jdbc-odbc-bi.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Configure the Databricks ODBC and JDBC drivers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="configure-the-databricks-odbc-and-jdbc-drivers">
<span id="configure-the-dbrodbcjdbcdrivers"></span><h1>Configure the Databricks ODBC and JDBC drivers<a class="headerlink" href="#configure-the-databricks-odbc-and-jdbc-drivers" title="Permalink to this headline"> </a></h1>
<p>This article describes how to configure the <a class="reference internal" href="#odbc"><span class="std std-ref">Databricks ODBC driver</span></a> and <a class="reference internal" href="#jdbc"><span class="std std-ref">Databricks JDBC driver</span></a> to connect your tools or clients to Databricks. For tool or client specific connection instructions, see <a class="reference internal" href="index.html"><span class="doc">Technology partners</span></a> or your tool’s or client’s documentation.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"> </a></h2>
<p>Before you start, you need to make sure you have the appropriate permissions to connect to Databricks, to prepare your credentials and to retrieve the connection details.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#permission"><span class="std std-ref">Permission requirements</span></a></p></li>
<li><p><a class="reference internal" href="#authentication"><span class="std std-ref">Authentication requirements</span></a></p></li>
<li><p><a class="reference internal" href="#get-server-hostname-port-http-path-and-jdbc-url"><span class="std std-ref">Retrieve the connection details</span></a></p></li>
</ul>
<div class="section" id="permission-requirements">
<span id="permission"></span><h3>Permission requirements<a class="headerlink" href="#permission-requirements" title="Permalink to this headline"> </a></h3>
<p>There are two <a class="reference internal" href="../security/auth-authz/access-control/cluster-acl.html"><span class="doc">permissions</span></a> you may need when you connect to a Databricks <a class="reference internal" href="../compute/index.html"><span class="doc">cluster</span></a>:</p>
<ul class="simple">
<li><p><strong>Can Attach To</strong> permission to connect to the running cluster.</p></li>
<li><p><strong>Can Restart</strong> permission to automatically trigger the cluster to start if its state is terminated when connecting.</p></li>
</ul>
<p>To access a Databricks SQL <a class="reference internal" href="../compute/sql-warehouse/create-sql-warehouse.html"><span class="doc">warehouse</span></a>, you need <strong>Can Use</strong> <a class="reference internal" href="../security/auth-authz/access-control/sql-endpoint-acl.html"><span class="doc">permission</span></a>. The Databricks SQL warehouse automatically starts if it was stopped. Databricks SQL warehouses are recommended when using Power BI in <strong>DirectQuery</strong> mode.</p>
</div>
<div class="section" id="authentication-requirements">
<span id="authentication"></span><h3>Authentication requirements<a class="headerlink" href="#authentication-requirements" title="Permalink to this headline"> </a></h3>
<p>The Databricks ODBC and JDBC drivers support authentication using any of the following authentication types.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#authentication-pat"><span class="std std-ref">Databricks personal access token</span></a></p></li>
<li><p><a class="reference internal" href="#authentication-username-password"><span class="std std-ref">Databricks username and password</span></a></p></li>
<li><p><a class="reference internal" href="#authentication-pass-through"><span class="std std-ref">OAuth 2.0 tokens</span></a></p></li>
<li><p><a class="reference internal" href="#authentication-u2m"><span class="std std-ref">OAuth user-to-machine (U2M) authentication</span></a></p></li>
<li><p><a class="reference internal" href="#authentication-m2m"><span class="std std-ref">OAuth machine-to-machine (M2M) authentication</span></a></p></li>
</ul>
<div class="section" id="databricks-personal-access-token">
<span id="authentication-pat"></span><h4>Databricks personal access token<a class="headerlink" href="#databricks-personal-access-token" title="Permalink to this headline"> </a></h4>
<p>To create a Databricks personal access token, do the following:</p>
<ol class="arabic simple">
<li><p>In your Databricks workspace, click your Databricks username in the top bar, and then select <strong>User Settings</strong> from the drop down.</p></li>
<li><p>Click <strong>Developer</strong>.</p></li>
<li><p>Next to <strong>Access tokens</strong>, click <strong>Manage</strong>.</p></li>
<li><p>Click <strong>Generate new token</strong>.</p></li>
<li><p>(Optional) Enter a comment that helps you to identify this token in the future, and change the token’s default lifetime of 90 days. To create a token with no lifetime (not recommended), leave the <strong>Lifetime (days)</strong> box empty (blank).</p></li>
<li><p>Click <strong>Generate</strong>.</p></li>
<li><p>Copy the displayed token to a secure location, and then click <strong>Done</strong>.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be sure to save the copied token in a secure location. Do not share your copied token with others. If you lose the copied token, you cannot regenerate that exact same token. Instead, you must repeat this procedure to create a new token. If you lose the copied token, or you believe that the token has been compromised, Databricks strongly recommends that you immediately delete that token from your workspace by clicking the trash can (<strong>Revoke</strong>) icon next to the token on the <strong>Access tokens</strong> page.</p>
<p>If you are not able to create or use tokens in your workspace, this might be because your workspace administrator has disabled tokens or has not given you permission to create or use tokens. See your workspace administrator or the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../administration-guide/access-control/tokens.html#enable-tokens"><span class="std std-ref">Enable or disable personal access token authentication for the workspace</span></a></p></li>
<li><p><a class="reference internal" href="../security/auth-authz/api-access-permissions.html#pat"><span class="std std-ref">Personal access token permissions</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="databricks-username-and-password">
<span id="authentication-username-password"></span><h4>Databricks username and password<a class="headerlink" href="#databricks-username-and-password" title="Permalink to this headline"> </a></h4>
<p>Databricks username and password authentication is also known as Databricks <em>basic</em> authentication.</p>
<p>Username and password authentication is possible only if <a class="reference internal" href="../administration-guide/users-groups/single-sign-on/index.html"><span class="doc">single sign-on</span></a> is disabled.</p>
</div>
<div class="section" id="oauth-20-tokens">
<span id="authentication-pass-through"></span><h4>OAuth 2.0 tokens<a class="headerlink" href="#oauth-20-tokens" title="Permalink to this headline"> </a></h4>
<p>ODBC driver 2.7.5 and above and JDBC driver 2.6.36 and above support an OAuth 2.0 token for a Databricks user or service principal. This is also known as OAuth 2.0 <em>token pass-through</em> authentication.</p>
<p>To create an OAuth 2.0 token for token pass-through authentication, do the following:</p>
<ul class="simple">
<li><p>For a user, you can use the <a class="reference internal" href="../dev-tools/cli/install.html"><span class="doc">Databricks CLI</span></a> to generate the OAuth 2.0 token by initiating the OAuth U2M process, and then get the generated OAuth 2.0 token by running the <code class="docutils literal notranslate"><span class="pre">databricks</span> <span class="pre">auth</span> <span class="pre">token</span></code> command. See <a class="reference internal" href="../dev-tools/cli/authentication.html#u2m-auth"><span class="std std-ref">OAuth user-to-machine (U2M) authentication</span></a>. OAuth 2.0 tokens have a default lifetime of 1 hour. To generate a new OAuth 2.0 token, repeat this process.</p></li>
<li><p>For a service principal, follow Steps 1-3 in <a class="reference internal" href="../dev-tools/authentication-oauth.html"><span class="doc">Authentication using OAuth for service principals</span></a>. Make a note of the service principal’s OAuth <code class="docutils literal notranslate"><span class="pre">access_token</span></code> value.  OAuth 2.0 tokens have a default lifetime of 1 hour. To generate a new OAuth 2.0 token, repeat this process.</p></li>
</ul>
</div>
<div class="section" id="oauth-user-to-machine-u2m-authentication">
<span id="authentication-u2m"></span><h4>OAuth user-to-machine (U2M) authentication<a class="headerlink" href="#oauth-user-to-machine-u2m-authentication" title="Permalink to this headline"> </a></h4>
<p>ODBC driver 2.7.5 and above and JDBC driver 2.6.36 and above support OAuth user-to-machine (U2M) authentication for a Databricks user. This is also known as OAuth 2.0 <em>browser-based</em> authentication.</p>
<p>OAuth U2M or OAuth 2.0 browser-based authentication has no prerequisites. OAuth 2.0 tokens have a default lifetime of 1 hour. OAuth U2M or OAuth 2.0 browser-based authentication should refresh expired OAuth 2.0 tokens for you automatically.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OAuth U2M or OAuth 2.0 browser-based authentication works only with applications that run locally. It does not work with server-based or cloud-based applications.</p>
</div>
</div>
<div class="section" id="oauth-machine-to-machine-m2m-authentication">
<span id="authentication-m2m"></span><h4>OAuth machine-to-machine (M2M) authentication<a class="headerlink" href="#oauth-machine-to-machine-m2m-authentication" title="Permalink to this headline"> </a></h4>
<p>ODBC driver 2.7.5 and above and JDBC driver 2.6.36 and above support OAuth machine-to-machine (M2M) authentication for a Databricks service principal. This is also known as OAuth 2.0 <em>client credentials</em> authentication.</p>
<p>To configure OAuth M2M or OAuth 2.0 client credentials authentication, do the following:</p>
<ol class="arabic">
<li><p>Create a Databricks service principal in your Databricks workspace, and create an OAuth secret for that service principal.</p>
<p>   To create the service principal and its OAuth secret, follow Steps 1-2 in <a class="reference internal" href="../dev-tools/authentication-oauth.html"><span class="doc">Authentication using OAuth for service principals</span></a>. Make a note of the service principal’s <strong>UUID</strong> or <strong>Application ID</strong> value, and the <strong>Secret</strong> value for the service principal’s OAuth secret.</p>
<ol class="arabic simple">
<li><p>Give the service principal access to your cluster or warehouse. See <a class="reference internal" href="../security/auth-authz/access-control/cluster-acl.html#cluster-level-permissions"><span class="std std-ref">Cluster permissions</span></a> or <a class="reference internal" href="../security/auth-authz/access-control/sql-endpoint-acl.html"><span class="doc">SQL warehouse access control</span></a>.</p></li>
</ol>
</li>
</ol>
</div>
</div>
<div class="section" id="retrieve-the-connection-details">
<span id="get-server-hostname-port-http-path-and-jdbc-url"></span><h3>Retrieve the connection details<a class="headerlink" href="#retrieve-the-connection-details" title="Permalink to this headline"> </a></h3>
<p>This section explains how to retrieve the connection details that you need to connect to Databricks.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#connection-details-cluster"><span class="std std-ref">Get connection details for a cluster</span></a></p></li>
<li><p><a class="reference internal" href="#sql"><span class="std std-ref">Get connection details for a SQL warehouse</span></a></p></li>
</ul>
<div class="section" id="get-connection-details-for-a-cluster">
<span id="connection-details-cluster"></span><h4>Get connection details for a cluster<a class="headerlink" href="#get-connection-details-for-a-cluster" title="Permalink to this headline"> </a></h4>
<p>To establish connections to many external data sources, developer tools, or technology partners, you must provide connection details for your cluster. To retrieve connection details, do the following:</p>
<ol class="arabic simple">
<li><p>Log in to your Databricks workspace.</p></li>
<li><p>In the sidebar, click <strong>Compute</strong>.</p></li>
<li><p>Choose a cluster to connect to.</p></li>
<li><p>On the <strong>Configuration</strong> tab, expand <strong>Advanced Options</strong>.</p></li>
<li><p>Click the <strong>JDBC/ODBC</strong> tab.</p></li>
<li><p>Copy the connection details.</p></li>
</ol>
</div>
<div class="section" id="get-connection-details-for-a-sql-warehouse">
<span id="sql"></span><span id="connection-details-sql-warehouse"></span><span id="connection-details-sql-endpoint"></span><h4>Get connection details for a SQL warehouse<a class="headerlink" href="#get-connection-details-for-a-sql-warehouse" title="Permalink to this headline"> </a></h4>
<p>To establish connections to many external data sources, developer tools, or technology partners, you must provide connection details for your SQL warehouse. To retrieve connection details, do the following:</p>
<ol class="arabic">
<li><p>Log in to your Databricks workspace.</p></li>
<li><p>In the sidebar, click <strong>SQL &gt; SQL Warehouses</strong>.</p></li>
<li><p>Choose a warehouse to connect to.</p></li>
<li><p>On the <strong>Connection Details</strong> tab, copy the connection details.</p>
<p>Alternatively, you can click the icon for one of the displayed technology partners or developer tools and follow the onscreen steps to connect using your SQL warehouse’s connection details.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="section" id="odbc-driver">
<span id="odbc"></span><h2>ODBC driver<a class="headerlink" href="#odbc-driver" title="Permalink to this headline"> </a></h2>
<p>This section presents the steps to configure your ODBC driver to connect to Databricks.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#download-the-odbc-driver"><span class="std std-ref">Download the ODBC driver</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-parameters"><span class="std std-ref">ODBC configuration and connection parameters</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-dsn-examples"><span class="std std-ref">DSN examples for non-Windows machines</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-driver-capabilities"><span class="std std-ref">ODBC driver capabilities</span></a></p></li>
<li><p><a class="reference internal" href="#driver-guide-odbc"><span class="std std-ref">ODBC driver guide</span></a></p></li>
</ul>
<div class="section" id="download-the-odbc-driver">
<h3>Download the ODBC driver<a class="headerlink" href="#download-the-odbc-driver" title="Permalink to this headline"> </a></h3>
<p>Review the license agreement for the <a class="reference external" href="https://databricks.com/jdbc-odbc-driver-license">Databricks ODBC driver</a> before installing the software.</p>
<p>Some tools and clients require you to install the Databricks ODBC driver to set up a connection to Databricks, while others embed the driver and do not require separate installation. For example, to use Tableau Desktop, the ODBC driver needs to be installed, while recent Power BI Desktop releases include the driver preinstalled and no action is needed.</p>
<p>Go to the <a class="reference external" href="https://databricks.com/spark/odbc-drivers-download">Databricks ODBC driver</a> download page to download the driver for your operating system.</p>
<p>After you download the appropriate installer of the driver for your platform, use the following instructions to install and configure the driver:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#odbc-windows"><span class="std std-ref">Install and configure the ODBC driver for Windows</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-mac"><span class="std std-ref">Install and configure the ODBC driver for Mac</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-linux"><span class="std std-ref">Install and configure the ODBC driver for Linux</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-parameters"><span class="std std-ref">ODBC configuration and connection parameters</span></a></p></li>
</ul>
</div>
<div class="section" id="install-and-configure-the-odbc-driver-for-windows">
<span id="odbc-windows"></span><h3>Install and configure the ODBC driver for Windows<a class="headerlink" href="#install-and-configure-the-odbc-driver-for-windows" title="Permalink to this headline"> </a></h3>
<p>In Windows, you can set up a Data Source Name (DSN) configuration to connect your ODBC client application to Databricks. To set up a DSN configuration, use the Windows <a class="reference external" href="https://learn.microsoft.com/sql/database-engine/configure-windows/open-the-odbc-data-source-administrator">ODBC Data Source Administrator</a>.</p>
<ol class="arabic simple">
<li><p>Download the latest driver version for Windows, if you haven’t already done so. See <a class="reference internal" href="#download-the-odbc-driver"><span class="std std-ref">Download the ODBC driver</span></a>.</p></li>
<li><p>Double-click on the dowloaded <code class="docutils literal notranslate"><span class="pre">.msi</span></code> file to install the driver. The installation directory is <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\Simba</span> <span class="pre">Spark</span> <span class="pre">ODBC</span> <span class="pre">Driver</span></code>.</p></li>
<li><p>From the Start menu, search for <strong>ODBC Data Sources</strong> to launch the <strong>ODBC Data Source Administrator</strong>.</p></li>
<li><p>Navigate to the <strong>Drivers</strong> tab to verify that the driver (Simba Spark ODBC Driver) is installed.</p></li>
<li><p>Go to the <strong>User DSN</strong> or <strong>System DSN</strong> tab and click the <strong>Add</strong> button.</p></li>
<li><p>Select the <strong>Simba Spark ODBC Driver</strong> from the list of installed drivers.</p></li>
<li><p>Choose a Data Source Name and set the mandatory <a class="reference internal" href="#odbc-parameters"><span class="std std-ref">ODBC configuration and connection parameters</span></a>. See also <a class="reference internal" href="#odbc-driver-capabilities"><span class="std std-ref">ODBC driver capabilities</span></a> for more driver configurations.</p></li>
<li><p>Click <strong>OK</strong> to create the DSN.</p></li>
</ol>
</div>
<div class="section" id="install-and-configure-the-odbc-driver-for-macos">
<span id="odbc-mac"></span><h3>Install and configure the ODBC driver for macOS<a class="headerlink" href="#install-and-configure-the-odbc-driver-for-macos" title="Permalink to this headline"> </a></h3>
<p>In macOS, you can set up a Data Source Name (DSN) configuration to connect your ODBC client application to Databricks. To set up a DSN on macOS, use the <a class="reference external" href="http://www.odbcmanager.net">ODBC Manager</a>.</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://formulae.brew.sh/cask/odbc-manager">Install ODBC Manager by using Homebrew</a>, or <a class="reference external" href="http://www.odbcmanager.net">download the ODBC Manager</a> and then double-click on the downloaded <code class="docutils literal notranslate"><span class="pre">.dmg</span></code> file to install it.</p></li>
<li><p>Download the latest driver version for macOS, if you haven’t already done so. See <a class="reference internal" href="#download-the-odbc-driver"><span class="std std-ref">Download the ODBC driver</span></a>.</p></li>
<li><p>Double-click on the dowloaded <code class="docutils literal notranslate"><span class="pre">.dmg</span></code> file to install the driver. The installation directory is <code class="docutils literal notranslate"><span class="pre">/Library/simba/spark</span></code>.</p></li>
<li><p>Start the ODBC Manager.</p></li>
<li><p>Navigate to the <strong>Drivers</strong> tab to verify that the driver (Simba Spark ODBC Driver) is installed.</p></li>
<li><p>Go to the <strong>User DSN</strong> or <strong>System DSN</strong> tab and click the <strong>Add</strong> button.</p></li>
<li><p>Select the <strong>Simba Spark ODBC Driver</strong> from the list of installed drivers.</p></li>
<li><p>Click <strong>OK</strong>.</p></li>
<li><p>Choose a Data Source Name and create key-value pairs to set the mandatory <a class="reference internal" href="#odbc-parameters"><span class="std std-ref">ODBC configuration and connection parameters</span></a>. See also <a class="reference internal" href="#odbc-driver-capabilities"><span class="std std-ref">ODBC driver capabilities</span></a> for more driver configurations.</p></li>
<li><p>Click <strong>OK</strong> to create the DSN.</p></li>
</ol>
</div>
<div class="section" id="install-and-configure-the-odbc-driver-for-linux">
<span id="odbc-linux"></span><h3>Install and configure the ODBC driver for Linux<a class="headerlink" href="#install-and-configure-the-odbc-driver-for-linux" title="Permalink to this headline"> </a></h3>
<p>In Linux, you can set up a Data Source Name (DSN) configuration to connect your ODBC client application to Databricks. To set up a DSN on Linux, use the <a class="reference external" href="http://www.unixodbc.org/">unixODBC</a> Driver Manager.</p>
<ol class="arabic">
<li><p>Install <a class="reference external" href="http://www.unixodbc.org/">unixODBC</a>.</p></li>
<li><p>Download the latest driver version for Linux, if you haven’t already done so. See <a class="reference internal" href="#download-the-odbc-driver"><span class="std std-ref">Download the ODBC driver</span></a>.</p></li>
<li><p>Install the ODBC driver.</p>
<ul>
<li><p>RPM package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>yum<span class="w"> </span>--nogpgcheck<span class="w"> </span>localinstall<span class="w"> </span>simbaspark_&lt;version&gt;.rpm
</pre></div>
</div>
</li>
<li><p>DEB package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>dpkg<span class="w"> </span>-i<span class="w"> </span>simbaspark_&lt;version&gt;.deb
</pre></div>
</div>
</li>
</ul>
<p>The installation directory is <code class="docutils literal notranslate"><span class="pre">/opt/simba/spark</span></code>.</p>
</li>
<li><p>Locate the <code class="docutils literal notranslate"><span class="pre">odbc.ini</span></code> driver configuration file that corresponds to <code class="docutils literal notranslate"><span class="pre">SYSTEM</span> <span class="pre">DATA</span> <span class="pre">SOURCES</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>odbcinst<span class="w"> </span>-j
</pre></div>
</div>
</li>
<li><p>In a text editor, open the <code class="docutils literal notranslate"><span class="pre">odbc.ini</span></code> configuration file.</p></li>
<li><p>Create an <code class="docutils literal notranslate"><span class="pre">[ODBC</span> <span class="pre">Data</span> <span class="pre">Sources]</span></code> section:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[ODBC Data Sources]</span>
<span class="na">Databricks</span><span class="o">=</span><span class="s">Databricks ODBC Connector</span>
</pre></div>
</div>
</li>
<li><p>Create another section with the same name as your DSN and specify the configuration parameters as key-value pairs. See the mandatory <a class="reference internal" href="#odbc-parameters"><span class="std std-ref">ODBC configuration and connection parameters</span></a> for more information about how to set the configuration parameters. See also <a class="reference internal" href="#odbc-driver-capabilities"><span class="std std-ref">ODBC driver capabilities</span></a> for more driver configurations.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Databricks]</span>
<span class="na">Driver</span><span class="o">=</span><span class="s">&lt;path-to-driver&gt;</span>
<span class="na">&lt;key&gt;</span><span class="o">=</span><span class="s">&lt;value&gt;</span>
<span class="na">...</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="odbc-configuration-and-connection-parameters">
<span id="odbc-parameters"></span><h3>ODBC configuration and connection parameters<a class="headerlink" href="#odbc-configuration-and-connection-parameters" title="Permalink to this headline"> </a></h3>
<p>This section presents the mandatory configuration parameters, connection parameters, and authentication configuration parameters for the ODBC driver. These are mandatory unless otherwise specified.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#odbc-mandatory"><span class="std std-ref">Mandatory configuration and connection parameters</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-authentication"><span class="std std-ref">Authentication configuration parameters</span></a></p></li>
</ul>
<div class="section" id="mandatory-configuration-and-connection-parameters">
<span id="odbc-mandatory"></span><h4>Mandatory configuration and connection parameters<a class="headerlink" href="#mandatory-configuration-and-connection-parameters" title="Permalink to this headline"> </a></h4>
<p>The following parameters are mandatory (unless otherwise specified), regardless of the <a class="reference internal" href="#odbc-authentication"><span class="std std-ref">authentication configuration parameters</span></a>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Configuration</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Driver</span></code></p></td>
<td><p>Driver installation path</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Host</span></code></p></td>
<td><p>Databricks compute resource’s <strong>Server Hostname</strong> value</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Port</span></code></p></td>
<td><p>443</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">HTTPPath</span></code></p></td>
<td><p>Databricks compute resource’s <strong>HTTP Path</strong> value</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SSL</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ThriftTransport</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Schema</span></code> (optional)</p></td>
<td><p>Default schema</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Catalog</span></code> (optional)</p></td>
<td><p>Default catalog</p></td>
</tr>
</tbody>
</table>
<p>To get the <strong>Server Hostname</strong> and <strong>HTTP Path</strong> values, see one of the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#connection-details-cluster"><span class="std std-ref">Get connection details for a cluster</span></a></p></li>
<li><p><a class="reference internal" href="#sql"><span class="std std-ref">Get connection details for a SQL warehouse</span></a></p></li>
</ul>
<p>A DSN-less connection string with these mandatory configuration and connection parameters uses the following syntax:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;Driver=/Library/simba/spark/lib/libsparkodbc_sb64-universal.dylib;&quot; +
&quot;Host=&lt;server-hostname&gt;;&quot; +
&quot;Port=443;&quot; +
&quot;HTTPPath=&lt;http-path&gt;;&quot; +
&quot;SSL=1;&quot; +
&quot;ThriftTransport=2;&quot; +
&quot;&lt;authentication-configuration-parameters&gt;&quot;
</pre></div>
</div>
<p>For <code class="docutils literal notranslate"><span class="pre">&lt;authentication-configuration-parameters&gt;</span></code>, see <a class="reference internal" href="#odbc-authentication"><span class="std std-ref">Authentication configuration parameters</span></a>.</p>
<p>For a Python code example that shows how to use DSN and DSN-less connections with these mandatory configuration and connection parameters and <code class="docutils literal notranslate"><span class="pre">pyodbc</span></code>, see <a class="reference internal" href="../dev-tools/pyodbc.html"><span class="doc">Connect Python and pyodbc to Databricks</span></a>.</p>
</div>
<div class="section" id="authentication-configuration-parameters">
<span id="odbc-authentication"></span><h4>Authentication configuration parameters<a class="headerlink" href="#authentication-configuration-parameters" title="Permalink to this headline"> </a></h4>
<p>In addition to the <a class="reference internal" href="#odbc-mandatory"><span class="std std-ref">mandatory configuration and connection parameters</span></a>, set the following parameters, depending on the authentication type.</p>
<p>For Python code examples that show how to use DSN and DSN-less connections with many of the following parameters and <code class="docutils literal notranslate"><span class="pre">pyodbc</span></code>, see <a class="reference internal" href="../dev-tools/pyodbc.html"><span class="doc">Connect Python and pyodbc to Databricks</span></a>.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#odbc-auth-pat"><span class="std std-ref">Personal access token authentication</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-auth-username-password"><span class="std std-ref">Username and password authentication</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-auth-pass-through"><span class="std std-ref">OAuth 2.0 token pass-through authentication</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-auth-u2m"><span class="std std-ref">OAuth U2M or OAuth 2.0 browser-based authentication</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-auth-m2m"><span class="std std-ref">OAuth M2M or OAuth 2.0 client credentials authentication</span></a></p></li>
</ul>
<div class="section" id="personal-access-token-authentication">
<span id="odbc-auth-pat"></span><h5>Personal access token authentication<a class="headerlink" href="#personal-access-token-authentication" title="Permalink to this headline"> </a></h5>
<p>To authenticate using a Databricks personal access token, set the following configurations:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Configuration</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AuthMech</span></code></p></td>
<td><p>3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">UID</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">token</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PWD</span></code></p></td>
<td><p>The Databricks personal access token for your workspace user</p></td>
</tr>
</tbody>
</table>
<p>The syntax for a DSN-less connection string is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;Driver=/Library/simba/spark/lib/libsparkodbc_sb64-universal.dylib;&quot; +
&quot;Host=&lt;server-hostname&gt;;&quot; +
&quot;Port=443;&quot; +
&quot;HTTPPath=&lt;http-path&gt;;&quot; +
&quot;SSL=1;&quot; +
&quot;ThriftTransport=2;&quot; +
&quot;AuthMech=3;&quot; +
&quot;UID=token;&quot; +
&quot;PWD=&lt;personal-access-token&gt;&quot;
</pre></div>
</div>
<p>For DSN syntax for non-Windows machines, see <a class="reference internal" href="#odbc-dsn-pat"><span class="std std-ref">Personal access token authentication</span></a>.</p>
</div>
<div class="section" id="username-and-password-authentication">
<span id="odbc-auth-username-password"></span><h5>Username and password authentication<a class="headerlink" href="#username-and-password-authentication" title="Permalink to this headline"> </a></h5>
<p>To authenticate using a Databricks username and password, set the following configurations:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Configuration</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AuthMech</span></code></p></td>
<td><p>3</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">UID</span></code></p></td>
<td><p>The username</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PWD</span></code></p></td>
<td><p>The password</p></td>
</tr>
</tbody>
</table>
<p>The syntax for a DSN-less connection string is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;Driver=/Library/simba/spark/lib/libsparkodbc_sb64-universal.dylib;&quot; +
&quot;Host=&lt;server-hostname&gt;;&quot; +
&quot;Port=443;&quot; +
&quot;HTTPPath=&lt;http-path&gt;;&quot; +
&quot;SSL=1;&quot; +
&quot;ThriftTransport=2;&quot; +
&quot;UID=&lt;username&gt;;&quot; +
&quot;PWD=&lt;password&gt;&quot;
</pre></div>
</div>
<p>For DSN syntax for non-Windows machines, see <a class="reference internal" href="#odbc-dsn-username-password"><span class="std std-ref">Username and password authentication</span></a>.</p>
</div>
<div class="section" id="oauth-20-token-pass-through-authentication">
<span id="odbc-auth-pass-through"></span><h5>OAuth 2.0 token pass-through authentication<a class="headerlink" href="#oauth-20-token-pass-through-authentication" title="Permalink to this headline"> </a></h5>
<p>To authenticate using OAuth 2.0 token pass-through authentication, set the following configurations:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Configuration</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AuthMech</span></code></p></td>
<td><p>11</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Auth_Flow</span></code></p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Auth_AccessToken</span></code></p></td>
<td><p>The OAuth 2.0 token</p></td>
</tr>
</tbody>
</table>
<p>The syntax for a DSN-less connection string is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;Driver=/Library/simba/spark/lib/libsparkodbc_sb64-universal.dylib;&quot; +
&quot;Host=&lt;server-hostname&gt;;&quot; +
&quot;Port=443;&quot; +
&quot;HTTPPath=&lt;http-path&gt;;&quot; +
&quot;SSL=1;&quot; +
&quot;ThriftTransport=2;&quot; +
&quot;AuthMech=11;&quot; +
&quot;Auth_Flow=0;&quot; +
&quot;Auth_AccessToken=&lt;oauth-token&gt;&quot;
</pre></div>
</div>
<p>For DSN syntax for non-Windows machines, see <a class="reference internal" href="#odbc-auth-pass-through"><span class="std std-ref">OAuth 2.0 token pass-through authentication</span></a>.</p>
<p>For more information, see the <code class="docutils literal notranslate"><span class="pre">Token</span> <span class="pre">Pass-through</span></code> sections in the <a class="reference internal" href="#driver-guide-odbc"><span class="std std-ref">ODBC driver guide</span></a>.</p>
</div>
<div class="section" id="oauth-u2m-or-oauth-20-browser-based-authentication">
<span id="odbc-auth-u2m"></span><h5>OAuth U2M or OAuth 2.0 browser-based authentication<a class="headerlink" href="#oauth-u2m-or-oauth-20-browser-based-authentication" title="Permalink to this headline"> </a></h5>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OAuth U2M or OAuth 2.0 browser-based authentication works only with applications that run locally. It does not work with server-based or cloud-based applications.</p>
</div>
<p>To authenticate using OAuth user-to-machine (U2M) or OAuth 2.0 browser-based authentication, set the following configurations:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Configuration</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AuthMech</span></code></p></td>
<td><p>11</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Auth_Flow</span></code></p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PWD</span></code></p></td>
<td><p>A password of your choice. The driver uses this key for
refresh token encryption.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">OAuth2ClientId</span></code> (optional)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">power-bi,tableau-desktop,databricks-cli,</span></code>
<code class="docutils literal notranslate"><span class="pre">databricks-sql-python,databricks-sql-jdbc,</span></code>
<code class="docutils literal notranslate"><span class="pre">databricks-sql-odbc,databricks-dbt-adapter,</span></code>
<code class="docutils literal notranslate"><span class="pre">databricks-sql-connector</span></code> (default)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Auth_Scope</span></code> (optional)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sql,offline_access</span></code> (default)</p></td>
</tr>
</tbody>
</table>
<p>The syntax for a DSN-less connection string is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;Driver=/Library/simba/spark/lib/libsparkodbc_sb64-universal.dylib;&quot; +
&quot;Host=&lt;server-hostname&gt;;&quot; +
&quot;Port=443;&quot; +
&quot;HTTPPath=&lt;http-path&gt;;&quot; +
&quot;SSL=1;&quot; +
&quot;ThriftTransport=2;&quot; +
&quot;AuthMech=11;&quot; +
&quot;Auth_Flow=2&quot;; +
&quot;PWD=&lt;password&gt;&quot;
</pre></div>
</div>
<p>For DSN syntax for non-Windows machines, see <a class="reference internal" href="#odbc-dsn-u2m"><span class="std std-ref">OAuth U2M or OAuth 2.0 browser-based authentication</span></a>.</p>
<p>For more information, see the <code class="docutils literal notranslate"><span class="pre">Browser</span> <span class="pre">Based</span></code> sections in the <a class="reference internal" href="#driver-guide-odbc"><span class="std std-ref">ODBC driver guide</span></a>.</p>
</div>
<div class="section" id="oauth-m2m-or-oauth-20-client-credentials-authentication">
<span id="odbc-auth-m2m"></span><h5>OAuth M2M or OAuth 2.0 client credentials authentication<a class="headerlink" href="#oauth-m2m-or-oauth-20-client-credentials-authentication" title="Permalink to this headline"> </a></h5>
<p>To authenticate using OAuth machine-to-machine (M2M) or OAuth 2.0 client credentials authentication, set the following configurations:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Configuration</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AuthMech</span></code></p></td>
<td><p>11</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Auth_Flow</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Auth_Client_Id</span></code></p></td>
<td><p>The service principal’s <strong>UUID</strong>/<strong>Application ID</strong> value</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Auth_Client_Secret</span></code></p></td>
<td><p>The service principal’s OAuth <strong>Secret</strong> value</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">OAuth2ClientId</span></code> (optional)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">power-bi,tableau-desktop,databricks-cli,</span></code>
<code class="docutils literal notranslate"><span class="pre">databricks-sql-python,databricks-sql-jdbc,</span></code>
<code class="docutils literal notranslate"><span class="pre">databricks-sql-odbc,databricks-dbt-adapter,</span></code>
<code class="docutils literal notranslate"><span class="pre">databricks-sql-connector</span></code> (default)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Auth_Scope</span></code> (optional)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">all-apis</span></code> (default)</p></td>
</tr>
</tbody>
</table>
<p>The syntax for a DSN-less connection string is as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;Driver=/Library/simba/spark/lib/libsparkodbc_sb64-universal.dylib;&quot; +
&quot;Host=&lt;server-hostname&gt;;&quot; +
&quot;Port=443;&quot; +
&quot;HTTPPath=&lt;http-path&gt;;&quot; +
&quot;SSL=1;&quot; +
&quot;ThriftTransport=2;&quot; +
&quot;AuthMech=11;&quot; +
&quot;Auth_Flow=1;&quot; +
&quot;Auth_Client_Id=&lt;service-principal-id&gt;;&quot; +
&quot;Auth_Client_Secret=&lt;service-principal-secret&gt;&quot;
</pre></div>
</div>
<p>For DSN syntax for non-Windows machines, see <a class="reference internal" href="#odbc-dsn-m2m"><span class="std std-ref">OAuth M2M or OAuth 2.0 client credentials authentication</span></a>.</p>
<p>For more information, see the <code class="docutils literal notranslate"><span class="pre">Client</span> <span class="pre">Credentials</span></code> sections in the <a class="reference internal" href="#driver-guide-odbc"><span class="std std-ref">ODBC driver guide</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="dsn-examples-for-non-windows-machines">
<span id="odbc-dsn-examples"></span><h3>DSN examples for non-Windows machines<a class="headerlink" href="#dsn-examples-for-non-windows-machines" title="Permalink to this headline"> </a></h3>
<p>Here are some examples that show how to set up a DSN on various platforms based on your authentication method.</p>
<p>For Python code examples that show how to use DSN and DSN-less connections with many of the following parameters and <code class="docutils literal notranslate"><span class="pre">pyodbc</span></code>, see <a class="reference internal" href="../dev-tools/pyodbc.html"><span class="doc">Connect Python and pyodbc to Databricks</span></a>.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#odbc-dsn-pat"><span class="std std-ref">Personal access token authentication</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-dsn-username-password"><span class="std std-ref">Username and password authentication</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-dsn-pass-through"><span class="std std-ref">OAuth 2.0 token pass-through authentication</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-dsn-u2m"><span class="std std-ref">OAuth U2M or OAuth 2.0 browser-based authentication</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-dsn-m2m"><span class="std std-ref">OAuth M2M or OAuth 2.0 client credentials authentication</span></a></p></li>
</ul>
<div class="section" id="personal-access-token-authentication">
<span id="odbc-dsn-pat"></span><span id="id1"></span><h4>Personal access token authentication<a class="headerlink" href="#personal-access-token-authentication" title="Permalink to this headline"> </a></h4>
<p>To authenticate using a personal access token, complete the following steps:</p>
<ol class="arabic">
<li><p>Set the content of the <code class="docutils literal notranslate"><span class="pre">odbc.ini</span></code> to:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Databricks]</span>
<span class="na">Driver</span><span class="o">=</span><span class="s">&lt;path-to-driver&gt;</span>
<span class="na">Host</span><span class="o">=</span><span class="s">&lt;server-hostname&gt;</span>
<span class="na">Port</span><span class="o">=</span><span class="s">443</span>
<span class="na">HTTPPath</span><span class="o">=</span><span class="s">&lt;http-path&gt;</span>
<span class="na">SSL</span><span class="o">=</span><span class="s">1</span>
<span class="na">ThriftTransport</span><span class="o">=</span><span class="s">2</span>
<span class="na">AuthMech</span><span class="o">=</span><span class="s">3</span>
<span class="na">UID</span><span class="o">=</span><span class="s">token</span>
<span class="na">PWD</span><span class="o">=</span><span class="s">&lt;personal-access-token&gt;</span>
</pre></div>
</div>
</li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">&lt;personal-access-token&gt;</span></code> to the token that you retrieved in <a class="reference internal" href="#authentication"><span class="std std-ref">Authentication requirements</span></a>.</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">Host</span></code> and <code class="docutils literal notranslate"><span class="pre">HTTPPath</span></code> configurations to the values that you retrieved in <a class="reference internal" href="#retrieve-the-connection-details"><span class="std std-ref">Retrieve the connection details</span></a>.</p></li>
<li><p>Use the DSN in your ODBC application by setting the DSN property in the connection string <code class="docutils literal notranslate"><span class="pre">DSN=Databricks;</span></code>.</p></li>
</ol>
</div>
<div class="section" id="username-and-password-authentication">
<span id="odbc-dsn-username-password"></span><span id="id2"></span><h4>Username and password authentication<a class="headerlink" href="#username-and-password-authentication" title="Permalink to this headline"> </a></h4>
<p>To authenticate using a username and password, complete the following steps:</p>
<ol class="arabic">
<li><p>Set the content of the <code class="docutils literal notranslate"><span class="pre">odbc.ini</span></code> to:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Databricks]</span>
<span class="na">Driver</span><span class="o">=</span><span class="s">&lt;path-to-driver&gt;</span>
<span class="na">Host</span><span class="o">=</span><span class="s">&lt;server-hostname&gt;</span>
<span class="na">Port</span><span class="o">=</span><span class="s">443</span>
<span class="na">HTTPPath</span><span class="o">=</span><span class="s">&lt;http-path&gt;</span>
<span class="na">SSL</span><span class="o">=</span><span class="s">1</span>
<span class="na">ThriftTransport</span><span class="o">=</span><span class="s">2</span>
<span class="na">AuthMech</span><span class="o">=</span><span class="s">3</span>
<span class="na">UID</span><span class="o">=</span><span class="s">&lt;username&gt;</span>
<span class="na">PWD</span><span class="o">=</span><span class="s">&lt;password&gt;</span>
</pre></div>
</div>
</li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">&lt;username&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;password&gt;</span></code> to the username and password.</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">Host</span></code> and <code class="docutils literal notranslate"><span class="pre">HTTPPath</span></code> configurations to the values that you retrieved in <a class="reference internal" href="#retrieve-the-connection-details"><span class="std std-ref">Retrieve the connection details</span></a>.</p></li>
<li><p>Use the DSN in your ODBC application by setting the DSN property in the connection string <code class="docutils literal notranslate"><span class="pre">DSN=Databricks;</span></code>.</p></li>
</ol>
</div>
<div class="section" id="oauth-20-token-pass-through-authentication">
<span id="odbc-dsn-pass-through"></span><span id="id3"></span><h4>OAuth 2.0 token pass-through authentication<a class="headerlink" href="#oauth-20-token-pass-through-authentication" title="Permalink to this headline"> </a></h4>
<p>To authenticate using an OAuth 2.0 token, complete the following steps:</p>
<ol class="arabic">
<li><p>Set the content of the <code class="docutils literal notranslate"><span class="pre">odbc.ini</span></code> to:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Databricks]</span>
<span class="na">Driver</span><span class="o">=</span><span class="s">&lt;path-to-driver&gt;</span>
<span class="na">Host</span><span class="o">=</span><span class="s">&lt;server-hostname&gt;</span>
<span class="na">Port</span><span class="o">=</span><span class="s">443</span>
<span class="na">HTTPPath</span><span class="o">=</span><span class="s">&lt;http-path&gt;</span>
<span class="na">SSL</span><span class="o">=</span><span class="s">1</span>
<span class="na">ThriftTransport</span><span class="o">=</span><span class="s">2</span>
<span class="na">AuthMech</span><span class="o">=</span><span class="s">11</span>
<span class="na">Auth_Flow</span><span class="o">=</span><span class="s">0</span>
<span class="na">Auth_AccessToken</span><span class="o">=</span><span class="s">&lt;oauth-token&gt;</span>
</pre></div>
</div>
</li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">&lt;oauth-token&gt;</span></code> to the OAuth 2.0 token that you retrieved in <a class="reference internal" href="#authentication"><span class="std std-ref">Authentication requirements</span></a>.</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">Host</span></code> and <code class="docutils literal notranslate"><span class="pre">HTTPPath</span></code> configurations to the values that you retrieved in <a class="reference internal" href="#retrieve-the-connection-details"><span class="std std-ref">Retrieve the connection details</span></a>.</p></li>
<li><p>Use the DSN in your ODBC application by setting the DSN property in the connection string <code class="docutils literal notranslate"><span class="pre">DSN=Databricks;</span></code>.</p></li>
</ol>
</div>
<div class="section" id="oauth-u2m-or-oauth-20-browser-based-authentication">
<span id="odbc-dsn-u2m"></span><span id="id4"></span><h4>OAuth U2M or OAuth 2.0 browser-based authentication<a class="headerlink" href="#oauth-u2m-or-oauth-20-browser-based-authentication" title="Permalink to this headline"> </a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OAuth U2M and OAuth 2.0 browser-based authentication work only with applications that run locally. They do not work with server-based or cloud-based applications.</p>
</div>
<p>To authenticate using OAuth U2M, complete the following steps:</p>
<ol class="arabic">
<li><p>Set the content of the <code class="docutils literal notranslate"><span class="pre">odbc.ini</span></code> to:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Databricks]</span>
<span class="na">Driver</span><span class="o">=</span><span class="s">&lt;path-to-driver&gt;</span>
<span class="na">Host</span><span class="o">=</span><span class="s">&lt;server-hostname&gt;</span>
<span class="na">Port</span><span class="o">=</span><span class="s">443</span>
<span class="na">HTTPPath</span><span class="o">=</span><span class="s">&lt;http-path&gt;</span>
<span class="na">SSL</span><span class="o">=</span><span class="s">1</span>
<span class="na">ThriftTransport</span><span class="o">=</span><span class="s">2</span>
<span class="na">AuthMech</span><span class="o">=</span><span class="s">11</span>
<span class="na">Auth_Flow</span><span class="o">=</span><span class="s">2</span>
<span class="na">PWD</span><span class="o">=</span><span class="s">&lt;password&gt;</span>
</pre></div>
</div>
</li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">&lt;password&gt;</span></code> to a password of your choice. The driver uses this key for refresh token encryption.</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">Host</span></code> and <code class="docutils literal notranslate"><span class="pre">HTTPPath</span></code> configurations to the values that you retrieved in <a class="reference internal" href="#retrieve-the-connection-details"><span class="std std-ref">Retrieve the connection details</span></a>.</p></li>
<li><p>Use the DSN in your ODBC application by setting the DSN property in the connection string <code class="docutils literal notranslate"><span class="pre">DSN=Databricks;</span></code>.</p></li>
</ol>
</div>
<div class="section" id="oauth-m2m-or-oauth-20-client-credentials-authentication">
<span id="odbc-dsn-m2m"></span><span id="id5"></span><h4>OAuth M2M or OAuth 2.0 client credentials authentication<a class="headerlink" href="#oauth-m2m-or-oauth-20-client-credentials-authentication" title="Permalink to this headline"> </a></h4>
<p>To authenticate using OAuth M2M, complete the following steps:</p>
<ol class="arabic">
<li><p>Set the content of the <code class="docutils literal notranslate"><span class="pre">odbc.ini</span></code> to:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Databricks]</span>
<span class="na">Driver</span><span class="o">=</span><span class="s">&lt;path-to-driver&gt;</span>
<span class="na">Host</span><span class="o">=</span><span class="s">&lt;server-hostname&gt;</span>
<span class="na">Port</span><span class="o">=</span><span class="s">443</span>
<span class="na">HTTPPath</span><span class="o">=</span><span class="s">&lt;http-path&gt;</span>
<span class="na">SSL</span><span class="o">=</span><span class="s">1</span>
<span class="na">ThriftTransport</span><span class="o">=</span><span class="s">2</span>
<span class="na">AuthMech</span><span class="o">=</span><span class="s">11</span>
<span class="na">Auth_Flow</span><span class="o">=</span><span class="s">1</span>
<span class="na">Auth_Client_Id</span><span class="o">=</span><span class="s">&lt;service-principal-application-ID&gt;</span>
<span class="na">Auth_Client_Secret</span><span class="o">=</span><span class="s">&lt;service-principal-secret&gt;</span>
<span class="na">Auth_Scope</span><span class="o">=</span><span class="s">all-apis</span>
</pre></div>
</div>
</li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">&lt;service-principal-application-ID&gt;</span></code> to the service principal’s <strong>UUID</strong> or <strong>Application ID</strong> value that you retrieved in <a class="reference internal" href="#authentication"><span class="std std-ref">Authentication requirements</span></a>.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">&lt;service-principal-secret&gt;</span></code> to the service principal’s OAuth <strong>Secret</strong> value that you retrieved in <a class="reference internal" href="#authentication"><span class="std std-ref">Authentication requirements</span></a>.</p></li>
<li><p>Set the <code class="docutils literal notranslate"><span class="pre">Host</span></code> and <code class="docutils literal notranslate"><span class="pre">HTTPPath</span></code> configurations to the values that you retrieved in <a class="reference internal" href="#retrieve-the-connection-details"><span class="std std-ref">Retrieve the connection details</span></a>.</p></li>
<li><p>Use the DSN in your ODBC application by setting the DSN property in the connection string <code class="docutils literal notranslate"><span class="pre">DSN=Databricks;</span></code>.</p></li>
</ol>
</div>
</div>
<div class="section" id="odbc-driver-capabilities">
<h3>ODBC driver capabilities<a class="headerlink" href="#odbc-driver-capabilities" title="Permalink to this headline"> </a></h3>
<p>This section presents optional ODBC driver configurations.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#odbc-native"><span class="std std-ref">Set the initial schema in ODBC</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-ansi"><span class="std std-ref">ANSI SQL-92 query support in ODBC</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-extract"><span class="std std-ref">Extract large query results in ODBC</span></a></p></li>
<li><p><a class="reference internal" href="#odbc-arrow"><span class="std std-ref">Arrow serialization in ODBC</span></a></p></li>
<li><p><a class="reference internal" href="#cloud-fetch-in-odbc"><span class="std std-ref">Cloud Fetch in ODBC</span></a></p></li>
<li><p><a class="reference internal" href="#driver-guide-odbc"><span class="std std-ref">ODBC driver guide</span></a></p></li>
</ul>
<div class="section" id="set-the-initial-schema-in-odbc">
<span id="odbc-native"></span><h4>Set the initial schema in ODBC<a class="headerlink" href="#set-the-initial-schema-in-odbc" title="Permalink to this headline"> </a></h4>
<p>The ODBC driver allows you to specify the schema by setting <code class="docutils literal notranslate"><span class="pre">Schema=&lt;schema-name&gt;</span></code> as a connection configuration. This is equivalent to running <code class="docutils literal notranslate"><span class="pre">USE</span> <span class="pre">&lt;schema-name&gt;</span></code>.</p>
</div>
<div class="section" id="ansi-sql-92-query-support-in-odbc">
<span id="odbc-ansi"></span><h4>ANSI SQL-92 query support in ODBC<a class="headerlink" href="#ansi-sql-92-query-support-in-odbc" title="Permalink to this headline"> </a></h4>
<p>The ODBC driver accepts SQL queries in ANSI SQL-92 dialect and translates the queries to the Databricks SQL dialect. However, if your application generates Databricks SQL directly or your application uses any non-ANSI SQL-92 standard SQL syntax specific to Databricks, Databricks recommends that you set <code class="docutils literal notranslate"><span class="pre">UseNativeQuery=1</span></code> as a connection configuration. With that setting, the driver passes the SQL queries verbatim to Databricks.</p>
</div>
<div class="section" id="extract-large-query-results-in-odbc">
<span id="odbc-extract"></span><h4>Extract large query results in ODBC<a class="headerlink" href="#extract-large-query-results-in-odbc" title="Permalink to this headline"> </a></h4>
<p>To achieve the best performance when you extract large query results, use the latest version of the ODBC driver that includes the following optimizations.</p>
</div>
<div class="section" id="arrow-serialization-in-odbc">
<span id="odbc-arrow"></span><h4>Arrow serialization in ODBC<a class="headerlink" href="#arrow-serialization-in-odbc" title="Permalink to this headline"> </a></h4>
<p>The ODBC driver version 2.6.15 and above supports an optimized query results serialization format that uses <a class="reference external" href="https://arrow.apache.org/docs/index.html">Apache Arrow</a>.</p>
</div>
<div class="section" id="arrow-serialization-in-odbc">
<span id="cloud-fetch-in-odbc"></span><h4>Cloud Fetch in ODBC<a class="headerlink" href="#arrow-serialization-in-odbc" title="Permalink to this headline"> </a></h4>
<p>The ODBC driver version 2.6.17 and above supports Cloud Fetch, a capability that fetches query results through the cloud storage that is set up in your Databricks deployment. To use Cloud Fetch to extract query results using this capability, use Databricks Runtime 8.3 or above.</p>
<p>Query results are uploaded to an internal <a class="reference internal" href="../dbfs/index.html"><span class="doc">DBFS storage location</span></a> as Arrow-serialized files of up to 20 MB. When the driver sends fetch requests after query completion, Databricks generates and returns <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-presigned-url.html">presigned URLs</a> to the uploaded files. The ODBC driver then uses the URLs to download the results directly from DBFS.</p>
<p>Cloud Fetch is only used for query results larger than 1 MB. Smaller results are retrieved directly from Databricks.</p>
<p>Databricks automatically garbage collects the accumulated files, which are marked for deletion after 24 hours. These marked files are completely deleted after an additional 24 hours.</p>
<p>Cloud Fetch is only available for E2 workspaces. Also, your corresponding Amazon S3 buckets must not have versioning enabled. If you have versioning enabled, you can still enable Cloud Fetch by following the instructions in <a class="reference internal" href="#advanced-configurations"><span class="std std-ref">Advanced configurations</span></a>.</p>
<p>To learn more about the Cloud Fetch architecture, see <a class="reference external" href="https://databricks.com/blog/2021/08/11/how-we-achieved-high-bandwidth-connectivity-with-bi-tools.html">How We Achieved High-bandwidth Connectivity With BI Tools</a>.</p>
</div>
<div class="section" id="odbc-driver-guide">
<span id="driver-guide-odbc"></span><h4>ODBC driver guide<a class="headerlink" href="#odbc-driver-guide" title="Permalink to this headline"> </a></h4>
<p>For more information about the ODBC driver, refer to the installation and configuration guide: <code class="docutils literal notranslate"><span class="pre">Simba</span> <span class="pre">Apache</span> <span class="pre">Spark</span> <span class="pre">ODBC</span> <span class="pre">Connector</span> <span class="pre">Install</span> <span class="pre">and</span> <span class="pre">Configuration</span> <span class="pre">Guide</span></code>. The location of the Databricks ODBC driver installation and configuration guide depends on your platform:</p>
<ul class="simple">
<li><p>MacOS: <code class="docutils literal notranslate"><span class="pre">/Library/simba/spark</span></code></p></li>
<li><p>Linux: <code class="docutils literal notranslate"><span class="pre">/opt/simba/spark</span></code></p></li>
<li><p>Windows: <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\Simba</span> <span class="pre">Spark</span> <span class="pre">ODBC</span> <span class="pre">Driver</span></code></p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="jdbc-driver">
<span id="jdbc"></span><h2>JDBC driver<a class="headerlink" href="#jdbc-driver" title="Permalink to this headline"> </a></h2>
<p>This section presents the steps to configure your JDBC driver to connect to Databricks.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#jdbc-install-java"><span class="std std-ref">Install the Databricks JDBC driver in a Java project</span></a></p></li>
<li><p><a class="reference internal" href="#jdbc-driver-download"><span class="std std-ref">Download the Databricks JDBC driver</span></a></p></li>
<li><p><a class="reference internal" href="#databricks-jdbc"><span class="std std-ref">Configure the connection for the Databricks JDBC driver</span></a></p></li>
<li><p><a class="reference internal" href="#spark-jdbc"><span class="std std-ref">Building the connection URL for the legacy Spark driver</span></a></p></li>
<li><p><a class="reference internal" href="#jdbc-driver-capabilities"><span class="std std-ref">JDBC driver capabilities</span></a></p></li>
</ul>
<div class="section" id="install-the-databricks-jdbc-driver-in-a-java-project">
<span id="jdbc-install-java"></span><h3>Install the Databricks JDBC driver in a Java project<a class="headerlink" href="#install-the-databricks-jdbc-driver-in-a-java-project" title="Permalink to this headline"> </a></h3>
<p>The Databricks JDBC driver is available in the <a class="reference external" href="https://search.maven.org/artifact/com.databricks/databricks-jdbc">Maven Central repository</a>. To include the Databricks JDBC driver in your Java project, add the following entry to your application’s <code class="docutils literal notranslate"><span class="pre">pom.xml</span></code> file, as follows.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following <code class="docutils literal notranslate"><span class="pre">version</span></code> value is subject to change. For available versions to choose from, see the <a class="reference external" href="https://search.maven.org/artifact/com.databricks/databricks-jdbc">Maven Central repository</a>.</p>
</div>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
<span class="w">  </span><span class="nt">&lt;groupId&gt;</span>com.databricks<span class="nt">&lt;/groupId&gt;</span>
<span class="w">  </span><span class="nt">&lt;artifactId&gt;</span>databricks-jdbc<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>2.6.36<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="download-the-databricks-jdbc-driver">
<span id="jdbc-driver-download"></span><h3>Download the Databricks JDBC driver<a class="headerlink" href="#download-the-databricks-jdbc-driver" title="Permalink to this headline"> </a></h3>
<ol class="arabic simple">
<li><p>Go to the <a class="reference external" href="https://databricks.com/spark/jdbc-drivers-download">Databricks JDBC driver</a> download page to download the driver.</p></li>
<li><p>The driver is packaged as a JAR, which does not require installation and can be added to the Java classpath.</p></li>
</ol>
<p>Since <strong>JDBC 2.6.25</strong> the driver name is <code class="docutils literal notranslate"><span class="pre">DatabricksJDBC42.jar</span></code>. Before this, the legacy driver’s name is <code class="docutils literal notranslate"><span class="pre">SparkJDBC42.jar</span></code>.
After you download the driver, use the following instructions to configure the driver:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#databricks-jdbc"><span class="std std-ref">Building the connection URL for the Databricks JDBC driver</span></a></p></li>
<li><p><a class="reference internal" href="#spark-jdbc"><span class="std std-ref">Building the connection URL for the legacy Spark driver</span></a></p></li>
</ul>
</div>
<div class="section" id="configure-the-connection-for-the-databricks-jdbc-driver">
<span id="databricks-jdbc"></span><h3>Configure the connection for the Databricks JDBC driver<a class="headerlink" href="#configure-the-connection-for-the-databricks-jdbc-driver" title="Permalink to this headline"> </a></h3>
<p>The information in this section applies to JDBC driver 2.6.25 and above, unless otherwise noted.</p>
<p>To configure a connection for the Databricks JDBC driver, you typically use a <em>JDBC connection URL</em> with the following format:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>jdbc:databricks://&lt;server-hostname&gt;:443;httpPath=&lt;http-path&gt;[;&lt;property&gt;=&lt;value&gt;[;&lt;property&gt;=&lt;value&gt;]]
</pre></div>
</div>
<p>In the preceding JDBC connection URL, replace the following placeholders:</p>
<ul class="simple">
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;server-hostname&gt;</span></code> with the Databricks compute resource’s <strong>Server Hostname</strong> value.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;catalog&gt;</span></code> with the default catalog name.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;http-path&gt;</span></code> with the Databricks compute resource’s <strong>HTTP Path</strong> value.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;property&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code> as needed for each of the connection properties as listed in the following sections.</p></li>
</ul>
<p>To get the <strong>Server Hostname</strong> and <strong>HTTP Path</strong> values, see one of the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#connection-details-cluster"><span class="std std-ref">Get connection details for a cluster</span></a></p></li>
<li><p><a class="reference internal" href="#sql"><span class="std std-ref">Get connection details for a SQL warehouse</span></a></p></li>
</ul>
<p>If you use the JDBC driver to connect using Java code, you can pass the JDBC connection URL to the <code class="docutils literal notranslate"><span class="pre">DriverManager</span></code>, as follows:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="c1">// Pass a JDBC connection URL to the DriverManager.</span>
<span class="c1">// ...</span>
<span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&quot;com.databricks.client.jdbc.Driver&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="n">Connection</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DriverManager</span><span class="p">.</span><span class="na">getConnection</span><span class="p">(</span><span class="s">&quot;jdbc://&lt;server-hostname&gt;:443;httpPath=&lt;http-path&gt;[;&lt;property&gt;=&lt;value&gt;[;&lt;property&gt;=&lt;value&gt;]]&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
<p>You should avoid setting sensitive credential properties such as tokens, passwords, and secrets directly through the JDBC connection URL. Instead, the recommended approach is to pass a JDBC connection URL without any properties, plus the general properties and sensitive credential properties in a <code class="docutils literal notranslate"><span class="pre">Properties</span></code> collection, to the <code class="docutils literal notranslate"><span class="pre">DriverManager</span></code> as follows:</p>
<p>In the preceding Java code, replace the placeholders as described previously in this section.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="c1">// Pass individual credential properties to the DriverManager.</span>
<span class="c1">// ...</span>
<span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&quot;com.databricks.client.jdbc.Driver&quot;</span><span class="p">);</span>
<span class="n">String</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;jdbc:databricks://&lt;server-hostname&gt;:443&quot;</span><span class="p">;</span>
<span class="n">Properties</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Properties</span><span class="p">();</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;httpPath&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;http-path&gt;&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;&lt;property&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;value&gt;&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;&lt;property&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;value&gt;&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;&lt;sensitive-credential-property&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;sensitive-credential-value&gt;&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;&lt;sensitive-credential-property&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;sensitive-credential-value&gt;&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="n">Connection</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DriverManager</span><span class="p">.</span><span class="na">getConnection</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
<p>In the preceding Java code, replace the following placeholders:</p>
<ul class="simple">
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;server-hostname&gt;</span></code> with the Databricks compute resource’s <strong>Server Hostname</strong> value.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;http-path&gt;</span></code> with the Databricks compute resource’s <strong>HTTP Path</strong> value.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;property&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code> as needed for each of the general configuration properties as listed in the following sections.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;sensitive-credential-property&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;sensitive-credential-value&gt;</span></code> as needed for each of the sensitive credential properties as listed in the following sections. Each <code class="docutils literal notranslate"><span class="pre">&lt;sensitive-credential-value&gt;</span></code> should come from an external location, for example an environment variable.</p></li>
</ul>
<p>A complete example that passes individual credential properties to the <code class="docutils literal notranslate"><span class="pre">DriverManager</span></code> for Databricks personal access token authentication is as follows. This example queries the <code class="docutils literal notranslate"><span class="pre">trips</span></code> table in the <code class="docutils literal notranslate"><span class="pre">samples</span></code> catalog’s <code class="docutils literal notranslate"><span class="pre">nyctrips</span></code> schema and displays the results. This example assumes that the following environment variables have been set:</p>
<ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">DATABRICKS_SERVER_HOSTNAME</span></code> to the <a class="reference internal" href="../workspace/workspace-details.html#workspace-url"><span class="std std-ref">workspace instance name</span></a>, for example <code class="docutils literal notranslate"><span class="pre">dbc-a1b2345c-d6e7.cloud.databricks.com</span></code>.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">DATABRICKS_HTTP_PATH</span></code> to the <strong>HTTP Path</strong> value for the target cluster or SQL warehouse in the workspace. To get the <strong>HTTP Path</strong> value, see <a class="reference internal" href="#get-server-hostname-port-http-path-and-jdbc-url"><span class="std std-ref">Retrieve the connection details</span></a>.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">DATABRICKS_TOKEN</span></code> to the Databricks personal access token for the target user. To create a personal access token, see <a class="reference internal" href="../dev-tools/auth/pat.html#pat-user"><span class="std std-ref">Databricks personal access tokens for workspace users</span></a>.</p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">package</span><span class="w"> </span><span class="nn">org.example</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.Connection</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.DriverManager</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.ResultSet</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.ResultSetMetaData</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.sql.Statement</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Properties</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&quot;com.databricks.client.jdbc.Driver&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;jdbc:databricks://&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">getenv</span><span class="p">(</span><span class="s">&quot;DATABRICKS_SERVER_HOSTNAME&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;:443&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">Properties</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Properties</span><span class="p">();</span>
<span class="w">    </span><span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;httpPath&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">getenv</span><span class="p">(</span><span class="s">&quot;DATABRICKS_HTTP_PATH&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;AuthMech&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;UID&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;token&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;PWD&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">getenv</span><span class="p">(</span><span class="s">&quot;DATABRICKS_TOKEN&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">Connection</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DriverManager</span><span class="p">.</span><span class="na">getConnection</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">Statement</span><span class="w"> </span><span class="n">stmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">conn</span><span class="p">.</span><span class="na">createStatement</span><span class="p">();</span>
<span class="w">      </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">ResultSet</span><span class="w"> </span><span class="n">rs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stmt</span><span class="p">.</span><span class="na">executeQuery</span><span class="p">(</span><span class="s">&quot;SELECT * FROM samples.nyctaxi.trips&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ResultSetMetaData</span><span class="w"> </span><span class="n">md</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rs</span><span class="p">.</span><span class="na">getMetaData</span><span class="p">();</span>
<span class="w">        </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="o">[</span><span class="n">md</span><span class="p">.</span><span class="na">getColumnCount</span><span class="p">()</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">columns</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">columns</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">md</span><span class="p">.</span><span class="na">getColumnName</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">rs</span><span class="p">.</span><span class="na">next</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="s">&quot;Row &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rs</span><span class="p">.</span><span class="na">getRow</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;=[&quot;</span><span class="p">);</span>
<span class="w">          </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">columns</span><span class="p">.</span><span class="na">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">columns</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;=&#39;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rs</span><span class="p">.</span><span class="na">getObject</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;&#39;&quot;</span><span class="p">);</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">          </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;)]&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p><a class="reference internal" href="#jdbc-auth-pat"><span class="std std-ref">Personal access token authentication</span></a></p></li>
<li><p><a class="reference internal" href="#jdbc-auth-username-password"><span class="std std-ref">Username and password authentication</span></a></p></li>
<li><p><a class="reference internal" href="#jdbc-auth-pass-through"><span class="std std-ref">OAuth 2.0 token pass-through authentication</span></a></p></li>
<li><p><a class="reference internal" href="#jdbc-auth-u2m"><span class="std std-ref">OAuth U2M or OAuth 2.0 browser-based authentication</span></a></p></li>
<li><p><a class="reference internal" href="#jdbc-auth-m2m"><span class="std std-ref">OAuth M2M or OAuth 2.0 client credentials authentication</span></a></p></li>
</ul>
<div class="section" id="personal-access-token-authentication">
<span id="jdbc-auth-pat"></span><span id="id6"></span><h4>Personal access token authentication<a class="headerlink" href="#personal-access-token-authentication" title="Permalink to this headline"> </a></h4>
<p>To authenticate using a Databricks personal access token, set the following configuration.</p>
<p>For a JDBC connection URL with embedded general configuration properties and sensitive credential properties:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>jdbc:databricks://&lt;server-hostname&gt;:443;httpPath=&lt;http-path&gt;;AuthMech=3;UID=token;PWD=&lt;personal-access-token&gt;
</pre></div>
</div>
<p>For Java code with general configuration properties and sensitive credential properties set outside of the JDBC connection URL:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&quot;com.databricks.client.jdbc.Driver&quot;</span><span class="p">);</span>
<span class="n">String</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;jdbc:databricks://&lt;server-hostname&gt;:443&quot;</span><span class="p">;</span>
<span class="n">Properties</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Properties</span><span class="p">();</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;httpPath&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;http-path&gt;&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;AuthMech&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;UID&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;token&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;PWD&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;personal-access-token&gt;&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="n">Connection</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DriverManager</span><span class="p">.</span><span class="na">getConnection</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
<p>In the preceding URL or Java code, replace <code class="docutils literal notranslate"><span class="pre">&lt;personal-access-token&gt;</span></code> with the Databricks personal access token for your workspace user.</p>
</div>
<div class="section" id="username-and-password-authentication">
<span id="jdbc-auth-username-password"></span><span id="id7"></span><h4>Username and password authentication<a class="headerlink" href="#username-and-password-authentication" title="Permalink to this headline"> </a></h4>
<p>To authenticate using a Databricks username and password, set the following configuration.</p>
<p>For a JDBC connection URL with embedded general configuration properties and sensitive credential properties:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>jdbc:databricks://&lt;server-hostname&gt;:443;httpPath=&lt;http-path&gt;;AuthMech=3;UID=&lt;username&gt;;PWD=&lt;password&gt;
</pre></div>
</div>
<p>For Java code with general configuration properties and sensitive credential properties set outside of the JDBC connection URL:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&quot;com.databricks.client.jdbc.Driver&quot;</span><span class="p">);</span>
<span class="n">String</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;jdbc:databricks://&lt;server-hostname&gt;:443&quot;</span><span class="p">;</span>
<span class="n">Properties</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Properties</span><span class="p">();</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;httpPath&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;http-path&gt;&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;AuthMech&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;3&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;UID&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;username&gt;&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;PWD&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;password&gt;&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="n">Connection</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DriverManager</span><span class="p">.</span><span class="na">getConnection</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
<p>In the preceding URL or Java code, replace <code class="docutils literal notranslate"><span class="pre">&lt;username&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;password&gt;</span></code> with the username and password.</p>
<p>For more information, see the <code class="docutils literal notranslate"><span class="pre">Using</span> <span class="pre">User</span> <span class="pre">Name</span> <span class="pre">and</span> <span class="pre">Password</span></code> section in the <a class="reference internal" href="#driver-guide-jdbc"><span class="std std-ref">JDBC driver guide</span></a>.</p>
</div>
<div class="section" id="oauth-20-token-pass-through-authentication">
<span id="jdbc-auth-pass-through"></span><span id="id8"></span><h4>OAuth 2.0 token pass-through authentication<a class="headerlink" href="#oauth-20-token-pass-through-authentication" title="Permalink to this headline"> </a></h4>
<p>To authenticate using OAuth 2.0 token pass-through authentication, set the following configuration.</p>
<p>For a JDBC connection URL with embedded general configuration properties and sensitive credential properties:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>jdbc:databricks://&lt;server-hostname&gt;:443;httpPath=&lt;http-path&gt;;AuthMech=11;Auth_Flow=0;Auth_AccessToken=&lt;oauth-token&gt;
</pre></div>
</div>
<p>For Java code with general configuration properties and sensitive credential properties set outside of the JDBC connection URL:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&quot;com.databricks.client.jdbc.Driver&quot;</span><span class="p">);</span>
<span class="n">String</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;jdbc:databricks://&lt;server-hostname&gt;:443&quot;</span><span class="p">;</span>
<span class="n">Properties</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Properties</span><span class="p">();</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;httpPath&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;http-path&gt;&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;AuthMech&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;11&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;Auth_Flow&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;Auth_AccessToken&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;oauth-token&gt;&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="n">Connection</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DriverManager</span><span class="p">.</span><span class="na">getConnection</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
<p>In the preceding URL or Java code, replace <code class="docutils literal notranslate"><span class="pre">&lt;oauth-token&gt;</span></code> with the OAuth 2.0 token.</p>
<p>For more information, see the <code class="docutils literal notranslate"><span class="pre">Token</span> <span class="pre">Pass-through</span></code> section in the <a class="reference internal" href="#driver-guide-jdbc"><span class="std std-ref">JDBC driver guide</span></a>.</p>
</div>
<div class="section" id="oauth-u2m-or-oauth-20-browser-based-authentication">
<span id="jdbc-auth-u2m"></span><span id="id9"></span><h4>OAuth U2M or OAuth 2.0 browser-based authentication<a class="headerlink" href="#oauth-u2m-or-oauth-20-browser-based-authentication" title="Permalink to this headline"> </a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OAuth U2M or OAuth 2.0 browser-based authentication works only with applications that run locally. It does not work with server-based or cloud-based applications.</p>
</div>
<p>To authenticate using OAuth user-to-machine (U2M) or OAuth 2.0 browser-based authentication, set the following configuration.</p>
<p>For a JDBC connection URL with embedded general configuration properties and sensitive credential properties:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>jdbc:databricks://&lt;server-hostname&gt;:443;httpPath=&lt;http-path&gt;;AuthMech=11;Auth_Flow=2;TokenCachePassPhrase=&lt;passphrase&gt;;EnableTokenCache=0
</pre></div>
</div>
<p>For Java code with general configuration properties and sensitive credential properties set outside of the JDBC connection URL:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&quot;com.databricks.client.jdbc.Driver&quot;</span><span class="p">);</span>
<span class="n">String</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;jdbc:databricks://&lt;server-hostname&gt;:443&quot;</span><span class="p">;</span>
<span class="n">Properties</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Properties</span><span class="p">();</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;httpPath&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;http-path&gt;&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;AuthMech&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;11&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;Auth_Flow&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;TokenCachePassPhrase&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;passphrase&gt;&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;EnableTokenCache&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;0&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="n">Connection</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DriverManager</span><span class="p">.</span><span class="na">getConnection</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
<p>In the preceding URL or Java code, replace <code class="docutils literal notranslate"><span class="pre">&lt;passphrase&gt;</span></code> with a passphrase of your choice. The driver uses this key for refresh token encryption.</p>
<p>For more information, see the <code class="docutils literal notranslate"><span class="pre">Using</span> <span class="pre">Browser</span> <span class="pre">Based</span> <span class="pre">Authentication</span></code> section in the <a class="reference internal" href="#driver-guide-jdbc"><span class="std std-ref">JDBC driver guide</span></a>.</p>
</div>
<div class="section" id="oauth-m2m-or-oauth-20-client-credentials-authentication">
<span id="jdbc-auth-m2m"></span><span id="id10"></span><h4>OAuth M2M or OAuth 2.0 client credentials authentication<a class="headerlink" href="#oauth-m2m-or-oauth-20-client-credentials-authentication" title="Permalink to this headline"> </a></h4>
<p>To authenticate using OAuth machine-to-machine (M2M) or OAuth 2.0 client credentials authentication, set the following configuration.</p>
<p>For a JDBC connection URL with embedded general configuration properties and sensitive credential properties:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>jdbc:databricks://&lt;server-hostname&gt;:443;httpPath=&lt;http-path&gt;;AuthMech=11;Auth_Flow=1;OAuth2ClientId=&lt;service-principal-application-id&gt;;OAuth2Secret=&lt;service-principal-oauth-secret&gt;
</pre></div>
</div>
<p>For Java code with general configuration properties and sensitive credential properties set outside of the JDBC connection URL:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// ...</span>
<span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&quot;com.databricks.client.jdbc.Driver&quot;</span><span class="p">);</span>
<span class="n">String</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;jdbc:databricks://&lt;server-hostname&gt;:443&quot;</span><span class="p">;</span>
<span class="n">Properties</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Properties</span><span class="p">();</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;httpPath&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;http-path&gt;&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;AuthMech&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;11&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;Auth_Flow&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;OAuth2ClientId&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;service-principal-application-id&gt;&quot;</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;OAuth2Secret&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;service-principal-oauth-secret&gt;&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="n">Connection</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DriverManager</span><span class="p">.</span><span class="na">getConnection</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
</div>
<p>In the preceding URL or Java code, replace the following placeholders:</p>
<ul class="simple">
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;service-principal-application-id&gt;</span></code> with the service principal’s <strong>UUID</strong>/<strong>Application ID</strong> value.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;service-principal-oauth-secret&gt;</span></code> with the service principal’s OAuth <strong>Secret</strong> value.</p></li>
</ul>
<p>For more information, see the <code class="docutils literal notranslate"><span class="pre">Using</span> <span class="pre">M2M</span> <span class="pre">Based</span> <span class="pre">Authentication</span></code> section in the <a class="reference internal" href="#driver-guide-jdbc"><span class="std std-ref">JDBC driver guide</span></a>.</p>
</div>
</div>
<div class="section" id="building-the-connection-url-for-the-legacy-spark-driver">
<span id="spark-jdbc"></span><h3>Building the connection URL for the legacy Spark driver<a class="headerlink" href="#building-the-connection-url-for-the-legacy-spark-driver" title="Permalink to this headline"> </a></h3>
<p>The following information applies to JDBC driver 2.6.22 and below.</p>
<p>To connect to Databricks using the Spark JDBC driver you need to build a connection URL that has the following general form:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>jdbc:spark://&lt;Server Hostname&gt;:443;HttpPath=&lt;Http Path&gt;;TransportMode=http;SSL=1[;property=value[;property=value]]
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">jdbc:spark://</span></code> (Required) is known as the subprotocol and is constant.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Server</span> <span class="pre">Hostname</span></code> (Required) is the address of the server to connect to.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Http</span> <span class="pre">Path</span></code> (Required) is the Databricks compute resources URL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">property</span></code> (Optional) is one or more connection properties. See <a class="reference internal" href="#jdbc-driver-capabilities"><span class="std std-ref">JDBC driver capabilities</span></a> for more details.</p></li>
</ul>
<p>The driver also requires setting <strong>TransportMode</strong> and <strong>SSL</strong> properties. The Databricks recommended values of these properties are <code class="docutils literal notranslate"><span class="pre">http</span></code> and 1, respectively.</p>
<p>To authenticate using a personal access token, set the following properties collection:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>// ...
Class.forName(&quot;com.databricks.client.jdbc.Driver&quot;);
String url = &quot;jdbc:spark://&lt;Server Hostname&gt;;HttpPath=&lt;Http Path&gt;;TransportMode=http;SSL=1&quot;;
Properties p = new java.util.Properties();
p.put(&quot;PWD&quot;, &quot;&lt;personal-access-token&gt;&quot;);
// ...
Connection conn = DriverManager.getConnection(url, p);
// ...
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PWD</span></code> is the personal access token that you obtained in <a class="reference internal" href="#authentication"><span class="std std-ref">Authentication requirements</span></a>.</p></li>
</ul>
</div>
<div class="section" id="jdbc-driver-capabilities">
<h3>JDBC driver capabilities<a class="headerlink" href="#jdbc-driver-capabilities" title="Permalink to this headline"> </a></h3>
<p>This section presents optional JDBC driver configurations. The same capabilities apply to both Databricks and legacy Spark drivers.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#jdbc-native"><span class="std std-ref">ANSI SQL-92 query support in JDBC</span></a></p></li>
<li><p><a class="reference internal" href="#default-catalog-and-schema"><span class="std std-ref">Default catalog and schema</span></a></p></li>
<li><p><a class="reference internal" href="#jdbc-extract"><span class="std std-ref">Extract large query results in JDBC</span></a></p></li>
<li><p><a class="reference internal" href="#jdbc-arrow"><span class="std std-ref">Arrow serialization in JDBC</span></a></p></li>
<li><p><a class="reference internal" href="#cloud-fetch-in-jdbc"><span class="std std-ref">Cloud Fetch in JDBC</span></a></p></li>
<li><p><a class="reference internal" href="#driver-guide-jdbc"><span class="std std-ref">JDBC driver guide</span></a></p></li>
</ul>
<div class="section" id="ansi-sql-92-query-support-in-jdbc">
<span id="jdbc-native"></span><h4>ANSI SQL-92 query support in JDBC<a class="headerlink" href="#ansi-sql-92-query-support-in-jdbc" title="Permalink to this headline"> </a></h4>
<p>Legacy Spark JDBC drivers accept SQL queries in ANSI SQL-92 dialect and translate the queries to the Databricks SQL dialect before sending them to the server. However, if your application generates Databricks SQL directly or your application uses any non-ANSI SQL-92 standard SQL syntax specific to Databricks, Databricks recommends that you set <code class="docutils literal notranslate"><span class="pre">UseNativeQuery=1</span></code> as a connection configuration.
With that setting, the driver passes the SQL queries verbatim to Databricks.</p>
</div>
<div class="section" id="default-catalog-and-schema">
<h4>Default catalog and schema<a class="headerlink" href="#default-catalog-and-schema" title="Permalink to this headline"> </a></h4>
<p>To specify the default catalog and schema, add <code class="docutils literal notranslate"><span class="pre">ConnCatalog=&lt;catalog-name&gt;;ConnSchema=&lt;schema-name&gt;</span></code> to the JDBC connection URL.</p>
</div>
<div class="section" id="extract-large-query-results-in-jdbc">
<span id="jdbc-extract"></span><h4>Extract large query results in JDBC<a class="headerlink" href="#extract-large-query-results-in-jdbc" title="Permalink to this headline"> </a></h4>
<p>To achieve the best performance when you extract large query results, use the latest version of the JDBC driver, which includes the following optimizations.</p>
</div>
<div class="section" id="arrow-serialization-in-jdbc">
<span id="jdbc-arrow"></span><h4>Arrow serialization in JDBC<a class="headerlink" href="#arrow-serialization-in-jdbc" title="Permalink to this headline"> </a></h4>
<p>The JDBC driver version 2.6.16 and above supports an optimized query results serialization format that uses <a class="reference external" href="https://arrow.apache.org/docs/index.html">Apache Arrow</a>.</p>
</div>
<div class="section" id="arrow-serialization-in-jdbc">
<span id="cloud-fetch-in-jdbc"></span><h4>Cloud Fetch in JDBC<a class="headerlink" href="#arrow-serialization-in-jdbc" title="Permalink to this headline"> </a></h4>
<p>The JDBC driver version 2.6.19 and above supports Cloud Fetch, a capability that fetches query results through the cloud storage that is set up in your Databricks deployment. To use Cloud Fetch to extract query results, use Databricks Runtime 8.3 or above.</p>
<p>Query results are uploaded to an internal <a class="reference internal" href="../dbfs/index.html"><span class="doc">DBFS storage location</span></a> as Arrow-serialized files of up to 20 MB. When the driver sends fetch requests after query completion, Databricks generates and returns <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-presigned-url.html">presigned URLs</a> to the uploaded files. The JDBC driver then uses the URLs to download the results directly from DBFS.</p>
<p>Cloud Fetch is only used for query results larger than 1 MB. Smaller results are retrieved directly from Databricks.</p>
<p>Databricks automatically garbage collects the accumulated files which are marked for deletion after 24 hours. These marked files are completely deleted after an additional 24 hours.</p>
<p>Cloud Fetch is only available in E2 workspaces. Also, your corresponding Amazon S3 buckets must not have versioning enabled. If you have versioning enabled, you can still enable Cloud Fetch by following the instructions in <a class="reference internal" href="#advanced-configurations"><span class="std std-ref">Advanced configurations</span></a>.</p>
<p>To learn more about the Cloud Fetch architecture, see <a class="reference external" href="https://databricks.com/blog/2021/08/11/how-we-achieved-high-bandwidth-connectivity-with-bi-tools.html">How We Achieved High-bandwidth Connectivity With BI Tools</a>.</p>
</div>
<div class="section" id="jdbc-driver-guide">
<span id="driver-guide-jdbc"></span><h4>JDBC driver guide<a class="headerlink" href="#jdbc-driver-guide" title="Permalink to this headline"> </a></h4>
<p>For more information about the JDBC driver, refer to the installation and configuration guide. Find the Databricks JDBC driver installation and configuration guide in the <code class="docutils literal notranslate"><span class="pre">docs</span></code> directory of the driver package.</p>
</div>
</div>
</div>
<div class="section" id="advanced-configurations">
<span id="advanced-configurations"></span><h2>Advanced configurations<a class="headerlink" href="#advanced-configurations" title="Permalink to this headline"> </a></h2>
<p>If you have enabled <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/Versioning.html">S3 bucket versioning</a> on your <a class="reference internal" href="../dbfs/index.html"><span class="doc">DBFS root</span></a>, then Databricks cannot garbage collect older versions of uploaded query results. We recommend setting an S3 lifecycle policy first that purges older versions of uploaded query results.</p>
<p>To set a lifecycle policy follow the steps below:</p>
<ol class="arabic simple">
<li><p>In the AWS console, go to the <strong>S3</strong> service.</p></li>
<li><p>Click on the <a class="reference internal" href="../administration-guide/account-settings-e2/storage.html"><span class="doc">S3 bucket</span></a> that you use for your workspace’s root storage.</p></li>
<li><p>Open the <strong>Management</strong> tab and choose <strong>Create lifecycle rule</strong>.</p></li>
<li><p>Choose any name for the <strong>Lifecycle rule name</strong>.</p></li>
<li><p>Keep the prefix field empty.</p></li>
<li><p>Under <strong>Lifecycle rule actions</strong> select <strong>Permanently delete noncurrent versions of objects</strong>.</p></li>
<li><p>Set a value under <strong>Days after objects become noncurrent</strong>. We recommend using the value 1 here.</p></li>
<li><p>Click <strong>Create rule</strong>.</p></li>
</ol>
<div class="figure align-default">
<img alt="Lifecycle policy" src="../_images/lifecycle-policy-with-tags.png" />
</div>
</div>
<div class="section" id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline"> </a></h2>
<p>We automatically disable Cloud Fetch on clusters if you have bucket versioning enabled. You can still enable Cloud Fetch manually by following the steps below:</p>
<ol class="arabic">
<li><p>Go to the <strong>Advanced options</strong> of the cluster. See <a class="reference internal" href="#connection-details-cluster"><span class="std std-ref">Get connection details from a cluster</span></a>.</p></li>
<li><p>Click <strong>Spark</strong>.</p></li>
<li><p>Add this configuration:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>spark.databricks.cloudfetch.override.enabled true
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="troubleshooting">
<span id="jdbc-driver"></span><h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline"> </a></h2>
<p>See <a class="reference external" href="https://kb.databricks.com/bi/jdbc-odbc-troubleshooting.html">Troubleshooting JDBC and ODBC connections</a>.</p>
</div>
<div class="section" id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../dev-tools/python-sql-connector.html"><span class="doc">Databricks SQL Connector for Python</span></a></p></li>
<li><p><a class="reference internal" href="../dev-tools/pyodbc.html"><span class="doc">Connect Python and pyodbc to Databricks</span></a></p></li>
</ul>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../_static/js/localized.js"></script>
  <script type="text/javascript" src="../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>