

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to work with R using RStudio on Databricks. RStudio is a popular integrated development environment (IDE) for R." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="RStudio on Databricks">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>RStudio on Databricks &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/sparkr/rstudio.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/sparkr/rstudio.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/sparkr/rstudio.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="top" title="Databricks on AWS" href="../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../en/sparkr/rstudio.html" class="notranslate">English</option>
    <option value="../../ja/sparkr/rstudio.html" class="notranslate">日本語</option>
    <option value="../../pt/sparkr/rstudio.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>RStudio on Databricks</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <p></p>
<div class="section" id="rstudio-on-databricks">
<h1>RStudio on Databricks<a class="headerlink" href="#rstudio-on-databricks" title="Permalink to this headline"> </a></h1>
<p></p>
<p>You can use <a class="reference external" href="https://www.rstudio.com/">RStudio</a>, a popular integrated development environment (IDE) for R, to connect to Databricks compute resources within Databricks workspaces. Use <a class="reference internal" href="#rstudio-desktop"><span class="std std-ref">RStudio Desktop</span></a> to connect to a Databricks <a class="reference internal" href="../compute/index.html"><span class="doc">cluster</span></a> or a <a class="reference internal" href="../compute/sql-warehouse/create-sql-warehouse.html"><span class="doc">SQL warehouse</span></a> from your local development machine. You can also use your web browser to sign in to your Databricks workspace and then connect to a Databricks cluster that has <a class="reference internal" href="#rstudio-server"><span class="std std-ref">RStudio Server</span></a> installed, within that workspace.</p>
<div class="section" id="connect-using-rstudio-desktop">
<span id="rstudio-desktop"></span><h2>Connect using RStudio Desktop<a class="headerlink" href="#connect-using-rstudio-desktop" title="Permalink to this headline"> </a></h2>
<p>Use <a class="reference external" href="https://www.rstudio.com/products/rstudio/#rstudio-desktop">RStudio Desktop</a> to connect to a remote Databricks cluster or SQL warehouse from your local development machine. To connect in this scenario, use an ODBC connection and call ODBC package functions for R, which are described in this section.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You cannot use packages such as <a class="reference internal" href="overview.html"><span class="doc">SparkR</span></a> or <a class="reference internal" href="sparklyr.html"><span class="doc">sparklyr</span></a> in this RStudio Desktop scenario, unless you also use <a class="reference internal" href="../dev-tools/databricks-connect/index.html"><span class="doc">Databricks Connect</span></a>. As an alternative to using RStudio Desktop, you can use your web browser to sign in to your Databricks workspace and then connect to a Databricks cluster that has <a class="reference internal" href="#rstudio-server"><span class="std std-ref">RStudio Server</span></a> installed in that workspace.</p>
</div>
<p>To set up RStudio Desktop on your local development machine:</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://cran.rstudio.com/">Download and install R 3.3.0 or higher</a>.</p></li>
<li><p><a class="reference external" href="https://www.rstudio.com/products/rstudio/download/#download">Download and install RStudio Desktop</a>.</p></li>
<li><p>Start RStudio Desktop.</p></li>
</ol>
<p>(Optional) To create an RStudio project:</p>
<ol class="arabic simple">
<li><p>Start RStudio Desktop.</p></li>
<li><p>Click <strong>File &gt; New Project</strong>.</p></li>
<li><p>Select <strong>New Directory &gt; New Project</strong>.</p></li>
<li><p>Choose a new directory for the project, and then click <strong>Create Project</strong>.</p></li>
</ol>
<p>To create an R script:</p>
<ol class="arabic simple">
<li><p>With the project open, click <strong>File &gt; New File &gt; R Script</strong>.</p></li>
<li><p>Click <strong>File &gt; Save As</strong>.</p></li>
<li><p>Name the file, and then click <strong>Save</strong>.</p></li>
</ol>
<p>To connect to the remote Databricks cluster or SQL warehouse through ODBC for R:</p>
<ol class="arabic">
<li><p>Get the <strong>Server hostname</strong>, <strong>Port</strong>, and <strong>HTTP path</strong> values for your remote <a class="reference internal" href="../integrations/jdbc-odbc-bi.html#connection-details-cluster"><span class="std std-ref">cluster</span></a> or <a class="reference internal" href="../integrations/jdbc-odbc-bi.html#connection-details-sql-warehouse"><span class="std std-ref">SQL warehouse</span></a>. For a cluster, these values are on the <strong>JDBC/ODBC</strong> tab of <strong>Advanced options</strong>. For a SQL warehouse, these values are on the <strong>Connection details</strong> tab.</p></li>
<li><p>Get a Databricks <a class="reference internal" href="../dev-tools/auth/pat.html"><span class="doc">personal access token</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a security best practice when you authenticate with automated tools, systems, scripts, and apps, Databricks recommends that you use OAuth tokens.</p>
<p>If you use personal access token authentication, Databricks recommends using personal access tokens belonging to <a class="reference internal" href="../administration-guide/users-groups/service-principals.html"><span class="doc">service principals</span></a> instead of workspace users. To create tokens for service principals, see <a class="reference internal" href="../administration-guide/users-groups/service-principals.html#personal-access-tokens"><span class="std std-ref">Manage tokens for a service principal</span></a>.</p>
</div>
</li>
<li><p>Install and configure the Databricks ODBC driver for <a class="reference internal" href="../integrations/jdbc-odbc-bi.html#odbc-windows"><span class="std std-ref">Windows</span></a>, <a class="reference internal" href="../integrations/jdbc-odbc-bi.html#odbc-mac"><span class="std std-ref">macOS</span></a>, or <a class="reference internal" href="../integrations/jdbc-odbc-bi.html#odbc-linux"><span class="std std-ref">Linux</span></a>, based on your local machine’s operating system.</p></li>
<li><p>Set up an ODBC Data Source Name (DSN) to your remote cluster or SQL warehouse for <a class="reference internal" href="../integrations/jdbc-odbc-bi.html#odbc-windows"><span class="std std-ref">Windows</span></a>, <a class="reference internal" href="../integrations/jdbc-odbc-bi.html#odbc-mac"><span class="std std-ref">macOS</span></a>, or <a class="reference internal" href="../integrations/jdbc-odbc-bi.html#odbc-linux"><span class="std std-ref">Linux</span></a>, based on your local machine’s operating system.</p></li>
<li><p>From the RStudio console (<strong>View &gt; Move Focus to Console</strong>), install the <a class="reference external" href="https://solutions.rstudio.com/db/r-packages/odbc/">odbc</a> and <a class="reference external" href="https://dbi.r-dbi.org/">DBI</a> packages from <a class="reference external" href="http://cran.us.r-project.org">CRAN</a>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">require</span><span class="p">(</span><span class="n">devtools</span><span class="p">)</span>

<span class="nf">install_version</span><span class="p">(</span>
<span class="w">  </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;odbc&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="n">repos</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;http://cran.us.r-project.org&quot;</span>
<span class="p">)</span>

<span class="nf">install_version</span><span class="p">(</span>
<span class="w">  </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;DBI&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="n">repos</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;http://cran.us.r-project.org&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Back in your R script (<strong>View &gt; Move Focus to Source</strong>), load the installed <code class="docutils literal notranslate"><span class="pre">odbc</span></code> and <code class="docutils literal notranslate"><span class="pre">DBI</span></code> packages:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">odbc</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">DBI</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Call the ODBC version of the <a class="reference external" href="https://rdrr.io/cran/odbc/man/dbConnect-OdbcDriver-method.html">dbConnect</a> function in the <code class="docutils literal notranslate"><span class="pre">DBI</span></code> package, specifying the <code class="docutils literal notranslate"><span class="pre">odbc</span></code> driver in the <code class="docutils literal notranslate"><span class="pre">odbc</span></code> package as well as the ODBC DSN that you created, for example, an ODBC DSN of <code class="docutils literal notranslate"><span class="pre">Databricks</span></code>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">dbConnect</span><span class="p">(</span>
<span class="w">  </span><span class="n">drv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">odbc</span><span class="p">(),</span>
<span class="w">  </span><span class="n">dsn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Databricks&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Call an operation through the ODBC DSN, for instance a <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> statement through the <a class="reference external" href="https://www.rdocumentation.org/packages/DBI/versions/0.5-1/topics/dbGetQuery">dbGetQuery</a> function in the <code class="docutils literal notranslate"><span class="pre">DBI</span></code> package, specifying the name of the connection variable and the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> statement itself, for example from a table named <code class="docutils literal notranslate"><span class="pre">diamonds</span></code> in a schema (database) named <code class="docutils literal notranslate"><span class="pre">default</span></code>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">print</span><span class="p">(</span><span class="nf">dbGetQuery</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;SELECT * FROM default.diamonds LIMIT 2&quot;</span><span class="p">))</span>
</pre></div>
</div>
</li>
</ol>
<p>The complete R script is as follows:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">odbc</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">DBI</span><span class="p">)</span>

<span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">dbConnect</span><span class="p">(</span>
<span class="w">  </span><span class="n">drv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">odbc</span><span class="p">(),</span>
<span class="w">  </span><span class="n">dsn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Databricks&quot;</span>
<span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="nf">dbGetQuery</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;SELECT * FROM default.diamonds LIMIT 2&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>To run the script, in source view, click <strong>Source</strong>. The results for the preceding R script are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>  _c0 carat     cut color clarity depth table price    x    y    z
1   1  0.23   Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43
2   2  0.21 Premium     E     SI1  59.8    61   326 3.89 3.84 2.31
</pre></div>
</div>
</div>
<div class="section" id="connect-using-rstudio-server">
<span id="rstudio-server"></span><h2>Connect using RStudio Server<a class="headerlink" href="#connect-using-rstudio-server" title="Permalink to this headline"> </a></h2>
<p>Use your web browser to sign in to your Databricks workspace and then connect to a Databricks cluster that has <a class="reference external" href="https://www.rstudio.com/products/rstudio/#rstudio-server">RStudio Server</a> installed, within that workspace.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As an alternative to RStudio Server, you can use <a class="reference internal" href="#rstudio-desktop"><span class="std std-ref">RStudio Desktop</span></a> to connect to a Databricks cluster or SQL warehouse from your local development machine through an ODBC connection, and call ODBC package functions for R. You cannot use packages such as <a class="reference internal" href="overview.html"><span class="doc">SparkR</span></a> or <a class="reference internal" href="sparklyr.html"><span class="doc">sparklyr</span></a> in the RStudio Desktop scenario, unless you also use <a class="reference internal" href="../dev-tools/databricks-connect/index.html"><span class="doc">Databricks Connect</span></a>.</p>
</div>
<p>For RStudio Server, you can use either the Open Source Edition or RStudio Workbench (previously RStudio Server Pro) edition on Databricks. If you want to use RStudio Workbench / RStudio Server Pro, you must transfer your existing RStudio Workbench / RStudio Server Pro license to Databricks (see <a class="reference internal" href="#rsp"><span class="std std-ref">Get started: RStudio Workbench</span></a>).</p>
<p>Databricks recommends that you use Databricks Runtime for Machine Learning (Databricks Runtime ML) on Databricks clusters with RStudio Server, to reduce cluster start times. Databricks Runtime ML includes an unmodified version of the RStudio Server Open Source Edition package for which the source code can be found in <a class="reference external" href="https://github.com/rstudio/rstudio/">GitHub</a>. The following table lists the version of RStudio Server Open Source Edition that is currently preinstalled on Databricks Runtime ML versions.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 59%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Databricks Runtime for ML Version</p></th>
<th class="head"><p>RStudio Server Version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p> Databricks Runtime 7.3 LTS ML</p></td>
<td><p> 1.2</p></td>
</tr>
<tr class="row-odd"><td><p> Databricks Runtime 9.1 LTS ML and 10.4 LTS ML</p></td>
<td><p> 1.4</p></td>
</tr>
</tbody>
</table>
<p></p>
</div>
<div class="section" id="rstudio-integration-architecture">
<span id="rsf"></span><h2>RStudio integration architecture<a class="headerlink" href="#rstudio-integration-architecture" title="Permalink to this headline"> </a></h2>
<p>When you use RStudio Server on Databricks, the RStudio Server Daemon runs on the driver node of a Databricks cluster. The RStudio web UI is proxied through Databricks webapp, which means that you do not need to make any changes to your cluster network configuration. This diagram demonstrates the RStudio integration component architecture.</p>
<div class="figure align-default">
<img alt="Architecture of RStudio on Databricks" src="../_images/rstudio-architecture.png" />
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Databricks proxies the RStudio web service from port 8787 on the cluster’s Spark driver. This web proxy is intended for use only with RStudio. If you launch other web services on port 8787, you might expose your users to potential security exploits.
Databricks is not responsible for any issues that result from the installation of unsupported software on a cluster.</p>
</div>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"> </a></h3>
<ul class="simple">
<li><p>The cluster must be an all-purpose cluster.</p></li>
<li><p>You must have <strong>Can Attach To</strong> permission for that cluster. The cluster admin can grant you this permission. See <a class="reference internal" href="../security/auth-authz/access-control/cluster-acl.html"><span class="doc">Cluster access control</span></a>.</p></li>
</ul>
<ul class="simple">
<li><p>The cluster <em>must not</em> have <a class="reference internal" href="../data-governance/table-acls/object-privileges.html"><span class="doc">table access control</span></a>, <a class="reference internal" href="../compute/clusters-manage.html#automatic-termination"><span class="std std-ref">automatic termination</span></a>, or <a class="reference internal" href="../archive/credential-passthrough/index.html"><span class="doc">credential passthrough</span></a> enabled.</p></li>
</ul>
<ul class="simple">
<li><p>The cluster <em>must not</em> use the <strong>Shared</strong> <a class="reference internal" href="../compute/configure.html#access-mode"><span class="std std-ref">access mode</span></a>.</p></li>
<li><p>The cluster <em>must not</em> have the Spark configuration <code class="docutils literal notranslate"><span class="pre">spark.databricks.pyspark.enableProcessIsolation</span></code> set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p>You must have an RStudio Server floating Pro license to use the Pro edition.</p></li>
</ul>
</div>
</div>
<div class="section" id="get-started-rstudio-server-os-edition">
<h2>Get started: RStudio Server OS Edition<a class="headerlink" href="#get-started-rstudio-server-os-edition" title="Permalink to this headline"> </a></h2>
<p>RStudio Server Open Source Edition is preinstalled on Databricks clusters that use Databricks Runtime for Machine Learning (Databricks Runtime ML).</p>
<p>To open RStudio Server OS Edition on a cluster, do the following:</p>
<ol class="arabic">
<li><p>Open the cluster’s details page.</p></li>
<li><p>Start the cluster, and then click the <strong>Apps</strong> tab:</p>
<div class="figure align-default">
<img alt="Cluster Apps tab" src="../_images/rstudio-apps-ui.png" />
</div>
</li>
<li><p>On the <strong>Apps</strong> tab, click the <strong>Set up RStudio</strong> button. This generates a one-time password for you. Click the <strong>show</strong> link to display it and copy the password.</p>
<div class="figure align-default">
<img alt="RStudio one-time password" src="../_images/rstudio-password-ui.png" />
</div>
</li>
<li><p>Click the <strong>Open RStudio</strong> link to open the UI in a new tab. Enter your username and password in the login form and sign in.</p>
<div class="figure align-default">
<img alt="RStudio login form" src="../_images/rstudio-login-ui.png" />
</div>
</li>
<li><p>From the RStudio UI, you can import the <code class="docutils literal notranslate"><span class="pre">SparkR</span></code> package and set up a <code class="docutils literal notranslate"><span class="pre">SparkR</span></code> session to launch Spark jobs on your cluster.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">SparkR</span><span class="p">)</span>

<span class="nf">sparkR.session</span><span class="p">()</span>

<span class="c1"># Query the first two rows of a table named &quot;diamonds&quot; in a</span>
<span class="c1"># schema (database) named &quot;default&quot; and display the query result.</span>
<span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">SparkR</span><span class="o">::</span><span class="nf">sql</span><span class="p">(</span><span class="s">&quot;SELECT * FROM default.diamonds LIMIT 2&quot;</span><span class="p">)</span>
<span class="nf">showDF</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="RStudio Open Source Edition session" src="../_images/rstudio-session-ui.png" />
</div>
</li>
<li><p>You can also attach the <a class="reference internal" href="sparklyr.html"><span class="doc">sparklyr</span></a> package and set up a Spark connection.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">sparklyr</span><span class="p">)</span>

<span class="n">sc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">spark_connect</span><span class="p">(</span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;databricks&quot;</span><span class="p">)</span>

<span class="c1"># Query a table named &quot;diamonds&quot; and display the first two rows.</span>
<span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">spark_read_table</span><span class="p">(</span><span class="n">sc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sc</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;diamonds&quot;</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="RStudio Open Source Edition sparklyr connection" src="../_images/rstudio-session-ui-sparklyr.png" />
</div>
</li>
</ol>
</div>
<div class="section" id="get-started-rstudio-workbench">
<span id="rsp"></span><h2>Get started: RStudio Workbench<a class="headerlink" href="#get-started-rstudio-workbench" title="Permalink to this headline"> </a></h2>
<p>This section shows you how to set up and start using RStudio Workbench (formerly RStudio Server Pro) on a Databricks cluster. See an <a class="reference external" href="https://support.rstudio.com/hc/en-us/articles/1500012472761">FAQ about the name change</a>. Depending on your license, RStudio Workbench may include RStudio Server Pro.</p>
<div class="section" id="set-up-rstudio-license-server">
<h3>Set up RStudio license server<a class="headerlink" href="#set-up-rstudio-license-server" title="Permalink to this headline"> </a></h3>
<p>To use RStudio Workbench on Databricks, you need to convert your Pro License to a <a class="reference external" href="https://support.rstudio.com/hc/articles/115011574507-Floating-Licenses">floating license</a>. For assistance, contact <a class="reference external" href="mailto:help&#37;&#52;&#48;rstudio&#46;com">help<span>&#64;</span>rstudio<span>&#46;</span>com</a>. When your license is converted, you must set up a <a class="reference external" href="https://www.rstudio.com/floating-license-servers/">license server</a> for RStudio Workbench.</p>
<p>To set up a license server:</p>
<ol class="arabic simple">
<li><p>Launch a small instance on your cloud provider network; the license server daemon is very lightweight.</p></li>
<li><p>Download and install the corresponding version of RStudio License Server on your instance, and start the service. For detailed instructions, see <a class="reference external" href="https://docs.rstudio.com/ide/server-pro/license_management/floating_licensing.html">RStudio Workbench Admin Guide</a>.</p></li>
<li><p>Make sure that the license server port is open to Databricks instances.</p></li>
</ol>
</div>
<div class="section" id="install-rstudio-workbench">
<h3>Install RStudio Workbench<a class="headerlink" href="#install-rstudio-workbench" title="Permalink to this headline"> </a></h3>
<p>To set up RStudio Workbench on a Databricks cluster, you must create an init script to install the RStudio Workbench binary package and configure it to use your license server for license lease. See <a class="reference internal" href="../init-scripts/cluster-scoped.html"><span class="doc">Use cluster-scoped init scripts</span></a> for more details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you plan to install RStudio Workbench on a Databricks Runtime version that already includes RStudio Server Open Source Edition package, you need to first uninstall that package for installation to succeed.</p>
</div>
<p>The following is an example notebook cell that generates an init script on DBFS. The script also performs additional authentication configurations that streamline integration with Databricks.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>All users have <a class="reference internal" href="../dbfs/index.html"><span class="doc">read and write access to DBFS</span></a>, so the init script can be modified by any user. If this is a potential issue for you, Databricks recommends that you put the init script on S3 and restrict permissions to it.</p></li>
</ul>
<ul class="simple">
<li><p>You may need to modify the package URL depending on the Ubuntu version of your runtime, which you can find in the <a class="reference internal" href="../release-notes/runtime/index.html"><span class="doc">release notes</span></a>.</p></li>
</ul>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">script</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;#!/bin/bash</span>

<span class="s2">set -euxo pipefail</span>

<span class="s2">if [[ $DB_IS_DRIVER = &quot;TRUE&quot; ]]; then</span>
<span class="s2">  sudo apt-get update</span>
<span class="s2">  sudo dpkg --purge rstudio-server # in case open source version is installed.</span>
<span class="s2">  sudo apt-get install -y gdebi-core alien</span>

<span class="s2">  ## Installing RStudio Workbench</span>
<span class="s2">  cd /tmp</span>

<span class="s2">  # You can find new releases at https://rstudio.com/products/rstudio/download-commercial/debian-ubuntu/.</span>
<span class="s2">  wget https://download2.rstudio.org/server/bionic/amd64/rstudio-workbench-2022.02.1-461.pro1-amd64.deb -O rstudio-workbench.deb</span>
<span class="s2">  sudo gdebi -n rstudio-workbench.deb</span>

<span class="s2">  ## Configuring authentication</span>
<span class="s2">  sudo echo &#39;auth-proxy=1&#39; &gt;&gt; /etc/rstudio/rserver.conf</span>
<span class="s2">  sudo echo &#39;auth-proxy-user-header-rewrite=^(.*)$ $1&#39; &gt;&gt; /etc/rstudio/rserver.conf</span>
<span class="s2">  sudo echo &#39;auth-proxy-sign-in-url=&lt;domain&gt;/login.html&#39; &gt;&gt; /etc/rstudio/rserver.conf</span>
<span class="s2">  sudo echo &#39;admin-enabled=1&#39; &gt;&gt; /etc/rstudio/rserver.conf</span>
<span class="s2">  sudo echo &#39;export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&#39; &gt;&gt; /etc/rstudio/rsession-profile</span>

<span class="s2">  # Enabling floating license</span>
<span class="s2">  sudo echo &#39;server-license-type=remote&#39; &gt;&gt; /etc/rstudio/rserver.conf</span>

<span class="s2">  # Session configurations</span>
<span class="s2">  sudo echo &#39;session-rprofile-on-resume-default=1&#39; &gt;&gt; /etc/rstudio/rsession.conf</span>
<span class="s2">  sudo echo &#39;allow-terminal-websockets=0&#39; &gt;&gt; /etc/rstudio/rsession.conf</span>

<span class="s2">  sudo rstudio-server license-manager license-server &lt;license-server-url&gt;</span>
<span class="s2">  sudo rstudio-server restart || true</span>
<span class="s2">fi</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">dbutils</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">mkdirs</span><span class="p">(</span><span class="s2">&quot;/databricks/rstudio&quot;</span><span class="p">)</span>
<span class="n">dbutils</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;/databricks/rstudio/rstudio-install.sh&quot;</span><span class="p">,</span> <span class="n">script</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;domain&gt;</span></code> with your Databricks URL and <code class="docutils literal notranslate"><span class="pre">&lt;license-server-url&gt;</span></code> with the URL of your floating license server.</p></li>
<li><p>Run the code in a notebook to install the script at <code class="docutils literal notranslate"><span class="pre">dbfs:/databricks/rstudio/rstudio-install.sh</span></code></p></li>
<li><p>Before launching a cluster add <code class="docutils literal notranslate"><span class="pre">dbfs:/databricks/rstudio/rstudio-install.sh</span></code> as an init script. See <a class="reference internal" href="../init-scripts/cluster-scoped.html"><span class="doc">Use cluster-scoped init scripts</span></a> for details.</p></li>
<li><p>Launch the cluster.</p></li>
</ol>
</div>
</div>
<div class="section" id="use-rstudio-server-pro">
<h2>Use RStudio Server Pro<a class="headerlink" href="#use-rstudio-server-pro" title="Permalink to this headline"> </a></h2>
<ol class="arabic">
<li><p>Open the cluster’s details page.</p></li>
<li><p>Start the cluster, and click the <strong>Apps</strong> tab:</p>
<div class="figure align-default">
<img alt="Cluster Apps tab" src="../_images/rstudio-apps-ui.png" />
</div>
</li>
<li><p>On the <strong>Apps</strong> tab, click the <strong>Set up RStudio</strong> button.</p>
<div class="figure align-default">
<img alt="RStudio one-time password" src="../_images/rstudio-password-ui.png" />
</div>
</li>
<li><p>You do not need the one-time password. Click the <strong>Open RStudio UI</strong> link and it will open an authenticated RStudio Pro session for you.</p></li>
<li><p>From the RStudio UI, you can attach the <code class="docutils literal notranslate"><span class="pre">SparkR</span></code> package and set up a <code class="docutils literal notranslate"><span class="pre">SparkR</span></code> session to launch Spark jobs on your cluster.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">SparkR</span><span class="p">)</span>

<span class="nf">sparkR.session</span><span class="p">()</span>

<span class="c1"># Query the first two rows of a table named &quot;diamonds&quot; in a</span>
<span class="c1"># schema (database) named &quot;default&quot; and display the query result.</span>
<span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">SparkR</span><span class="o">::</span><span class="nf">sql</span><span class="p">(</span><span class="s">&quot;SELECT * FROM default.diamonds LIMIT 2&quot;</span><span class="p">)</span>
<span class="nf">showDF</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="RStudio Pro session" src="../_images/rstudio-pro-session-ui.png" />
</div>
</li>
<li><p>You can also attach the <a class="reference internal" href="sparklyr.html"><span class="doc">sparklyr</span></a> package and set up a Spark connection.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">sparklyr</span><span class="p">)</span>

<span class="n">sc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">spark_connect</span><span class="p">(</span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;databricks&quot;</span><span class="p">)</span>

<span class="c1"># Query a table named &quot;diamonds&quot; and display the first two rows.</span>
<span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">spark_read_table</span><span class="p">(</span><span class="n">sc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sc</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;diamonds&quot;</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="RStudio Pro sparklyr connection" src="../_images/rstudio-pro-session-ui-sparklyr.png" />
</div>
</li>
</ol>
</div>
<div class="section" id="rstudio-server-faq">
<h2>RStudio Server FAQ<a class="headerlink" href="#rstudio-server-faq" title="Permalink to this headline"> </a></h2>
<div class="section" id="what-is-the-difference-between-rstudio-server-open-source-edition-and-rstudio-workbench">
<h3>What is the difference between RStudio Server Open Source Edition and RStudio Workbench?<a class="headerlink" href="#what-is-the-difference-between-rstudio-server-open-source-edition-and-rstudio-workbench" title="Permalink to this headline"> </a></h3>
<p>RStudio Workbench supports a wide range of enterprise features that are not available on the Open Source Edition. You can see the feature comparison on <a class="reference external" href="https://www.rstudio.com/products/rstudio/#Server">RStudio’s website</a>.</p>
<p>In addition, RStudio Server Open Source Edition is distributed under the <a class="reference external" href="https://www.gnu.org/licenses/agpl-3.0.en.html">GNU Affero General Public License (AGPL)</a>, while the Pro version comes with a commercial license for organizations that are not able to use AGPL software.</p>
<p>Finally, RStudio Workbench comes with professional and enterprise support from RStudio, PBC, while RStudio Server Open Source Edition comes with no support.</p>
</div>
<div class="section" id="can-i-use-my-rstudio-workbench--rstudio-server-pro-license-on-databricks">
<h3>Can I use my RStudio Workbench / RStudio Server Pro license on Databricks?<a class="headerlink" href="#can-i-use-my-rstudio-workbench--rstudio-server-pro-license-on-databricks" title="Permalink to this headline"> </a></h3>
<p>Yes, if you already have a Pro or Enterprise license for RStudio Server, you can use that license on Databricks. See <a class="reference internal" href="#rsp"><span class="std std-ref">Get started: RStudio Workbench</span></a> to learn how to set up RStudio Workbench on Databricks.</p>
</div>
<div class="section" id="where-does-rstudio-server-run-do-i-need-to-manage-any-additional-servicesservers">
<h3>Where does RStudio Server run? Do I need to manage any additional services/servers?<a class="headerlink" href="#where-does-rstudio-server-run-do-i-need-to-manage-any-additional-servicesservers" title="Permalink to this headline"> </a></h3>
<p>As you can see on the diagram in <a class="reference internal" href="#rsf"><span class="std std-ref">RStudio integration architecture</span></a>, the RStudio Server daemon runs on the driver (master) node of your Databricks cluster. With RStudio Server Open Source Edition, you do not need to run any additional servers/services. However, for RStudio Workbench, you must manage a separate instance that runs RStudio License Server.</p>
</div>
<div class="section" id="can-i-use-rstudio-server-on-a-standard-cluster">
<span id="where-does-rstudio-server-run-do-i-need-to-manage-any-additional-servicesservers"></span><h3>Can I use RStudio Server on a standard cluster?<a class="headerlink" href="#can-i-use-rstudio-server-on-a-standard-cluster" title="Permalink to this headline"> </a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This article describes the legacy clusters UI. For information about the new clusters UI (in preview), including terminology changes for cluster access modes, see <a class="reference internal" href="../compute/configure.html"><span class="doc">Create a cluster</span></a>. For a comparison of the new and legacy cluster types, see <a class="reference internal" href="../archive/compute/cluster-ui-preview.html"><span class="doc">Clusters UI changes and cluster access modes</span></a>.</p>
</div>
<p>Yes, you can.</p>
</div>
<div class="section" id="can-i-use-rstudio-server-on-a-cluster-with-auto-termination">
<span id="auto-termination"></span><h3>Can I use RStudio Server on a cluster with auto termination?<a class="headerlink" href="#can-i-use-rstudio-server-on-a-cluster-with-auto-termination" title="Permalink to this headline"> </a></h3>
<p>No, you can’t use RStudio when auto termination is enabled. Auto termination can purge unsaved user scripts and data inside an RStudio session. To protect users against this unintended data loss scenario, RStudio is disabled on such clusters by default.</p>
<p>For customers who require cleaning up cluster resources when they are not used, Databricks recommends using <a class="reference external" href="https://docs.databricks.com/api/workspace/clusters">cluster APIs</a> to clean up RStudio clusters based on a schedule.</p>
</div>
<div class="section" id="how-should-i-persist-my-work-on-rstudio">
<h3>How should I persist my work on RStudio?<a class="headerlink" href="#how-should-i-persist-my-work-on-rstudio" title="Permalink to this headline"> </a></h3>
<p>We strongly recommend that you persist your work using a version control system from RStudio. RStudio has great support for various version control systems and allows you to check in and manage your projects. If you do not persist your code through one of the following methods, you risk losing your work if a workspace admin restarts or terminates the cluster.</p>
<p>One method is to save your files (code or data) on the <a class="reference internal" href="../dbfs/index.html"><span class="doc">What is the Databricks File System (DBFS)?</span></a>. For example, if you save a file under <code class="docutils literal notranslate"><span class="pre">/dbfs/</span></code> the files will not be deleted when your cluster is terminated or restarted.</p>
<p>Another method is to save the R notebook to your local file system by exporting it as <code class="docutils literal notranslate"><span class="pre">Rmarkdown</span></code>, then later importing the file into the RStudio instance. The blog <a class="reference external" href="https://databricks.com/blog/2018/07/06/sharing-r-notebooks-using-rmarkdown.html">Sharing R Notebooks using RMarkdown</a> describes the steps in more detail.</p>
<p>Another method is to mount an Amazon Elastic File System (Amazon EFS) volume to your cluster, so that when the cluster is shut down you won’t lose your work. When the cluster restarts, Databricks remounts the Amazon EFS volume, and you can continue where you left off. To mount an existing Amazon EFS volume to a cluster, call the <a class="reference external" href="https://docs.databricks.com/api/workspace/clusters">create cluster</a> (<code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/api/2.0/clusters/create</span></code>) or <a class="reference external" href="https://docs.databricks.com/api/workspace/clusters">edit cluster</a> (<code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/api/2.0/clusters/edit</span></code>) operation in the Clusters API 2.0, specifying the Amazon EFS volume’s mount information in the operation’s <code class="docutils literal notranslate"><span class="pre">cluster_mount_infos</span></code> array.</p>
<p>Make sure the cluster that you create or use does not have Unity Catalog, auto termination, or auto scaling enabled. Also make sure that the cluster has write access to the mounted volume, for example by running the command <code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">a+w</span> <span class="pre">&lt;/path/to/volume&gt;</span></code> on the cluster. You can run this command on an existing cluster through the cluster’s <a class="reference internal" href="../compute/web-terminal.html"><span class="doc">web terminal</span></a>, or on a new cluster by using an <a class="reference internal" href="../init-scripts/index.html"><span class="doc">init script</span></a> that you specify in the preceding operation’s <code class="docutils literal notranslate"><span class="pre">init_scripts</span></code> array.</p>
<p>If you do not have an existing Amazon EFS volume, you can create one. First, contact your Databricks administrator and get the VPC ID, public subnet ID, and security group ID for your Databricks workspace. Then use this information, along with the AWS Management Console, to <a class="reference external" href="https://docs.aws.amazon.com/efs/latest/ug/creating-using-create-fs.html#creating-using-fs-part1-console">create a file system with custom settings using the Amazon EFS console</a>. In the last step of this procedure, click <strong>Attach</strong> and copy the DNS name and mount options, which you specify in the preceding <code class="docutils literal notranslate"><span class="pre">cluster_mount_infos</span></code> array.</p>
</div>
<div class="section" id="how-do-i-start-a-sparkr-session">
<h3>How do I start a <code class="docutils literal notranslate"><span class="pre">SparkR</span></code> session?<a class="headerlink" href="#how-do-i-start-a-sparkr-session" title="Permalink to this headline"> </a></h3>
<p><code class="docutils literal notranslate"><span class="pre">SparkR</span></code> is contained in Databricks Runtime, but you must load it into RStudio. Run the following code inside RStudio to initialize a <code class="docutils literal notranslate"><span class="pre">SparkR</span></code> session.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">SparkR</span><span class="p">)</span>

<span class="nf">sparkR.session</span><span class="p">()</span>
</pre></div>
</div>
<p>If there is an error importing the <code class="docutils literal notranslate"><span class="pre">SparkR</span></code> package, run <code class="docutils literal notranslate"><span class="pre">.libPaths()</span></code> and verify that <code class="docutils literal notranslate"><span class="pre">/home/ubuntu/databricks/spark/R/lib</span></code> is included in the result.</p>
<p>If it is not included, check the content of <code class="docutils literal notranslate"><span class="pre">/usr/lib/R/etc/Rprofile.site</span></code>. List <code class="docutils literal notranslate"><span class="pre">/home/ubuntu/databricks/spark/R/lib/SparkR</span></code> on the driver to verify that the <code class="docutils literal notranslate"><span class="pre">SparkR</span></code> package is installed.</p>
</div>
<div class="section" id="how-do-i-start-a-sparklyr-session">
<h3>How do I start a <code class="docutils literal notranslate"><span class="pre">sparklyr</span></code> session?<a class="headerlink" href="#how-do-i-start-a-sparklyr-session" title="Permalink to this headline"> </a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">sparklyr</span></code> package must be installed on the cluster. Use one of the following methods to install the <code class="docutils literal notranslate"><span class="pre">sparklyr</span></code> package:</p>
<ul class="simple">
<li><p>As a Databricks library</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">install.packages()</span></code> command</p></li>
<li><p>RStudio package management UI</p></li>
</ul>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">sparklyr</span><span class="p">)</span>

<span class="n">sc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">spark_connect</span><span class="p">(</span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>“<span class="n">databricks</span>”<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="how-does-rstudio-integrate-with-databricks-r-notebooks">
<h3>How does RStudio integrate with Databricks R notebooks?<a class="headerlink" href="#how-does-rstudio-integrate-with-databricks-r-notebooks" title="Permalink to this headline"> </a></h3>
<p>You can move your work between notebooks and RStudio through version control.</p>
</div>
<div class="section" id="what-is-the-working-directory">
<h3>What is the working directory?<a class="headerlink" href="#what-is-the-working-directory" title="Permalink to this headline"> </a></h3>
<p>When you start a project in RStudio, you choose a working directory. By default this is the home directory on the driver (master) container where RStudio Server is running. You can change this directory if you want.</p>
<p></p>
</div>
<div class="section" id="can-i-launch-shiny-apps-from-rstudio-running-on-databricks">
<span id="what-is-the-working-directory"></span><h3>Can I launch Shiny Apps from RStudio running on Databricks?<a class="headerlink" href="#can-i-launch-shiny-apps-from-rstudio-running-on-databricks" title="Permalink to this headline"> </a></h3>
<p>Yes, you can develop and view <a class="reference internal" href="shiny.html"><span class="doc">Shiny applications inside RStudio Server on Databricks</span></a>.</p>
</div>
<div class="section" id="i-cant-use-terminal-or-git-inside-rstudio-on-databricks-how-can-i-fix-that">
<h3>I can’t use terminal or git inside RStudio on Databricks. How can I fix that?<a class="headerlink" href="#i-cant-use-terminal-or-git-inside-rstudio-on-databricks-how-can-i-fix-that" title="Permalink to this headline"> </a></h3>
<p>Make sure that you have disabled websockets. In RStudio Server Open Source Edition, you can do this from the UI.</p>
<div class="figure align-default">
<img alt="RStudio Session" src="../_images/rstudio-terminal-options.png" />
</div>
<p>In RStudio Server Pro, you can add <code class="docutils literal notranslate"><span class="pre">allow-terminal-websockets=0</span></code> to <code class="docutils literal notranslate"><span class="pre">/etc/rstudio/rsession.conf</span></code> to disable websockets for all users.</p>
</div>
<div class="section" id="i-dont-see-the-apps-tab-under-cluster-details">
<h3>I don’t see the Apps tab under cluster details.<a class="headerlink" href="#i-dont-see-the-apps-tab-under-cluster-details" title="Permalink to this headline"> </a></h3>
<p>This feature is not available to all customers. You must be on the <a class="reference external" href="https://databricks.com/product/pricing/platform-addons">Premium plan or above</a>.</p>
</div>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../_static/js/localized.js"></script>
  <script type="text/javascript" src="../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>