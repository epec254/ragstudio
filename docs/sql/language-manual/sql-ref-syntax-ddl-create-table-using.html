

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to use the CREATE TABLE [USING] syntax of the SQL language in Databricks SQL and Databricks Runtime." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="CREATE TABLE [USING]">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>CREATE TABLE [USING] &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/sql/language-manual/sql-ref-syntax-ddl-create-table-using.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/sql/language-manual/sql-ref-syntax-ddl-create-table-using.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/sql/language-manual/sql-ref-syntax-ddl-create-table-using.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="top" title="Databricks on AWS" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../../en/sql/language-manual/sql-ref-syntax-ddl-create-table-using.html" class="notranslate">English</option>
    <option value="../../../ja/sql/language-manual/sql-ref-syntax-ddl-create-table-using.html" class="notranslate">日本語</option>
    <option value="../../../pt/sql/language-manual/sql-ref-syntax-ddl-create-table-using.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>CREATE TABLE [USING]</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="create-table-[using]">
<span id="create-table-using"></span><h1>CREATE TABLE [USING]<a class="headerlink" href="#create-table-[using]" title="Permalink to this headline"> </a></h1>
<p><strong>Applies to:</strong> <img alt="check marked yes" src="../../_images/check.png" /> Databricks SQL <img alt="check marked yes" src="../../_images/check.png" /> Databricks Runtime</p>
<p>Defines a managed or <a class="reference internal" href="sql-ref-external-tables.html"><span class="doc">external table</span></a>, optionally using a data source.</p>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline"> </a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="p">{</span> <span class="p">[</span><span class="n">CREATE</span> <span class="n">OR</span><span class="p">]</span> <span class="n">REPLACE</span> <span class="n">TABLE</span> <span class="o">|</span> <span class="n">CREATE</span> <span class="p">[</span><span class="n">EXTERNAL</span><span class="p">]</span> <span class="n">TABLE</span> <span class="p">[</span> <span class="n">IF</span> <span class="n">NOT</span> <span class="n">EXISTS</span> <span class="p">]</span> <span class="p">}</span>
  <span class="n">table_name</span>
  <span class="p">[</span> <span class="n">table_specification</span> <span class="p">]</span>
  <span class="p">[</span> <span class="n">USING</span> <span class="n">data_source</span> <span class="p">]</span>
  <span class="p">[</span> <span class="n">table_clauses</span> <span class="p">]</span>
  <span class="p">[</span> <span class="n">AS</span> <span class="n">query</span> <span class="p">]</span> <span class="p">}</span>

<span class="n">table_specification</span>
  <span class="p">(</span> <span class="p">{</span> <span class="n">column_identifier</span> <span class="n">column_type</span> <span class="p">[</span> <span class="n">column_properties</span> <span class="p">]</span> <span class="p">]</span> <span class="p">}</span> <span class="p">[,</span> <span class="o">...</span><span class="p">]</span>
    <span class="p">[</span> <span class="p">,</span> <span class="n">table_constraint</span> <span class="p">]</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span> <span class="p">)</span>

<span class="n">column_properties</span>
  <span class="p">{</span> <span class="n">NOT</span> <span class="n">NULL</span> <span class="o">|</span>
    <span class="n">GENERATED</span> <span class="n">ALWAYS</span> <span class="n">AS</span> <span class="p">(</span> <span class="n">expr</span> <span class="p">)</span> <span class="o">|</span>
    <span class="n">GENERATED</span> <span class="p">{</span> <span class="n">ALWAYS</span> <span class="o">|</span> <span class="n">BY</span> <span class="n">DEFAULT</span> <span class="p">}</span> <span class="n">AS</span> <span class="n">IDENTITY</span> <span class="p">[</span> <span class="p">(</span> <span class="p">[</span> <span class="n">START</span> <span class="n">WITH</span> <span class="n">start</span> <span class="p">]</span> <span class="p">[</span> <span class="n">INCREMENT</span> <span class="n">BY</span> <span class="n">step</span> <span class="p">]</span> <span class="p">)</span> <span class="p">]</span> <span class="o">|</span>
    <span class="n">DEFAULT</span> <span class="n">default_expression</span> <span class="o">|</span>
    <span class="n">COMMENT</span> <span class="n">column_comment</span> <span class="o">|</span>
    <span class="n">column_constraint</span> <span class="o">|</span>
    <span class="n">MASK</span> <span class="n">clause</span> <span class="p">}</span> <span class="p">[</span> <span class="o">...</span> <span class="p">]</span>

<span class="n">table_clauses</span>
  <span class="p">{</span> <span class="n">OPTIONS</span> <span class="n">clause</span> <span class="o">|</span>
    <span class="n">PARTITIONED</span> <span class="n">BY</span> <span class="n">clause</span> <span class="o">|</span>
    <span class="n">clustered_by_clause</span> <span class="o">|</span>
    <span class="n">LOCATION</span> <span class="n">path</span> <span class="p">[</span> <span class="n">WITH</span> <span class="p">(</span> <span class="n">CREDENTIAL</span> <span class="n">credential_name</span> <span class="p">)</span> <span class="p">]</span> <span class="o">|</span>
    <span class="n">COMMENT</span> <span class="n">table_comment</span> <span class="o">|</span>
    <span class="n">TBLPROPERTIES</span> <span class="n">clause</span> <span class="o">|</span>
    <span class="n">WITH</span> <span class="p">{</span> <span class="n">ROW</span> <span class="n">FILTER</span> <span class="n">clause</span> <span class="p">}</span> <span class="p">}</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>

<span class="n">clustered_by_clause</span>
  <span class="p">{</span> <span class="n">CLUSTERED</span> <span class="n">BY</span> <span class="p">(</span> <span class="n">cluster_column</span> <span class="p">[,</span> <span class="o">...</span><span class="p">]</span> <span class="p">)</span>
    <span class="p">[</span> <span class="n">SORTED</span> <span class="n">BY</span> <span class="p">(</span> <span class="p">{</span> <span class="n">sort_column</span> <span class="p">[</span> <span class="n">ASC</span> <span class="o">|</span> <span class="n">DESC</span> <span class="p">]</span> <span class="p">}</span> <span class="p">[,</span> <span class="o">...</span><span class="p">]</span> <span class="p">)</span> <span class="p">]</span>
    <span class="n">INTO</span> <span class="n">num_buckets</span> <span class="n">BUCKETS</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline"> </a></h2>
<ul>
<li><p><strong>REPLACE</strong></p>
<p>If specified replaces the table and its content if it already exists.
This clause is only supported for Delta Lake tables.</p>
<p><code class="docutils literal notranslate"><span class="pre">REPLACE</span></code> preserves the <a class="reference internal" href="../../delta/history.html"><span class="doc">table history</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Databricks strongly recommends using <code class="docutils literal notranslate"><span class="pre">REPLACE</span></code> instead of dropping and re-creating Delta Lake tables.</p>
</div>
</li>
<li><p><strong>EXTERNAL</strong></p>
<p>If specified, creates an <a class="reference internal" href="../../data-governance/unity-catalog/create-tables.html#external-tables"><span class="std std-ref">external table</span></a>.
When creating an external table you must also provide a <code class="docutils literal notranslate"><span class="pre">LOCATION</span></code> clause.
When an external table is dropped the files at the <code class="docutils literal notranslate"><span class="pre">LOCATION</span></code> will not be dropped.</p>
</li>
<li><p><strong>IF NOT EXISTS</strong></p>
<p>If specified and a table with the same name already exists, the statement is ignored.</p>
<p><code class="docutils literal notranslate"><span class="pre">IF</span> <span class="pre">NOT</span> <span class="pre">EXISTS</span></code> cannot coexist with <code class="docutils literal notranslate"><span class="pre">REPLACE</span></code>, which means <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">OR</span> <span class="pre">REPLACE</span> <span class="pre">TABLE</span> <span class="pre">IF</span> <span class="pre">NOT</span> <span class="pre">EXISTS</span></code> is not allowed.</p>
</li>
<li><p><strong><a class="reference internal" href="sql-ref-names.html#table-name"><span class="std std-ref">table_name</span></a></strong></p>
<p>The name of the table to be created. The name must not include a <a class="reference internal" href="sql-ref-names.html#table-name"><span class="std std-ref">temporal specification</span></a>.
If the name is not qualified the table is created in the current schema.</p>
</li>
<li><p><strong>table_specification</strong></p>
<p>This optional clause defines the list of columns, their types, properties, descriptions, and column constraints.</p>
<p>If you do not define columns the table schema you must specify either <code class="docutils literal notranslate"><span class="pre">AS</span> <span class="pre">query</span></code> or <code class="docutils literal notranslate"><span class="pre">LOCATION</span></code>.</p>
<ul>
<li><p><strong><a class="reference internal" href="sql-ref-identifiers.html"><span class="doc">column_identifier</span></a></strong></p>
<p>A unique name for the column.</p>
</li>
<li><p><strong><a class="reference internal" href="sql-ref-datatypes.html"><span class="doc">column_type</span></a></strong></p>
<p>Specifies the data type of the column.
Not all <a class="reference internal" href="sql-ref-datatypes.html"><span class="doc">data types</span></a> supported by Databricks are supported by all data sources.</p>
</li>
<li><p><strong>NOT NULL</strong></p>
<p>If specified the column will not accept <code class="docutils literal notranslate"><span class="pre">NULL</span></code> values. This clause is only supported for Delta Lake tables.</p>
</li>
<li><p><strong>GENERATED ALWAYS AS ( <a class="reference internal" href="sql-ref-expression.html"><span class="doc">expr</span></a> )</strong></p>
<p>When you specify this clause the value of this column is determined by the specified <code class="docutils literal notranslate"><span class="pre">expr</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">expr</span></code> may be composed of literals, column identifiers within the table, and deterministic, built-in SQL functions or operators except:</p>
<ul class="simple">
<li><p><a class="reference internal" href="sql-ref-functions-builtin.html#aggregate-functions"><span class="std std-ref">Aggregate functions</span></a></p></li>
<li><p><a class="reference internal" href="sql-ref-functions-builtin.html#analytic-window-functions"><span class="std std-ref">Analytic window functions</span></a></p></li>
<li><p><a class="reference internal" href="sql-ref-functions-builtin.html#ranking-window-functions"><span class="std std-ref">Ranking window functions</span></a></p></li>
<li><p>Table valued generator functions</p></li>
</ul>
<p>Also <code class="docutils literal notranslate"><span class="pre">expr</span></code> must not contain any <a class="reference internal" href="sql-ref-syntax-qry-query.html"><span class="doc">subquery</span></a>.</p>
</li>
<li><p><strong>GENERATED { ALWAYS | BY DEFAULT } AS IDENTITY [ ( [ START WITH start ] [ INCREMENT BY step ] ) ]</strong></p>
<p><strong>Applies to:</strong> <img alt="check marked yes" src="../../_images/check.png" /> Databricks SQL <img alt="check marked yes" src="../../_images/check.png" /> Databricks Runtime 10.3 and above</p>
<p>Defines an identity column. When you write to the table, and do not provide values for the identity column, it will be automatically assigned a unique and statistically increasing (or decreasing if <code class="docutils literal notranslate"><span class="pre">step</span></code> is negative) value. This clause is only supported for Delta Lake tables. This clause can only be used for columns with BIGINT data type.</p>
<p>The automatically assigned values start with <code class="docutils literal notranslate"><span class="pre">start</span></code> and increment by <code class="docutils literal notranslate"><span class="pre">step</span></code>. Assigned values are unique but are not guaranteed to be contiguous. Both parameters are optional, and the default value is 1. <code class="docutils literal notranslate"><span class="pre">step</span></code> cannot be <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p>If the automatically assigned values are beyond the range of the identity column type, the query will fail.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">ALWAYS</span></code> is used, you cannot provide your own values for the identity column.</p>
<p>The following operations are not supported:</p>
<ul class="simple">
<li><p>PARTITIONED BY an identity column</p></li>
<li><p>UPDATE an identity column</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Declaring an identity column on a Delta table disables concurrent transactions. Only use identity columns in use cases where concurrent writes to the target table are not required.</p>
</div>
</li>
<li><p><strong>DEFAULT default_expression</strong></p>
<p><strong>Applies to:</strong> <img alt="check marked yes" src="../../_images/check.png" /> Databricks SQL <a class="reference internal" href="../release-notes/index.html"><span class="doc">SQL warehouse version 2022.35</span></a> or higher <img alt="check marked yes" src="../../_images/check.png" /> Databricks Runtime 11.2 and above</p>
<p>Defines a <code class="docutils literal notranslate"><span class="pre">DEFAULT</span></code> value for the column which is used on <code class="docutils literal notranslate"><span class="pre">INSERT</span></code>, <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code>, and <code class="docutils literal notranslate"><span class="pre">MERGE</span> <span class="pre">...</span> <span class="pre">INSERT</span></code> when the column is not specified.</p>
<p>If no default is specified <code class="docutils literal notranslate"><span class="pre">DEFAULT</span> <span class="pre">NULL</span></code> is applied for nullable columns.</p>
<p><code class="docutils literal notranslate"><span class="pre">default_expression</span></code> may be composed of literals, and built-in SQL functions or operators except:</p>
<ul class="simple">
<li><p><a class="reference internal" href="sql-ref-functions-builtin.html#aggregate-functions"><span class="std std-ref">Aggregate functions</span></a></p></li>
<li><p><a class="reference internal" href="sql-ref-functions-builtin.html#analytic-window-functions"><span class="std std-ref">Analytic window functions</span></a></p></li>
<li><p><a class="reference internal" href="sql-ref-functions-builtin.html#ranking-window-functions"><span class="std std-ref">Ranking window functions</span></a></p></li>
<li><p>Table valued generator functions</p></li>
</ul>
<p>Also <code class="docutils literal notranslate"><span class="pre">default_expression</span></code> must not contain any <a class="reference internal" href="sql-ref-syntax-qry-query.html"><span class="doc">subquery</span></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">DEFAULT</span></code> is supported for <code class="docutils literal notranslate"><span class="pre">CSV</span></code>, <code class="docutils literal notranslate"><span class="pre">JSON</span></code>, <code class="docutils literal notranslate"><span class="pre">PARQUET</span></code>, and <code class="docutils literal notranslate"><span class="pre">ORC</span></code> sources.</p>
</li>
<li><p><strong>COMMENT column_comment</strong></p>
<p>A string literal to describe the column.</p>
</li>
<li><p><strong><a class="reference internal" href="sql-ref-syntax-ddl-create-table-constraint.html"><span class="doc">column_constraint</span></a></strong></p>
<div class="preview admonition">
<p class="admonition-title">Preview</p>
<p>This feature is in <a class="reference internal" href="../../release-notes/release-types.html"><span class="doc">Public Preview</span></a>.</p>
</div>
<p>Adds a primary key or foreign key constraint to the column in a Delta Lake table.</p>
<p>Constraints are not supported for tables in the <code class="docutils literal notranslate"><span class="pre">hive_metastore</span></code> catalog.</p>
<p>To add a check constraint to a Delta Lake table use <a class="reference internal" href="sql-ref-syntax-ddl-alter-table.html"><span class="doc">ALTER TABLE</span></a>.</p>
</li>
<li><p><strong><a class="reference internal" href="sql-ref-syntax-ddl-column-mask.html"><span class="doc">MASK clause</span></a></strong></p>
<p><strong>Applies to:</strong> <img alt="check marked yes" src="../../_images/check.png" /> Databricks SQL <img alt="check marked yes" src="../../_images/check.png" /> Databricks Runtime 12.2 and above <img alt="check marked yes" src="../../_images/check.png" /> Unity Catalog</p>
<div class="preview admonition">
<p class="admonition-title">Preview</p>
<p>This feature is in <a class="reference internal" href="../../release-notes/release-types.html"><span class="doc">Public Preview</span></a>.</p>
</div>
<p>Adds a column mask function to anonymize sensitive data.
All future queries from that column will receive the result of evaluating
that function over the column in place of the column’s original value.
This can be useful for fine-grained access control purposes wherein the function
can inspect the identity and/or group memberships of the invoking user in order
to decide whether to redact the value.</p>
</li>
<li><p><strong><a class="reference internal" href="sql-ref-syntax-ddl-create-table-constraint.html"><span class="doc">table_constraint</span></a></strong></p>
<p>Adds an informational primary key or informational foreign key constraints to the Delta Lake table.</p>
<p>Key constraints are not supported for tables in the <code class="docutils literal notranslate"><span class="pre">hive_metastore</span></code> catalog.</p>
<p>To add a check constraint to a Delta Lake table use <a class="reference internal" href="sql-ref-syntax-ddl-alter-table.html"><span class="doc">ALTER TABLE</span></a>.</p>
</li>
</ul>
</li>
<li><p><strong>USING data_source</strong></p>
<p>The file format to use for the table. <code class="docutils literal notranslate"><span class="pre">data_source</span></code> must be one of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">AVRO</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BINARYFILE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CSV</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DELTA</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JSON</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ORC</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PARQUET</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></li>
</ul>
<p>The following additional file formats to use for the table are supported in Databricks Runtime:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">JDBC</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LIBSVM</span></code></p></li>
<li><p>a fully-qualified class name of a custom implementation of <code class="docutils literal notranslate"><span class="pre">org.apache.spark.sql.sources.DataSourceRegister</span></code>.</p></li>
</ul>
<p>If <code class="docutils literal notranslate"><span class="pre">USING</span></code> is omitted, the default is <code class="docutils literal notranslate"><span class="pre">DELTA</span></code>.</p>
<p>For any <code class="docutils literal notranslate"><span class="pre">data_source</span></code> other than <code class="docutils literal notranslate"><span class="pre">DELTA</span></code> you must also specify a <code class="docutils literal notranslate"><span class="pre">LOCATION</span></code> unless the table catalog is <code class="docutils literal notranslate"><span class="pre">hive_metastore</span></code>.</p>
<p><strong>The following applies to:</strong> Databricks Runtime</p>
<p><code class="docutils literal notranslate"><span class="pre">HIVE</span></code> is supported to create a Hive SerDe table in Databricks Runtime.
You can specify the Hive-specific <code class="docutils literal notranslate"><span class="pre">file_format</span></code> and <code class="docutils literal notranslate"><span class="pre">row_format</span></code> using the <code class="docutils literal notranslate"><span class="pre">OPTIONS</span></code> clause, which is a case-insensitive string map.
The <code class="docutils literal notranslate"><span class="pre">option_keys</span></code> are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FILEFORMAT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INPUTFORMAT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OUTPUTFORMAT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SERDE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FIELDDELIM</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ESCAPEDELIM</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MAPKEYDELIM</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LINEDELIM</span></code></p></li>
</ul>
</li>
<li><p><strong>table_clauses</strong></p>
<p>Optionally specify location, partitioning, clustering, options, comments, and user defined properties for the new table.
Each sub clause may only be specified once.</p>
<ul>
<li><p><strong><a class="reference internal" href="sql-ref-partition.html#partitioned-by"><span class="std std-ref">PARTITIONED BY</span></a></strong></p>
<p>An optional clause to partition the table by a subset of columns.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unless you define a Delta Lake table partitioning columns referencing the columns in the column specification are always moved to the end of the table.</p>
</div>
</li>
<li><p><strong>clustered_by_clause</strong></p>
<p>Optionally cluster the table or each partition into a fixed number of hash buckets using a subset of the columns.</p>
<p>Clustering is not supported for Delta Lake tables.</p>
<ul>
<li><p><strong>CLUSTERED BY</strong></p>
<p>Specifies the set of columns by which to cluster each partition, or the table if no partitioning is specified.</p>
<ul>
<li><p><strong><a class="reference internal" href="sql-ref-identifiers.html"><span class="doc">cluster_column</span></a></strong></p>
<p>An identifier referencing a <code class="docutils literal notranslate"><span class="pre">column_identifier</span></code> in the table. If you specify more than one column there must be no duplicates.
Since a clustering operates on the partition level you must not name a partition column also as a cluster column.</p>
</li>
</ul>
</li>
<li><p><strong>SORTED BY</strong></p>
<p>Optionally maintains a sort order for rows in a bucket.</p>
<ul>
<li><p><strong>sort_column</strong></p>
<p>A column to sort the bucket by. The column must not be partition column.
Sort columns must be unique.</p>
</li>
<li><p><strong>ASC</strong> or <strong>DESC</strong></p>
<p>Optionally specifies whether <code class="docutils literal notranslate"><span class="pre">sort_column</span></code> is sorted in ascending (<code class="docutils literal notranslate"><span class="pre">ASC</span></code>) or descending (<code class="docutils literal notranslate"><span class="pre">DESC</span></code>) order.
The default values is <code class="docutils literal notranslate"><span class="pre">ASC</span></code>.</p>
</li>
</ul>
</li>
<li><p><strong>INTO num_buckets BUCKETS</strong></p>
<p>An INTEGER literal specifying the number of buckets into which each partition (or the table if no partitioning is specified) is divided.</p>
</li>
</ul>
</li>
<li><p><strong>LOCATION path [ WITH ( CREDENTIAL <a class="reference internal" href="sql-ref-names.html#credential-name"><span class="std std-ref">credential_name</span></a> ) ]</strong></p>
<p>An optional path to the directory where table data is stored, which could be a path on distributed storage.
<code class="docutils literal notranslate"><span class="pre">path</span></code> must be a STRING literal.
If you specify no location the table is considered a <code class="docutils literal notranslate"><span class="pre">managed</span> <span class="pre">table</span></code> and Databricks creates a default table location.</p>
<p>Specifying a location makes the table an <a class="reference internal" href="../../data-governance/unity-catalog/create-tables.html#external-tables"><span class="std std-ref">external table</span></a>.</p>
<p>For tables that do not reside in the <code class="docutils literal notranslate"><span class="pre">hive_metastore</span></code> catalog, the table <code class="docutils literal notranslate"><span class="pre">path</span></code> must be protected by an <a class="reference internal" href="sql-ref-external-locations.html"><span class="doc">external location</span></a> unless a valid <a class="reference internal" href="sql-ref-storage-credentials.html"><span class="doc">storage credential</span></a> is specified.</p>
<p>You cannot create external tables in locations that overlap with the location of <a class="reference internal" href="../../data-governance/unity-catalog/create-tables.html#managed-table"><span class="std std-ref">managed tables</span></a>.</p>
<p>For a Delta Lake table the table configuration is inherited from the <code class="docutils literal notranslate"><span class="pre">LOCATION</span></code> if data is present.
Therefore, if any <code class="docutils literal notranslate"><span class="pre">TBLPROPERTIES</span></code>, <code class="docutils literal notranslate"><span class="pre">table_specification</span></code>, or <code class="docutils literal notranslate"><span class="pre">PARTITIONED</span> <span class="pre">BY</span></code> clauses are specified for Delta Lake tables they must exactly match the Delta Lake location data.</p>
</li>
<li><p><strong><a class="reference internal" href="sql-ref-syntax-ddl-tblproperties.html#options"><span class="std std-ref">OPTIONS</span></a></strong></p>
<p>Sets or resets one or more user defined table options.</p>
</li>
<li><p><strong>COMMENT table_comment</strong></p>
<p>A string literal to describe the table.</p>
</li>
<li><p><strong><a class="reference internal" href="sql-ref-syntax-ddl-tblproperties.html#tblproperties"><span class="std std-ref">TBLPROPERTIES</span></a></strong></p>
<p>Optionally sets one or more user defined properties.</p>
</li>
<li><p><strong>WITH <a class="reference internal" href="sql-ref-syntax-ddl-row-filter.html"><span class="doc">ROW FILTER clause</span></a></strong></p>
<p><strong>Applies to:</strong> <img alt="check marked yes" src="../../_images/check.png" /> Databricks SQL <img alt="check marked yes" src="../../_images/check.png" /> Databricks Runtime 12.2 and above <img alt="check marked yes" src="../../_images/check.png" /> Unity Catalog</p>
<div class="preview admonition">
<p class="admonition-title">Preview</p>
<p>This feature is in <a class="reference internal" href="../../release-notes/release-types.html"><span class="doc">Public Preview</span></a>.</p>
</div>
<p>Adds a row filter function to the table.
All future queries from that table will receive subset of its rows
for which the function evaluates to boolean TRUE.
This can be useful for fine-grained access control purposes wherein
the function can inspect the identity and/or group memberships of
the invoking user in order to decide whether to filter certain rows.</p>
</li>
</ul>
</li>
<li id="as"><p><strong>AS <a class="reference internal" href="sql-ref-syntax-qry-query.html"><span class="doc">query</span></a></strong></p>
<p>This optional clause populates the table using the data from <code class="docutils literal notranslate"><span class="pre">query</span></code>.
When you specify a <code class="docutils literal notranslate"><span class="pre">query</span></code> you must not also specify a <code class="docutils literal notranslate"><span class="pre">table_specification</span></code>. The table schema is derived from the query.</p>
<p>Note that Databricks overwrites the underlying data source with the data of the
input query, to make sure the table gets created contains exactly the same data as the input query.</p>
</li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline"> </a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Creates a Delta table</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="nb">INT</span><span class="p">);</span>

<span class="c1">-- Use data from another table</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">student_copy</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">student</span><span class="p">;</span>

<span class="c1">-- Creates a CSV table from an external directory</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="n">CSV</span><span class="w"> </span><span class="k">LOCATION</span><span class="w"> </span><span class="s1">&#39;/mnt/csv_files&#39;</span><span class="p">;</span>

<span class="c1">-- Specify table comment and properties</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="nb">INT</span><span class="p">)</span>
<span class="w">    </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;this is a comment&#39;</span>
<span class="w">    </span><span class="n">TBLPROPERTIES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>

<span class="c1">-- Specify table comment and properties with different clauses order</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="nb">INT</span><span class="p">)</span>
<span class="w">    </span><span class="n">TBLPROPERTIES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="k">COMMENT</span><span class="w"> </span><span class="s1">&#39;this is a comment&#39;</span><span class="p">;</span>

<span class="c1">-- Create partitioned table</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">student</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="nb">INT</span><span class="p">)</span>
<span class="w">    </span><span class="n">PARTITIONED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="p">(</span><span class="n">age</span><span class="p">);</span>

<span class="c1">-- Create a table with a generated column</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">rectangles</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span>
<span class="w">                          </span><span class="n">area</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="k">GENERATED</span><span class="w"> </span><span class="n">ALWAYS</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">b</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="related-articles">
<h2>Related articles<a class="headerlink" href="#related-articles" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="sql-ref-syntax-ddl-alter-table.html"><span class="doc">ALTER TABLE</span></a></p></li>
<li><p><a class="reference internal" href="sql-ref-syntax-ddl-create-table-constraint.html"><span class="doc">CONSTRAINT</span></a></p></li>
<li><p><a class="reference internal" href="sql-ref-syntax-ddl-create-table-like.html"><span class="doc">CREATE TABLE LIKE</span></a></p></li>
<li><p><a class="reference internal" href="delta-clone.html"><span class="doc">CREATE TABLE CLONE</span></a></p></li>
<li><p><a class="reference internal" href="sql-ref-syntax-ddl-drop-table.html"><span class="doc">DROP TABLE</span></a></p></li>
<li><p><a class="reference internal" href="sql-ref-partition.html#partitioned-by"><span class="std std-ref">PARTITIONED BY</span></a></p></li>
<li><p><a class="reference internal" href="sql-ref-syntax-ddl-tblproperties.html"><span class="doc">Table properties and table options</span></a></p></li>
</ul>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../../_static/js/localized.js"></script>
  <script type="text/javascript" src="../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>