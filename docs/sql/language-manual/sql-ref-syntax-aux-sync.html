

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn how to use the SYNC command of the SQL language in Databricks." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="SYNC">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>SYNC &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/sql/language-manual/sql-ref-syntax-aux-sync.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/sql/language-manual/sql-ref-syntax-aux-sync.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/sql/language-manual/sql-ref-syntax-aux-sync.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="top" title="Databricks on AWS" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../../en/sql/language-manual/sql-ref-syntax-aux-sync.html" class="notranslate">English</option>
    <option value="../../../ja/sql/language-manual/sql-ref-syntax-aux-sync.html" class="notranslate">日本語</option>
    <option value="../../../pt/sql/language-manual/sql-ref-syntax-aux-sync.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li><code class="docutils literal notranslate"><span class="pre">SYNC</span></code></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="sync">
<h1><code class="docutils literal notranslate"><span class="pre">SYNC</span></code><a class="headerlink" href="#sync" title="Permalink to this headline"> </a></h1>
<p><strong>Applies to:</strong> <img alt="check marked yes" src="../../_images/check.png" /> Databricks SQL <img alt="check marked yes" src="../../_images/check.png" /> Databricks Runtime <img alt="check marked yes" src="../../_images/check.png" /> Unity Catalog only</p>
<p>The <code class="docutils literal notranslate"><span class="pre">SYNC</span></code> command is used to upgrade external tables in Hive Metastore to external tables in Unity Catalog.
You can use it to create new tables in Unity Catalog from existing Hive Metastore tables as well as update the Unity Catalog tables when the source tables in Hive Metastore are changed.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">SYNC</span></code> command can be run at a schema level using the <code class="docutils literal notranslate"><span class="pre">SYNC</span> <span class="pre">SCHEMA</span></code> syntax or for an individual table using the <code class="docutils literal notranslate"><span class="pre">SYNC</span> <span class="pre">TABLE</span></code> syntax.</p>
<p>The command performs a write operation (<code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span></code>) to each source table it upgrades to add some additional table properties for its bookkeeping.
In case of Delta tables, to perform the write operation the cluster or SQL Warehouse that runs the command must have write access to the table location.</p>
<p>In Databricks Runtime 12.0 or above, this behavior can be turned off by setting the Spark configuration <code class="docutils literal notranslate"><span class="pre">spark.databricks.sync.command.disableSourceTableWrites</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> before running the <code class="docutils literal notranslate"><span class="pre">SYNC</span></code> command. When set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">SYNC</span></code> does not add new table properties and therefore might not detect if the table has previously been upgraded to Unity Catalog.
In that case, it exclusively relies on the table name to determine if the table has been previously upgraded to Unity Catalog.
If the source table has been renamed since the last SYNC command, the user needs to manually rename the destination table before re-running the SYNC command when the config is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>When a <code class="docutils literal notranslate"><span class="pre">SYNC</span></code> command is executed, the <code class="docutils literal notranslate"><span class="pre">SET</span> <span class="pre">TBLPROPERTIES</span></code> operation adds a table property that indicates the target Unity Catalog external table reference. This operation computes a new Delta snapshot and adds a new entry to the table Delta log, writing to the target table path in cloud storage.</p>
</div>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline"> </a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SYNC</span> <span class="p">{</span> <span class="n">SCHEMA</span> <span class="n">target_schema</span> <span class="n">FROM</span> <span class="n">source_schema</span> <span class="o">|</span>
       <span class="n">TABLE</span> <span class="n">target_table</span> <span class="n">FROM</span> <span class="n">source_table</span> <span class="p">}</span>
  <span class="p">[</span><span class="n">SET</span> <span class="n">OWNER</span> <span class="n">principal</span><span class="p">]</span>
  <span class="p">[</span><span class="n">DRY</span> <span class="n">RUN</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline"> </a></h2>
<ul>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">SCHEMA</span></code></strong></p>
<p><code class="docutils literal notranslate"><span class="pre">SYNC</span></code> all the tables within a schema.</p>
<ul>
<li><p><strong><a class="reference internal" href="sql-ref-names.html#schema-name"><span class="std std-ref">target_schema</span></a></strong></p>
<p>An existing schema in Unity Catalog within which the user is authorized to create tables.</p>
</li>
<li><p><strong><a class="reference internal" href="sql-ref-names.html#schema-name"><span class="std std-ref">source_schema</span></a></strong></p>
<p>An existing schema in the <code class="docutils literal notranslate"><span class="pre">hive_metastore</span></code> catalog, which is owned by the user.</p>
</li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">TABLE</span></code></strong></p>
<p><code class="docutils literal notranslate"><span class="pre">SYNC</span></code> an individual table.</p>
<ul>
<li><p><strong><a class="reference internal" href="sql-ref-names.html#table-name"><span class="std std-ref">target_table</span></a></strong></p>
<p>A new or existing table in Unity Catalog in a schema within which the user is authorized to create tables.
If the table already exists it is replaced to match <code class="docutils literal notranslate"><span class="pre">source_table</span></code>, and the user must also own the table.
If the table does not exist it will be created.</p>
</li>
<li><p><strong><a class="reference internal" href="sql-ref-names.html#table-name"><span class="std std-ref">source_table</span></a></strong></p>
<p>An existing table in <code class="docutils literal notranslate"><span class="pre">hive_metastore</span></code> which the user owns.</p>
</li>
</ul>
</li>
<li><p><strong><a class="reference internal" href="sql-ref-principal.html"><span class="doc">principal</span></a></strong></p>
<p>Optionally set the owner of the upgraded tables in Unity Catalog to <code class="docutils literal notranslate"><span class="pre">principal</span></code>.
The default owner is the current user.</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">DRY</span> <span class="pre">RUN</span></code></strong></p>
<p>When specified checks whether the <code class="docutils literal notranslate"><span class="pre">source_table</span></code> or tables within <code class="docutils literal notranslate"><span class="pre">source_schema</span></code> can be upgraded without actually creating or upgrading the target tables.
The command returns <code class="docutils literal notranslate"><span class="pre">DRY_RUN_SUCCESS</span></code> if a table can be upgraded.</p>
</li>
</ul>
</div>
<div class="section" id="returns">
<h2>Returns<a class="headerlink" href="#returns" title="Permalink to this headline"> </a></h2>
<p>A report with the following columns:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">source_schema</span> <span class="pre">STRING</span></code></p>
<p>The name of the source schema. The schema is <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if the source is an unsupported temporary view.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">source_name</span> <span class="pre">STRING</span> <span class="pre">NOT</span> <span class="pre">NULL</span></code></p>
<p>The name of the source table.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">source_type</span> <span class="pre">STRING</span> <span class="pre">NOT</span> <span class="pre">NULL</span></code></p>
<p>The type of the table: <code class="docutils literal notranslate"><span class="pre">MANAGED</span></code> or <code class="docutils literal notranslate"><span class="pre">EXTERNAL</span></code></p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">target_catalog</span> <span class="pre">STRING</span> <span class="pre">NOT</span> <span class="pre">NULL</span></code></p>
<p>The target catalog in Unity Catalog where the table is synced.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">target_schema</span> <span class="pre">STRING</span> <span class="pre">NOT</span> <span class="pre">NULL</span></code></p>
<p>The target schema in Unity Catalog where the table is synced.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">target_name</span> <span class="pre">STRING</span> <span class="pre">NOT</span> <span class="pre">NULL</span></code></p>
<p>The name of the table in Unity Catalog to which the source table is synced. This name matches the source table name.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">status_code</span> <span class="pre">STRING</span> <span class="pre">NOT</span> <span class="pre">NULL</span></code></p>
<p>A status code for the result of the <code class="docutils literal notranslate"><span class="pre">SYNC</span></code> command for the source table.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span> <span class="pre">STRING</span></code></p>
<p>A descriptive message about the status of the sync command for the source table.</p>
</li>
</ul>
</div>
<div class="section" id="common-status-codes-returned-by-sync">
<h2>Common status codes returned by <code class="docutils literal notranslate"><span class="pre">SYNC</span></code><a class="headerlink" href="#common-status-codes-returned-by-sync" title="Permalink to this headline"> </a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">SYNC</span></code> command provides a unique <code class="docutils literal notranslate"><span class="pre">status_code</span></code> field in the output for each table to be upgraded to the Unity Catalog representing the status of the upgrade.
Some common status codes along with the recommendations to address them are:</p>
<ul>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">DRY_RUN_SUCCESS</span></code></strong>: Dry run successful.</p>
<p>The table can be upgraded to Unity Catalog using the <code class="docutils literal notranslate"><span class="pre">SYNC</span></code> command.</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">DBFS_ROOT_LOCATION</span></code></strong>: Table located in the Databricks Filesystem root.</p>
<p>The table is located in the Databricks Filesystem root location.
This is not supported in Unity Catalog.
Copy the table data to the Unity Catalog location using a <a class="reference internal" href="sql-ref-syntax-ddl-create-table.html"><span class="doc">CREATE TABLE</span></a> command with the <code class="docutils literal notranslate"><span class="pre">DEEP</span> <span class="pre">CLONE</span></code> option.</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">EXTERNAL_TABLE_IN_MANAGED_LOCATION</span></code></strong>: External table path cannot be under managed storage.</p>
<p>The path given for the external table is within Unity Catalog manage storage.
If the table needs to be under the managed storage, upgrade the table as a managed table using a <a class="reference internal" href="sql-ref-syntax-ddl-create-table.html"><span class="doc">CREATE TABLE</span></a> command with the <code class="docutils literal notranslate"><span class="pre">DEEP</span> <span class="pre">CLONE</span></code> option or move the table location out of Unity Catalog managed storage.</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">HIVE_SERDE</span></code></strong>: The table is not eligible for an upgrade from Hive Metastore to Unity Catalog. Reason: Hive SerDe Table.</p>
<p>Hive SerDe tables are not supported by Unity Catalog.
Change the tables into Delta format and issue the <code class="docutils literal notranslate"><span class="pre">SYNC</span></code> command to upgrade.</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">INVALID_DATASOURCE_FORMAT</span></code></strong>: Datasource format not specified or is not supported.</p>
<p>Use one of the supported data source formats: Delta, Parquet, CSV, JSON, ORC, TEXT</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">LOCATION_OVERLAP</span></code></strong>: Input path overlaps with other external tables.</p>
<p>The table location overlaps with other external tables.
Use a different location for the table or remove the overlapping external tables.</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">MULTIPLE_EXT_LOCATIONS</span></code></strong>: Input path contains other external locations.</p>
<p>There are more than one external locations which are subdirectories of the provided table path.
Check if the external locations within the table location are necessary.</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">MULTIPLE_TARGET_TABLE</span></code></strong>: A different synced table already exists. Only one target table per source table is allowed.</p>
<p>The source table was already synced to a different target table previously which is not allowed.
To force the <code class="docutils literal notranslate"><span class="pre">SYNC</span></code> to a different table, remove the table property <code class="docutils literal notranslate"><span class="pre">upgraded_to</span></code> from the source table or remove the previously synced table from Unity Catalog if it is not needed anymore.</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">NOT_EXTERNAL</span></code></strong>: Table is not eligible for upgrade from Hive Metastore to Unity Catalog. Reason: Not an external table.</p>
<p><code class="docutils literal notranslate"><span class="pre">SYNC</span></code> command only supports migrating external tables to Unity Catalog.
For managed tables, create a managed table in Unity Catalog using a <a class="reference internal" href="sql-ref-syntax-ddl-create-table.html"><span class="doc">CREATE TABLE</span></a> command with the <code class="docutils literal notranslate"><span class="pre">DEEP</span> <span class="pre">CLONE</span></code> option.</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">READ_ONLY_CATALOG</span></code></strong>: Data inside a Delta sharing catalog is read-only and cannot be modified or deleted.</p>
<p>The chosen catalog is a delta sharing catalog which is read-only.
Tables within a read-only catalog cannot be updated using the <code class="docutils literal notranslate"><span class="pre">SYNC</span></code> command.</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">SUCCESS</span></code></strong>: Table successfully synced.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">TABLE_ALREADY_EXISTS</span></code></strong>: Target table already exists.</p>
<p>A table with the same name as the chosen table already exists in Unity Catalog.
Rename or remove the existing table in Unity Catalog and rerun the <code class="docutils literal notranslate"><span class="pre">SYNC</span></code> command.</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">TEMP_TABLE_NOT_SUPPORTED</span></code></strong>: Temporary tables or views are not supported.</p>
<p>Temporary tables or views cannot be upgraded to Unity Catalog.
To use temporary tables or views, recreate them in Unity Catalog using the <a class="reference internal" href="sql-ref-syntax-aux-show-create-table.html"><span class="doc">SHOW CREATE TABLE</span></a> command in Unity Catalog.</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">TIMEOUT</span></code></strong>: Sync task timed out.</p>
<p>The sync command task took more than 300 seconds to complete.
Increase <code class="docutils literal notranslate"><span class="pre">spark.databricks.sync.command.task.timeout</span></code> to a higher value in seconds.
Default value is 300. If the error persists contact support.</p>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">VIEWS_NOT_SUPPORTED</span></code></strong>: Views are not supported.</p>
<p>Recreate the views manually using <a class="reference internal" href="sql-ref-syntax-aux-show-create-table.html"><span class="doc">SHOW CREATE TABLE</span></a> command in Unity Catalog.</p>
</li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline"> </a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="w"> </span><span class="n">Sync</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="k">existing</span><span class="w"> </span><span class="n">hive</span><span class="w"> </span><span class="n">metastore</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">hive_metastore</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">my_tbl</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Unity</span><span class="w"> </span><span class="k">Catalog</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">my_tbl</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">SYNC</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">my_tbl</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">hive_metastore</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">my_tbl</span><span class="p">;</span>
<span class="w">  </span><span class="n">source_schema</span><span class="w"> </span><span class="n">source_name</span><span class="w"> </span><span class="n">source_type</span><span class="w"> </span><span class="n">target_catalog</span><span class="w"> </span><span class="n">target_schema</span><span class="w"> </span><span class="n">target_name</span><span class="w"> </span><span class="n">status_code</span><span class="w"> </span><span class="n">description</span>
<span class="w">  </span><span class="c1">------------- ----------- ----------- -------------- ------------- ----------- ----------- ---------------------------------</span>
<span class="w">  </span><span class="k">default</span><span class="w">       </span><span class="n">my_tbl</span><span class="w">      </span><span class="k">external</span><span class="w">    </span><span class="n">main</span><span class="w">           </span><span class="k">default</span><span class="w">       </span><span class="n">my_tbl</span><span class="w">      </span><span class="n">SUCCESS</span><span class="w">     </span><span class="k">Table</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">my_tbl</span><span class="w"> </span><span class="n">synced</span><span class="p">.</span>

<span class="o">-</span><span class="w"> </span><span class="n">SYNC</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">DRY</span><span class="w"> </span><span class="n">RUN</span><span class="w"> </span><span class="k">mode</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">evaluate</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">upgradability</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">hive</span><span class="w"> </span><span class="n">metastore</span><span class="w"> </span><span class="k">table</span><span class="p">.</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">SYNC</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">my_tbl</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">hive_metastore</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">my_tbl</span><span class="w"> </span><span class="n">DRY</span><span class="w"> </span><span class="n">RUN</span><span class="p">;</span>
<span class="w">  </span><span class="n">source_schema</span><span class="w"> </span><span class="n">source_name</span><span class="w"> </span><span class="n">source_type</span><span class="w"> </span><span class="n">target_catalog</span><span class="w"> </span><span class="n">target_schema</span><span class="w"> </span><span class="n">target_name</span><span class="w"> </span><span class="n">status_code</span><span class="w">     </span><span class="n">description</span>
<span class="w">  </span><span class="c1">------------- ----------- ----------- -------------- ------------- ----------- --------------- ---------------------------------</span>
<span class="w">  </span><span class="k">default</span><span class="w">       </span><span class="n">my_tbl</span><span class="w">      </span><span class="k">external</span><span class="w">    </span><span class="n">main</span><span class="w">           </span><span class="k">default</span><span class="w">       </span><span class="n">my_tbl</span><span class="w">      </span><span class="n">DRY_RUN_SUCCESS</span>

<span class="o">-</span><span class="w"> </span><span class="n">SYNC</span><span class="w"> </span><span class="k">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">eligible</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">schema</span><span class="w"> </span><span class="n">hive_metastore</span><span class="p">.</span><span class="n">mydb</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Unity</span><span class="w"> </span><span class="k">Catalog</span><span class="w"> </span><span class="k">schema</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">my_db_uc</span><span class="p">.</span>
<span class="o">-</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">upgraded</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">my_db_uc</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">owned</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">alf</span><span class="o">@</span><span class="n">melmak</span><span class="p">.</span><span class="n">et</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">SYNC</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">my_db_uc</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">hive_metastore</span><span class="p">.</span><span class="n">my_db</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="k">OWNER</span><span class="w"> </span><span class="o">`</span><span class="n">alf</span><span class="o">@</span><span class="n">melmak</span><span class="p">.</span><span class="n">et</span><span class="o">`</span><span class="p">;</span>
<span class="w">  </span><span class="n">source_schema</span><span class="w"> </span><span class="n">source_name</span><span class="w"> </span><span class="n">source_type</span><span class="w"> </span><span class="n">target_catalog</span><span class="w"> </span><span class="n">target_schema</span><span class="w"> </span><span class="n">target_name</span><span class="w"> </span><span class="n">status_code</span><span class="w"> </span><span class="n">description</span>
<span class="w">  </span><span class="c1">------------- ----------- ----------- -------------- ------------- ----------- ----------- ---------------------------------</span>
<span class="w">  </span><span class="p">...</span>

<span class="o">-</span><span class="w"> </span><span class="n">DRY</span><span class="w"> </span><span class="n">RUN</span><span class="w"> </span><span class="k">mode</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">SYNC</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">evaluate</span><span class="w"> </span><span class="k">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">schema</span>
<span class="o">-</span><span class="w"> </span><span class="n">hive_metastore</span><span class="p">.</span><span class="n">mydb</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">upgrading</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">Unity</span><span class="w"> </span><span class="k">Catalog</span><span class="p">.</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">SYNC</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">my_db_uc</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">hive_metastore</span><span class="p">.</span><span class="n">my_db</span><span class="w"> </span><span class="n">DRY</span><span class="w"> </span><span class="n">RUN</span><span class="p">;</span>
<span class="w">  </span><span class="n">source_schema</span><span class="w"> </span><span class="n">source_name</span><span class="w"> </span><span class="n">source_type</span><span class="w"> </span><span class="n">target_catalog</span><span class="w"> </span><span class="n">target_schema</span><span class="w"> </span><span class="n">target_name</span><span class="w"> </span><span class="n">status_code</span><span class="w">     </span><span class="n">description</span>
<span class="w">  </span><span class="c1">------------- ----------- ----------- -------------- ------------- ----------- -----------     ---------------------------------</span>
<span class="w">  </span><span class="p">...</span>
</pre></div>
</div>
</div>
<div class="section" id="related-articles">
<h2>Related articles<a class="headerlink" href="#related-articles" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="sql-ref-syntax-ddl-create-table.html"><span class="doc">CREATE TABLE</span></a></p></li>
<li><p><a class="reference internal" href="sql-ref-syntax-ddl-create-view.html"><span class="doc">CREATE VIEW</span></a></p></li>
<li><p><a class="reference internal" href="sql-ref-syntax-aux-show-create-table.html"><span class="doc">SHOW CREATE TABLE</span></a></p></li>
</ul>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../../_static/js/localized.js"></script>
  <script type="text/javascript" src="../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>