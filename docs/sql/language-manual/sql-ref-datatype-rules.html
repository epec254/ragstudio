

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en-US" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->

<head>
  <!-- cookie consent -->
  
    <!-- Combined Onetrust and Rudderstack Implementation Scripts -->
    <!-- Onetrust Initialization -->
    <script type="text/javascript" src="https://cdn.cookielaw.org/consent/92466579-1717-44d3-809d-a05fb02843ed-test/OtAutoBlock.js"></script>
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="92466579-1717-44d3-809d-a05fb02843ed-test"></script>
    <link rel="stylesheet" id="db-onetrust-style" href="https://www.databricks.com/wp-content/uploads/db_onetrust.css" media="all" />
    <!-- Setting Rudderstack Write Key -->
    <script>window.rudderstackKey = "2SOR9fvSr5Fi6tN2ihPbVHnX1SZ" </script>
    <!-- Rudderstack Initialization + Onetrust Integration + Rudderstack Custom Events -->
    <script type="text/javascript" src="https://www.databricks.com/sites/default/files/rudderstack/v1/db-rudderstack-events.js"></script>

  <!-- cookie consent -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="X-UA-Compatible" content="IE=9" />
  <meta content="Learn about rules governing SQL data types in Databricks SQL an Databricks Runtime." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta property="og:image:type" content="image/png">
  <meta property="og:title" content="SQL data type rules">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://docs.databricks.com">
  <meta property="og:description" content="" id="og-description">
  <meta name="twitter:image" content="https://www.databricks.com/wp-content/uploads/2020/04/og-databricks.png">
  <meta name="twitter:site" content="@databricks">
  <meta name="twitter:creator" content="@databricks">
  <meta property="twitter:description" content="">
  
  <title>SQL data type rules &#124; Databricks on AWS</title>
  
  
  <link rel="canonical" href="https://docs.databricks.com/en/sql/language-manual/sql-ref-datatype-rules.html">
  <!-- Start hreflang tag -->
  <link rel="alternate" hreflang="en" href="https://docs.databricks.com/en/sql/language-manual/sql-ref-datatype-rules.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.databricks.com/en/sql/language-manual/sql-ref-datatype-rules.html" />
  <!-- End hreflang tag -->
  
  
  <link rel="shortcut icon" href="../../_static/favicon.ico" />
  

  

  

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T85FQ33');</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;
j.setAttributeNode(d.createAttribute('data-ot-ignore'));
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TWTKQQ');</script>
    
  <!-- End Google Tag Manager -->


  <!-- MaxMind / GEO IP -->
  <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
  <!-- End MaxMind / GEO IP -->

  
  
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600&display=swap" rel="stylesheet">
  <link rel="preload" href="../../_static/fonts/DMSans-Bold.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMSans-Regular.ttf" as="font">
  <link rel="preload" href="../../_static/fonts/DMMono-Regular.ttf" as="font">
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/cloud-provider-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/translation-selector.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/searchunify/main.css" type="text/css" />

  
  <link rel="index" title="Index" href="../../genindex.html" />
  <link rel="search" title="Search" href="../../search.html" />
  <link rel="top" title="Databricks on AWS" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T85FQ33"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TWTKQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  
  <nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
    
<nav class="wy-nav-top header su_header" role="navigation" aria-label="top navigation">
  <div class="container-logo">
    <ul class="mobile-menu-toggle">
        <li class="menu-toggle">
            <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
            
            <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
              alt="Databricks" /></a>   
               
              </li>
    </ul>
    <ul class="su_nav-menu">
      <li class="menu-toggle">
        <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
        
          
        
        <a href="https://www.databricks.com/" class="wy-nav-top-logo"><img src="../../_static/small-scale-lockup-full-color-rgb.svg" width="137" height="21"
            alt="Databricks" /></a></li>
        <!-- 
<li><a href="https://help.databricks.com/s/">Help Center</a></li>
<li class="active"><a href="https://docs.databricks.com/en/">Documentation</a></li>
<li><a href="https://kb.databricks.com/">Knowledge Base</a></li>
 -->
    </ul>
  </div>
  <div class="su_nav-right">
    <ul class="su_link-mobile">
  <!-- Mobile header code can go here -->
</ul>
<ul class="right-try-list">
   
</ul>
  </div>
</nav>
  </nav>

  <div class="su_sub-header">
    <div class="container">
      <div class="su_sub-header-inner">
        <!-- <div class="su_subnav-menu-right">
  <div id="auto" style="width: 100%;">
    <div ng-controller="SearchautoController">
      <div bind-html-compile="autocompleteHtml">
        <form class="su__search-box-1" disabled="disabled">
          <input class="su__search-input" type="search" name="Search box" id="su__search-b" placeholder="Search Documentation" disabled="disabled"/>
          <button class="su__search-button" type="submit" class="button button-success" disabled="disabled">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <path
                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                fill="#333"></path>
            </svg>
          </button>
        </form>
      </div>
    </div>
  </div>
</div> -->
        <div class="search-lng-gap"></div>
        <div style="margin-left: 16px; margin-right: 16px;">
          <!-- <select name="lng selector" id="lng-selector">
    <option value="../../../en/sql/language-manual/sql-ref-datatype-rules.html" class="notranslate">English</option>
    <option value="../../../ja/sql/language-manual/sql-ref-datatype-rules.html" class="notranslate">日本語</option>
    <option value="../../../pt/sql/language-manual/sql-ref-datatype-rules.html" class="notranslate">Português (Brasil)</option>
</select> -->
        </div>
        <div class="cloud-selector-container">
          <!-- <select name="cloud provider selector" id="cloud-provider-selector">
    <option value="aws" selected class="notranslate">
        Amazon Web Services
    </option>
    <option value="azure"  class="notranslate">
        Microsoft Azure
    </option>
    <option value="gcp"  class="notranslate">
        Google Cloud Platform
    </option>
</select> -->
        </div>
      </div>
    </div>
  </div>
  <page class="js-page-container">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side su_nav-side">
<div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    

    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../index.html" class="main-navigation-home">Databricks on AWS</a>
    

    
      

      
        <p class="caption"><span class="caption-text">Load &amp; manage data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rag-temp/index.html">RAG Studio</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    
  <p class="build_info notranslate"data-last-edit="December 23, 2023">
    Updated Jan 11, 2024
  </p>
<script>
  window.addEventListener('DOMContentLoaded',function(){
    var h1=document.querySelector('h1');
    var bi=document.querySelector('[data-last-edit]');
    if(h1 && bi){
      var ver = document.createElement('p');
      ver.className = 'version_info';
      ver.textContent = bi.getAttribute('data-last-edit');
      h1.parentElement.insertBefore(ver, h1.nextElementSibling);
    }
  });
</script>

    <p>
      
        <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
      
    </p>
  </div>
</div>
</nav>
    
    
<main class="wy-grid-for-nav su_nav-grid">
  <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
    <div class="wy-nav-content su__nav_content">
      <div class="rst-content">
        





<div role="navigation" aria-label="breadcrumbs navigation" class="wy-breadcrumbs-wrapper">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>SQL data type rules</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>
</div>
        
        <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
          <div itemprop="articleBody">
            
    
  <div class="section" id="sql-data-type-rules">
<h1>SQL data type rules<a class="headerlink" href="#sql-data-type-rules" title="Permalink to this headline"> </a></h1>
<p><strong>Applies to:</strong> <img alt="check marked yes" src="../../_images/check.png" /> Databricks SQL <img alt="check marked yes" src="../../_images/check.png" /> Databricks Runtime</p>
<p>Databricks uses several rules to resolve conflicts among data types:</p>
<ul class="simple">
<li><p><strong><a class="reference internal" href="#type-promotion"><span class="std std-ref">Promotion</span></a></strong> safely expands a type to a wider type.</p></li>
<li><p><strong><a class="reference internal" href="#downcasting"><span class="std std-ref">Implicit downcasting</span></a></strong> narrows a type. The opposite of promotion.</p></li>
<li><p><strong><a class="reference internal" href="#crosscasting"><span class="std std-ref">Implicit crosscasting</span></a></strong> transforms a type into a type of another type family.</p></li>
</ul>
<p>You can also explicitly cast between many types:</p>
<ul class="simple">
<li><p><strong><a class="reference internal" href="functions/cast.html"><span class="doc">cast function</span></a></strong> casts between most types, and returns errors if it cannot.</p></li>
<li><p><strong><a class="reference internal" href="functions/try_cast.html"><span class="doc">try_cast function</span></a></strong> works like <a class="reference internal" href="functions/cast.html"><span class="doc">cast function</span></a> but returns NULL when passed invalid values.</p></li>
<li><p><strong>Other <a class="reference internal" href="sql-ref-functions-builtin.html"><span class="doc">builtin functions</span></a></strong> cast between types using provided format directives.</p></li>
</ul>
<div class="section" id="type-promotion">
<h2>Type promotion<a class="headerlink" href="#type-promotion" title="Permalink to this headline"> </a></h2>
<p>Type promotion is the process of casting a type into another type of the same type family which contains all possible values of the original type.
Therefore type promotion is a safe operation. For example <code class="docutils literal notranslate"><span class="pre">TINYINT</span></code> has a range from <code class="docutils literal notranslate"><span class="pre">-128</span></code> to <code class="docutils literal notranslate"><span class="pre">127</span></code>. All its possible values can be safely promoted to <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>.</p>
</div>
<div class="section" id="type-precedence-list">
<span id="type-precedence-list-1"></span><h2>Type precedence list<a class="headerlink" href="#type-precedence-list" title="Permalink to this headline"> </a></h2>
<p>The <a class="reference internal" href="#type-precedence-list"><span class="std std-ref">type precedence list</span></a> defines whether values of a given data type can be implicitly promoted to another data type.</p>
<table class="docutils align-default" id="type-precedence-list">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Data type</p></th>
<th class="head"><p>Precedence list (from narrowest to widest)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="data-types/tinyint-type.html"><span class="doc">TINYINT</span></a></p></td>
<td><p>TINYINT -&gt; SMALLINT -&gt; INT -&gt; BIGINT -&gt; DECIMAL -&gt; FLOAT <a class="reference internal" href="#1"><span class="std std-ref">(1)</span></a> -&gt; DOUBLE</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="data-types/smallint-type.html"><span class="doc">SMALLINT</span></a></p></td>
<td><p>SMALLINT -&gt; INT -&gt; BIGINT -&gt; DECIMAL -&gt; FLOAT <a class="reference internal" href="#1"><span class="std std-ref">(1)</span></a> -&gt; DOUBLE</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="data-types/int-type.html"><span class="doc">INT</span></a></p></td>
<td><p>INT -&gt; BIGINT -&gt; DECIMAL -&gt; FLOAT <a class="reference internal" href="#1"><span class="std std-ref">(1)</span></a> -&gt; DOUBLE</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="data-types/bigint-type.html"><span class="doc">BIGINT</span></a></p></td>
<td><p>BIGINT -&gt; DECIMAL -&gt; FLOAT <a class="reference internal" href="#1"><span class="std std-ref">(1)</span></a> -&gt; DOUBLE</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="data-types/decimal-type.html"><span class="doc">DECIMAL</span></a></p></td>
<td><p>DECIMAL -&gt; FLOAT <a class="reference internal" href="#1"><span class="std std-ref">(1)</span></a> -&gt; DOUBLE</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="data-types/float-type.html"><span class="doc">FLOAT</span></a></p></td>
<td><p>FLOAT <a class="reference internal" href="#1"><span class="std std-ref">(1)</span></a> -&gt; DOUBLE</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="data-types/double-type.html"><span class="doc">DOUBLE</span></a></p></td>
<td><p>DOUBLE</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="data-types/date-type.html"><span class="doc">DATE</span></a></p></td>
<td><p>DATE -&gt; TIMESTAMP</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="data-types/timestamp-type.html"><span class="doc">TIMESTAMP</span></a></p></td>
<td><p>TIMESTAMP</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="data-types/array-type.html"><span class="doc">ARRAY</span></a></p></td>
<td><p>ARRAY <a class="reference internal" href="#2"><span class="std std-ref">(2)</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="data-types/binary-type.html"><span class="doc">BINARY</span></a></p></td>
<td><p>BINARY</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="data-types/boolean-type.html"><span class="doc">BOOLEAN</span></a></p></td>
<td><p>BOOLEAN</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="data-types/interval-type.html"><span class="doc">INTERVAL</span></a></p></td>
<td><p>INTERVAL</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="data-types/map-type.html"><span class="doc">MAP</span></a></p></td>
<td><p>MAP <a class="reference internal" href="#2"><span class="std std-ref">(2)</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="data-types/string-type.html"><span class="doc">STRING</span></a></p></td>
<td><p>STRING</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="data-types/struct-type.html"><span class="doc">STRUCT</span></a></p></td>
<td><p>STRUCT <a class="reference internal" href="#2"><span class="std std-ref">(2)</span></a></p></td>
</tr>
</tbody>
</table>
<p id="1"><strong>(1)</strong> For <a class="reference internal" href="#least-common-type-resolution"><span class="std std-ref">least common type resolution</span></a> FLOAT is skipped to avoid loss of precision.</p>
<p id="2"><strong>(2)</strong> For a complex type the precedence rule applies recursively to its component elements.</p>
<div class="section" id="strings-and-null">
<h3>Strings and NULL<a class="headerlink" href="#strings-and-null" title="Permalink to this headline"> </a></h3>
<p>Special rules apply for <code class="docutils literal notranslate"><span class="pre">STRING</span></code> and untyped <code class="docutils literal notranslate"><span class="pre">NULL</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NULL</span></code> can be promoted to any other type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRING</span></code> can be promoted to <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">BINARY</span></code>, <code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code>, <code class="docutils literal notranslate"><span class="pre">DATE</span></code>, <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code>, <code class="docutils literal notranslate"><span class="pre">INTERVAL</span></code>, and <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code>. If the actual string value cannot be cast to <a class="reference internal" href="#least-common-type-resolution"><span class="std std-ref">least common type</span></a> Databricks raises a runtime error.
When promoting to <code class="docutils literal notranslate"><span class="pre">INTERVAL</span></code> the string value must match the intervals units.</p></li>
</ul>
</div>
<div class="section" id="type-precedence-graph">
<h3>Type precedence graph<a class="headerlink" href="#type-precedence-graph" title="Permalink to this headline"> </a></h3>
<p>This is a graphical depiction of the precedence hierarchy, combining the <a class="reference internal" href="#type-precedence-list"><span class="std std-ref">type precedence list</span></a> and <a class="reference internal" href="#strings-and-null"><span class="std std-ref">strings and NULLs</span></a> rules.</p>
<p></p>
<div class="figure align-default">
<img alt="Graphical representation of precedence rules" src="../../_images/data-type-precedence.png" />
</div>
</div>
</div>
<div class="section" id="least-common-type-resolution">
<h2>Least common type resolution<a class="headerlink" href="#least-common-type-resolution" title="Permalink to this headline"> </a></h2>
<p>The least common type from a set of types is the narrowest type reachable from the <a class="reference internal" href="#type-precedence-graph"><span class="std std-ref">type precedence graph</span></a> by all elements of the set of types.</p>
<p>The least common type resolution is used to:</p>
<ul class="simple">
<li><p>Decide whether a function that expects a parameter of a given type can be invoked using an argument of a narrower type.</p></li>
<li><p>Derive the argument type for a function that expects a shared argument type for multiple parameters,
such as <a class="reference internal" href="functions/coalesce.html"><span class="doc">coalesce</span></a>, <a class="reference internal" href="functions/in.html"><span class="doc">in</span></a>, <a class="reference internal" href="functions/least.html"><span class="doc">least</span></a>, or <a class="reference internal" href="functions/greatest.html"><span class="doc">greatest</span></a>.</p></li>
<li><p>Derive the operand types for operators such as arithmetic operations or comparisons.</p></li>
<li><p>Derive the result type for expressions such as the <a class="reference internal" href="functions/case.html"><span class="doc">case expression</span></a>.</p></li>
<li><p>Derive the element, key, or value types for <a class="reference internal" href="functions/array.html"><span class="doc">array</span></a> and <a class="reference internal" href="functions/map.html"><span class="doc">map</span></a> constructors.</p></li>
<li><p>Derive the result type of <a class="reference internal" href="sql-ref-syntax-qry-select-setops.html"><span class="doc">UNION, INTERSECT, or EXCEPT</span></a> set operators.</p></li>
</ul>
<p>Special rules are applied if the least common type resolves to <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code>. If any of the contributing types is an exact numeric type (<code class="docutils literal notranslate"><span class="pre">TINYINT</span></code>, <code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, or <code class="docutils literal notranslate"><span class="pre">DECIMAL</span></code>) the least common type is pushed to <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code> to avoid potential loss of digits.</p>
</div>
<div class="section" id="implicit-downcasting-and-crosscasting">
<h2>Implicit downcasting and crosscasting<a class="headerlink" href="#implicit-downcasting-and-crosscasting" title="Permalink to this headline"> </a></h2>
<p>Databricks employs these forms of implicit casting only on function and operator invocation, and only where it can unambiguously determine the intent.</p>
<ul id="downcasting">
<li><p><strong>Implicit downcasting</strong></p>
<p>Implicit downcasting automatically casts a wider type to a narrower type without requiring you to specify the cast explicitly.
Downcasting is convenient, but it carries the risk of unexpected runtime errors if the actual value fails to be representable in the narrow type.</p>
<p>Downcasting applies the <a class="reference internal" href="#type-precedence-list"><span class="std std-ref">type precedence list</span></a> in reverse order.</p>
</li>
<li id="crosscasting"><p><strong>Implicit crosscasting</strong></p>
<p>Implicit crosscasting casts a value from one type family to another without requiring you to specify the cast explicitly.</p>
<p>Databricks supports implicit crosscasting from:</p>
<ul class="simple">
<li><p>Any simple type, except <code class="docutils literal notranslate"><span class="pre">BINARY</span></code>, to <code class="docutils literal notranslate"><span class="pre">STRING</span></code>.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">STRING</span></code> to any simple type.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="casting-on-function-invocation">
<h2>Casting on function invocation<a class="headerlink" href="#casting-on-function-invocation" title="Permalink to this headline"> </a></h2>
<p>Given a resolved function or operator, the following rules apply, in the order they are listed, for each parameter and argument pair:</p>
<ul>
<li><p>If a supported parameter type is part of the argument’s <a class="reference internal" href="#type-precedence-graph"><span class="std std-ref">type precedence graph</span></a>, Databricks <a class="reference internal" href="#type-promotion"><span class="std std-ref">promotes</span></a> the argument to that parameter type.</p>
<p>In most cases the function description explicitly states the supported types or chain, such as “any numeric type”.</p>
<p>For example, <a class="reference internal" href="functions/sin.html"><span class="doc">sin(expr)</span></a> operates on <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code> but will accept any numeric.</p>
</li>
<li><p>If the expected parameter type is a <code class="docutils literal notranslate"><span class="pre">STRING</span></code> and the argument is a simple type Databricks <a class="reference internal" href="#crosscasting"><span class="std std-ref">crosscasts</span></a> the argument to the string parameter type.</p>
<p>For example, <a class="reference internal" href="functions/substr.html"><span class="doc">substr(str, start, len)</span></a> expects <code class="docutils literal notranslate"><span class="pre">str</span></code> to be a <code class="docutils literal notranslate"><span class="pre">STRING</span></code>. Instead, you can pass a numeric or datetime type.</p>
</li>
<li><p>If the argument type is a <code class="docutils literal notranslate"><span class="pre">STRING</span></code> and the expected parameter type is a simple type, Databricks <a class="reference internal" href="#crosscasting"><span class="std std-ref">crosscasts</span></a> the string argument to the widest supported parameter type.</p>
<p>For example, <a class="reference internal" href="functions/date_add.html"><span class="doc">date_add(date, days)</span></a> expects a <code class="docutils literal notranslate"><span class="pre">DATE</span></code> and an <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>.</p>
<p>If you invoke <code class="docutils literal notranslate"><span class="pre">date_add()</span></code> with two <code class="docutils literal notranslate"><span class="pre">STRING</span></code>s, Databricks <a class="reference internal" href="#crosscasting"><span class="std std-ref">crosscasts</span></a> the first <code class="docutils literal notranslate"><span class="pre">STRING</span></code> to <code class="docutils literal notranslate"><span class="pre">DATE</span></code> and the second <code class="docutils literal notranslate"><span class="pre">STRING</span></code> to an <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>.</p>
</li>
<li><p>If the function expects a numeric type, such as an <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, or a <code class="docutils literal notranslate"><span class="pre">DATE</span></code> type, but the argument is a more general type, such as a <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code> or <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code>, Databricks implicitly <a class="reference internal" href="#downcasting"><span class="std std-ref">downcasts</span></a> the argument to that parameter type.</p>
<p>For example, a <a class="reference internal" href="functions/date_add.html"><span class="doc">date_add(date, days)</span></a> expects a <code class="docutils literal notranslate"><span class="pre">DATE</span></code> and an <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>.</p>
<p>If you invoke <code class="docutils literal notranslate"><span class="pre">date_add()</span></code> with a <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code> and a <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, Databricks <a class="reference internal" href="#downcasting"><span class="std std-ref">downcasts</span></a> the <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code> to <code class="docutils literal notranslate"><span class="pre">DATE</span></code> by removing the time component and the <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code> to an <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>.</p>
</li>
<li><p>Otherwise, Databricks raises an error.</p></li>
</ul>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline"> </a></h3>
<p>The <a class="reference internal" href="functions/coalesce.html"><span class="doc">coalesce function</span></a> accepts any set of argument types as long as they share a <a class="reference internal" href="#least-common-type-resolution"><span class="std std-ref">least common type</span></a>.</p>
<p>The result type is the least common type of the arguments.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- The least common type of TINYINT and BIGINT is BIGINT</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">typeof</span><span class="p">(</span><span class="k">coalesce</span><span class="p">(</span><span class="mi">1</span><span class="n">Y</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">L</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="p">));</span>
<span class="w">  </span><span class="nb">BIGINT</span>

<span class="c1">-- INTEGER and DATE do not share a precedence chain or support crosscasting in either direction.</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">typeof</span><span class="p">(</span><span class="k">coalesce</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nb">DATE</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">));</span>
<span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="n">Incompatible</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="p">[</span><span class="nb">INT</span><span class="p">,</span><span class="w"> </span><span class="nb">DATE</span><span class="p">]</span>

<span class="c1">-- Both are ARRAYs and the elements have a least common type</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">typeof</span><span class="p">(</span><span class="k">coalesce</span><span class="p">(</span><span class="nb">ARRAY</span><span class="p">(</span><span class="mi">1</span><span class="n">Y</span><span class="p">),</span><span class="w"> </span><span class="nb">ARRAY</span><span class="p">(</span><span class="mi">1</span><span class="n">L</span><span class="p">)))</span>
<span class="w">  </span><span class="nb">ARRAY</span><span class="o">&lt;</span><span class="nb">BIGINT</span><span class="o">&gt;</span>

<span class="c1">-- The least common type of INT and FLOAT is DOUBLE</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">typeof</span><span class="p">(</span><span class="k">coalesce</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">F</span><span class="p">))</span>
<span class="w">  </span><span class="n">DOUBLE</span>

<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">typeof</span><span class="p">(</span><span class="k">coalesce</span><span class="p">(</span><span class="mi">1</span><span class="n">L</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">F</span><span class="p">))</span>
<span class="w">  </span><span class="n">DOUBLE</span>

<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">typeof</span><span class="p">(</span><span class="k">coalesce</span><span class="p">(</span><span class="mi">1</span><span class="n">BD</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">F</span><span class="p">))</span>
<span class="w">  </span><span class="n">DOUBLE</span>

<span class="c1">-- The least common type between an INT and STRING is BIGINT</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">typeof</span><span class="p">(</span><span class="k">coalesce</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;6&#39;</span><span class="p">));</span>
<span class="w">  </span><span class="nb">BIGINT</span>

<span class="c1">-- The least common type is a BIGINT, but the value is not BIGINT.</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">coalesce</span><span class="p">(</span><span class="s1">&#39;6.1&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span>
<span class="w">  </span><span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">.</span><span class="mi">1</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nb">BIGINT</span>

<span class="c1">-- The least common type between a DECIMAL and a STRING is a DOUBLE</span>
<span class="o">&gt;</span><span class="w">  </span><span class="k">SELECT</span><span class="w"> </span><span class="n">typeof</span><span class="p">(</span><span class="k">coalesce</span><span class="p">(</span><span class="mi">1</span><span class="n">BD</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;6&#39;</span><span class="p">));</span>
<span class="w">  </span><span class="n">DOUBLE</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="functions/substring.html"><span class="doc">substring function</span></a> expects arguments of type <code class="docutils literal notranslate"><span class="pre">STRING</span></code> for the string and <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code> for the start and length parameters.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Promotion of TINYINT to INTEGER</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">substring</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">Y</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w"> </span><span class="n">he</span>

<span class="c1">-- No casting</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">substring</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w"> </span><span class="n">he</span>

<span class="c1">-- Casting of a literal string</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">substring</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w"> </span><span class="n">he</span>

<span class="c1">-- Downcasting of a BIGINT to an INT</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">substring</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">L</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w"> </span><span class="n">he</span>

<span class="c1">-- Crosscasting from STRING to INTEGER</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">substring</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">  </span><span class="k">FROM</span><span class="w"> </span><span class="k">VALUES</span><span class="p">(</span><span class="k">CAST</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">STRING</span><span class="p">))</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">T</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
<span class="w"> </span><span class="n">he</span>

<span class="c1">-- Crosscasting from INTEGER to STRING</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">substring</span><span class="p">(</span><span class="mi">12345</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w"> </span><span class="mi">23</span>
</pre></div>
</div>
<p><a class="reference internal" href="functions/pipepipesign.html"><span class="doc">|| (CONCAT)</span></a> allows implicit crosscasting to string.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- A numeric is cast to STRING</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="s1">&#39;This is a numeric: &#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="mi">5</span><span class="p">.</span><span class="mi">4</span><span class="n">E10</span><span class="p">;</span>
<span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nb">numeric</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">.</span><span class="mi">4</span><span class="n">E10</span>

<span class="c1">-- A date is cast to STRING</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="s1">&#39;This is a date: &#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">DATE</span><span class="s1">&#39;2021-11-30&#39;</span><span class="p">;</span>
<span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nb">date</span><span class="p">:</span><span class="w"> </span><span class="mi">2021</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">30</span>
</pre></div>
</div>
<p><a class="reference internal" href="functions/date_add.html"><span class="doc">date_add</span></a> can be invoked with a <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code> or <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code> due to implicit downcasting.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">date_add</span><span class="p">(</span><span class="k">TIMESTAMP</span><span class="s1">&#39;2011-11-30 08:30:00&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="n">L</span><span class="p">);</span>
<span class="w"> </span><span class="mi">2011</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span>
</pre></div>
</div>
<p><a class="reference internal" href="functions/date_add.html"><span class="doc">date_add</span></a> can be invoked with <code class="docutils literal notranslate"><span class="pre">STRING</span></code>s due to implicit crosscasting.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">date_add</span><span class="p">(</span><span class="s1">&#39;2011-11-30 08:30:00&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;5&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="mi">2011</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">05</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="related">
<h2>Related<a class="headerlink" href="#related" title="Permalink to this headline"> </a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="parameters/ansi_mode.html"><span class="doc">ANSI_MODE</span></a></p></li>
<li><p><a class="reference internal" href="functions/cast.html"><span class="doc">cast</span></a></p></li>
<li><p><a class="reference internal" href="sql-ref-datatypes.html"><span class="doc">Data types</span></a></p></li>
<li><p><a class="reference internal" href="sql-ref-functions-builtin.html"><span class="doc">Functions</span></a></p></li>
<li><p><a class="reference internal" href="functions/try_cast.html"><span class="doc">try_cast</span></a></p></li>
</ul>
</div>
</div>


    
          </div>
        </div>
        <div  class="suapp-rating">
  <div id="suPageRateApp">
     <su-app></su-app>
   </div> 
 </div>
<hr> 
<footer>
  <div role="contentinfo">
      <p class="copyright">
          &copy; Databricks 2023. All rights reserved. Apache, Apache Spark, Spark, and the Spark logo are trademarks of the <a href="http://www.apache.org/">Apache Software Foundation</a>.
      </p>
      <p> 
        
          <a id='feedbacklink' href="mailto:doc-feedback@databricks.com?subject=Documentation Feedback">Send us feedback</a>
        
     | <a href="https://databricks.com/privacy-policy">Privacy Policy</a> | <a href="https://databricks.com/terms-of-use">Terms of Use</a></p>

  </div> 

</footer>
      </div>
    </div>
  </section>
</main>

  </page>
  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: '../../',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: 'false'
    };
  </script>
  <script type="text/javascript" src="../../_static/jquery.js"></script>
  <script type="text/javascript" src="../../_static/underscore.js"></script>
  <script type="text/javascript" src="../../_static/doctools.js"></script>
  <script type="text/javascript" src="../../_static/language_data.js"></script>
  

  <script type="text/javascript" src="../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/js/jquery.waypoints.min.js"></script>

  <!-- Select2 (https://select2.org/) -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- End Select2 -->

  
  
  <script type="text/javascript" src="../../_static/js/localized.js"></script>
  <script type="text/javascript" src="../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  
 



  <script>
  window.__searchunifyLoaderConfig = JSON.parse('{"clients": {"en": "02c2e804-27e9-11ee-aefb-0242ac120011", "ja": "6a42c3f2-2820-11ee-aefb-0242ac120011", "pt": "6a86badd-2821-11ee-aefb-0242ac120011"}}')
</script>
<script type="text/javascript" src="../../_static/js/search-loader.js"></script>
</body>
<script type='text/javascript'>
  window.onload = function () {
    var description = document.querySelector('meta[name="description"]').getAttribute("content");
    let titleText = document.querySelector('h1').textContent;
    document.querySelector('meta[property="og:title"]').setAttribute("content", titleText);
    document.querySelector('meta[property="og:description"]').setAttribute("content", description);
    document.querySelector('meta[property="twitter:description"]').setAttribute("content", description);
  };
</script>

</html>